!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("__webpack_no_use_variable",[],e):"object"==typeof exports?exports.__webpack_no_use_variable=e():t.__webpack_no_use_variable=e()}(this,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2036)}({2:function(t,e,n){"use strict";function o(t,e,n,o,i,r,a,c){var s,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),o&&(u.functional=!0),r&&(u._scopeId="data-v-"+r),a?(s=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=s):i&&(s=c?function(){i.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:i),s)if(u.functional){u._injectStyles=s;var l=u.render;u.render=function(t,e){return s.call(e),l(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,s):[s]}return{exports:t,options:u}}n.d(e,"a",(function(){return o}))},2036:function(t,e,n){"use strict";n.r(e);var o={};n.r(o),n.d(o,"form",(function(){return a}));var i={};n.r(i),n.d(i,"initHideSettingColSwitch",(function(){return x})),n.d(i,"changeHideSettingStatus",(function(){return M})),n.d(i,"hideSettingColToggle",(function(){return P}));var r={};n.r(r),n.d(r,"SiteFormManageModule",(function(){return bt})),n.d(r,"TabManageModule",(function(){return At})),n.d(r,"TabPackManageModule",(function(){return Jt})),n.d(r,"AccordionPackManageModule",(function(){return ie})),n.d(r,"getManageModuleClass",(function(){return re}));var a={namespaced:!0,state:{data:{}},getters:{getItem:function(t){return function(e){return t.data[e]||{}}},getChangedList:function(t){return Object.values(t.data).filter((function(t){return t._changed}))}},mutations:{setItem:function(t,e){e.id&&(t.data[e.id]||Vue.set(t.data,e.id,e))}},actions:{editFormItem:function(t,e){var n=t.state,o=(t.commit,t.dispatch,e.formId),i=e.itemId;return new Promise((function(t,e){var r=n.data[o],a=r.other,c=a.payType,s=void 0===c?0:c,u=a.formulaData,l=(u=void 0===u?{}:u).formula,d=void 0===l?"":l,f=Fai.top.jzModule.utils.getBitMemory(r.flag,64)&&1==s?(d.match(/prop\d+/gi)||[]).map((function(t){return Number(t.replace("prop",""))})):[],p=r.contentList,m=function(e){var n=p[e];if(n.id===i){g=Object.assign({},n),Fai.top.siteFormTmpTableData=g;var o=f.includes(n.id);return Site.popupWindow({title:"修改表单项",frameSrcUrl:"manage_v2/formItemManage.jsp?ram=".concat(Math.random(),"&mode=edit&tmpPrimaryKeyId=").concat(e,"&isMobi=false&showFormulaUseTips=").concat(o),closeFunc:function(e){if(e){var o=JSON.parse(e).data;Site.undoRun((function(){}),{type:"module.siteFormItem",detail:"editSiteFormItem",undoSame:!1,redoSame:!1,undoArgs:[n,Object.assign({},n)],redoArgs:[n,o],undoFn:function(t,e){$.extend(t,e)},redoFn:function(t,e){$.extend(t,e)}}),Site.styleChanged(),r._changed=!0,Object.assign(n,o),t(o)}},width:580,height:600,version:2,saveBeforePopup:!1}),"break"}};for(var h in p){var g;if("break"===m(h))break}}))},delFormItem:function(t,e){var n=t.state,o=(t.commit,t.dispatch,e.formId),i=e.itemId,r=n.data[o],a=r.contentList;if(a.length<=1)return Fai.ing("至少保留一个表单项",!0);var c=function(t){var e=a[t];if(e.id===i){return Vue.prototype.$createDialog({content:"确定删除“".concat(e.name,"”？"),confirmButton:{text:"确 定"},cancelButton:{text:"取 消"},onConfirm:function(){Site.undoRun((function(){}),{type:"module.siteFormItem",detail:"delSiteFormItem",undoSame:!1,redoSame:!1,undoArgs:[t,e,a],redoArgs:[t,e,a],undoFn:function(t,e,n){n.splice(t,0,e)},redoFn:function(t,e,n){n.splice(t,1)}}),Site.styleChanged(),r._changed=!0,a.splice(t,1)}}),"break"}};for(var s in a){if("break"===c(s))break}}}};function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=function Be(){return Be.store||(Be.store=new Vuex.Store({state:{colId:Fai.top._colId,extId:Fai.top._extId,modules:Fai.top.moduleAttr,majorColor:Fai.top._majorColorData,pauseDataWatch:!1,showBackendManageNav:!1},getters:{getAllModuleAttr:function(t){return function(){return t.modules}},getModuleById:function(t){return function(e){return t.modules["module".concat(e)]}},getModuleDataById:function(t){return function(e){return t.modules["module".concat(e)].module}},getShowBackendManageNav:function(t){return t.showBackendManageNav}},mutations:{showBackendManageNavChange:function(t,e){return t.showBackendManageNav=e}},actions:{pauseDataWatch:function(t){t.state.pauseDataWatch=!0,setTimeout((function(){t.state.pauseDataWatch=!1}),0)}},modules:o})),"object"==("undefined"==typeof jzManage?"undefined":c(jzManage))&&(jzManage._store=Be.store),Be.store};var u=function(){var t=[];function e(t,e){return window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.currentStyle[e]}function n(t,e){var n=!0;for(var o in t)t[o]!==e[o]&&(n=!1);return n}return setInterval((function(){for(var o=0;o<t.length;o++){var i=t[o].el,r={width:e(i,"width"),height:e(i,"height")};n(r,t[o].style)||(t[o].style={width:r.width,height:r.height},t[o].callback&&t[o].callback())}}),500),{bind:function(n,o){var i={el:n,callback:o,style:{width:e(n,"width"),height:e(n,"height")}};t.push(i)},remove:function(e){t.splice(t.indexOf(e)),-1!==t.indexOf(e)&&t.splice(t.indexOf(e),1)}}}();function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d="horizontal",f="vertical",p="auxiliaryLine",m=201069;function h(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",o=0;o<t;o++){var i=Math.round(Math.random()*(n.length-1));e+=n.substring(i,i+1)}return e}function g(){Site.styleChanged(),Fai.top._siteRulerChanged++}function v(t){Site.logDog(m,7),Site.undoRun((function(e){"do"==e?t.hide():t.show()}),{type:p,detail:"removeLine",doArgs:["do"],undoArgs:["undo"]}),g()}function b(t,e){Site.logDog(m,5),Site.undoRun((function(e){e?(t.removeClass("locked"),t.draggable("enable")):(t.addClass("locked"),t.draggable("disable"))}),{type:p,detail:"lockLine",doArgs:[e],undoArgs:[!e]}),g()}function y(t,e){Site.logDog(m,6),Site.undoRun((function(e){var n=Fai.top._Global.siteRuler,o=n.clc,i=n.slc;e?t.removeClass("site-line").addClass("col-line").css("background",o).find(".line-icon").css("fill",o):t.removeClass("col-line").addClass("site-line").css("background",i).find(".line-icon").css("fill",i)}),{type:p,detail:"setSiteLine",doArgs:[e],undoArgs:[!e]}),g()}function w(t,e,n,o,i,r){var a=e===d,c=Fai.top._Global.siteRuler,s=c.clc,u=c.slc,f=o?u:s,w=r||h(4),S=$('\n        <div class="line '.concat(o?"site-line":"col-line"," ").concat(i?"locked":"",'" data-id=').concat(w,' data-type="').concat(e,'">\n            <svg class="line-icon" style="fill: ').concat(f,'">\n                <use xlink:href="#icon_arrow_panel"></use> \n            </svg>\n            <span class="line-distance">').concat(n,'px</span>\n\t\t\t<span class="line-lock">\n\t\t\t\t<svg class="line-lock-icon">\n\t\t\t\t\t<use xlink:href="#icon_lockguides"></use>\n\t\t\t\t</svg>\n\t\t\t</span>\n        </div>\n    '));a?S.css({left:n,background:f,height:$(document).height()}):S.css({top:n,background:f,width:$(document).width()-17});var k=S.find(".line-distance"),T=S.find(".line-lock"),_=$(".left-distance-line"),I=$(".right-distance-line"),x=$(".top-distance-line"),M=$(".bottom-distance-line");t.append(S),Fai.top._designAuth&&(S.on("click",(function(t){t.stopPropagation()})).hover((function(t){if(!S.hasClass("ui-draggable-dragging")){k.show();var e=(a?t.offsetY:t.offsetX)+10,n=k[0].getBoundingClientRect(),o=$(".auxilibary-ruler-wrap")[0].getBoundingClientRect();e=a?e+n.height+o.top>$(window).height()?$(window).height()-n.height-o.top:e:e+n.width>$(window).width()?$(window).width()-n.width:e,k.css(a?"top":"left",e),S.hasClass("locked")&&T.show()}}),(function(){S.hasClass("ui-draggable-dragging")||(k.hide(),T.hide())})).draggable("destroy").draggable({axis:a?"x":"y",start:function(){var t=parseInt(S.css(a?"left":"top"),10);S.data("oldDis",t),S.css("z-index",3),g()},drag:function(){var t=Fai.top._Global.siteRuler.clc;S.hasClass("locked")&&T.show(),k.show(),setTimeout((function(){var e=parseInt(S.css(a?"left":"top"),10);if(k.text(e+"px"),a){var n=$("#webContainer").width();if(e<0||e>n)return void S.css("cursor","not-allowed");S.css("cursor","")}var o={absDiffNum:100,$l:null,lDistance:-1},i={absDiffNum:100,$l:null};S.siblings(".line").each((function(t,n){var r=$(n);if(r.is(":visible")){var c=parseInt(r.css(a?"left":"top")),s=e-c,u=Math.abs(s);u>100||(s>=0?o.absDiffNum>=u&&(o.absDiffNum=u,o.$l=r,o.lDistance=c):i.absDiffNum>=u&&(i.absDiffNum=u,i.$l=r))}}));var r=a?_:x;if(null!==o.$l){var c,s=o.absDiffNum,u=o.lDistance;r.css((c={background:t},l(c,a?"left":"top",u+1),l(c,a?"width":"height",s-1),c)).show().find(".two-line-distance").css({background:t}).text("".concat(s,"px")).end().find(".after, .before").css({background:t})}else r.hide();var d,f=a?I:M;null!==i.$l?(Site.logDog(m,8),f.css((d={background:t},l(d,a?"left":"top",e),l(d,a?"width":"height",i.absDiffNum),d)).show().find(".two-line-distance").css({background:t}).text("".concat(i.absDiffNum,"px")).end().find(".after, .before").css({background:t})):f.hide()}),0)},stop:function(){S.css("z-index",""),Site.logDog(m,3),setTimeout((function(){a?(_.hide(),I.hide(),S.css("cursor","")):(x.hide(),M.hide())}),0);var t=parseInt(S.css(a?"left":"top"),10),e=parseInt(S.data("oldDis"));Site.undoRun((function(t){a?t<0||t>$("#webContainer").width()?(S.hide(),Site.logDog(m,14)):S.show().css("left",t):t<0||t>$(".vertical-ruler-wrap").height()?(S.hide(),Site.logDog(m,14)):S.show().css("top",t),k.text(t+"px")}),{type:p,detail:"dragLine",doArgs:[t],undoArgs:[e]})}}),i&&S.draggable("disable"),$.contextMenu({selector:".line[data-id=".concat(w,"]"),className:"fk-moduleContextMenu auxilibaryLine-line",build:function(){Site.logDog(m,4);var t=S.hasClass("site-line"),e=S.hasClass("locked");return{items:{del:{html:"<div>删除参考线</div>",name:"删除参考线",usehtml:!0,callback:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return v.apply(void 0,[S].concat(e))}},lock:{html:'<div class="'.concat(e?"lock-line-active":"",'">锁定参考线</div>'),name:"锁定参考线",usehtml:!0,callback:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return b.apply(void 0,[S,e].concat(n))}},setSite:{html:'<div class="'.concat(t?"site-line-active":"",'">设置全站参考线</div>'),name:"设置全站参考线",usehtml:!0,callback:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return y.apply(void 0,[S,t].concat(n))}}}}}}),T.off("click").on("click",(function(){b(S,!0),$(this).hide()})),!r&&g(),Site.undoRun((function(t){"do"==t?S.show():S.hide()}),{type:p,detail:"removeAllLine",doArgs:["do"],undoArgs:["undo"]}))}function S(){if(Fai.top._designAuth){var t=$(".horizontal-ruler-wrap"),e=t.find(".content"),n=t.find(".temp-line"),o=t.find(".temp-distance"),i=$("#webContainer").width();t.off("mouseover mousemove").on("mouseover mousemove",(function(e){var r=$(e.target);if(!(r.hasClass("line")||r.hasClass("line-lock")||["svg","use"].includes(r.prop("tagName")))){var a=Fai.top._Global.siteRuler,c=a.clc,s=a.slc,u=e.ctrlKey?s:c,l=t.data("margin"),d=e.clientX-l;d<0||d>i||(n.css({height:$(document).height(),left:d,background:u,display:"block"}),o.text("".concat(d,"px")).css({left:d+10,display:"block"}))}})).off("mouseout").on("mouseout",(function(){n.css({left:"",display:"none"}),o.css({left:"",display:"none"})})).off("click").on("click",(function(n){var o=t.data("margin"),r=n.pageX-o;r<0||r>i?Site.logDog(m,13):(w(e,d,r,n.ctrlKey),Site.logDog(m,1))}))}}function k(t,e,n){n=n||h(4);var o=parseInt(t/100,10);t%100>50&&(o+=1);var i=e==f?"top":"left",r=Array(o).fill("").reduce((function(t,e,n){var o=100*n;return t+'<div class="scale-item" style="'.concat(i,": ").concat(o+4,'px">').concat(o,"</div>")}),"");return $(".scale-wrapper.".concat(n)).remove(),$('<div class="scale-wrapper '.concat(n,'">').concat(r,"</div>"))}function T(t,e){var n=t.find(".content"),o=$(e).height();t.css("height",o),n.append(k(o,f,"vertical-scale"))}function _(){var t=$(".horizontal-ruler-wrap");if(0!==t.length){var e=$("#webContainer").width(),n=Math.ceil(($(window).width()-e)/2-0);t.data("margin",n),t.css("background-position-x","".concat(n,"px")),$(".line[data-type=".concat(f,"]")).width($(document).width()-17),$(".line[data-type=".concat(d,"]")).height($(document).height())}}var I=null,x=function(){if(Fai.top._Global.isShowSettingColToggle){var t=$("#hideSettingCol");if(t.length>0)return I&&(I.status=!0),void t.fadeIn();var e=$('\n\t\t\t<div id="hideSettingCol" class="hide_setting_col_wrap" style="display: none"></div>\n\t\t'),n=$("#sitetips");n.length>0&&n.is(":visible")&&e.css("top",n.outerHeight(!0)),$("body").append(e),I=new Vue({data:function(){return{status:!0,loading:!1,animationTime:300,showTips:!1,toolTipManual:!0,topbarTop:0,rulerTop:0,memberBarAreaTop:0,gMainTop:0,webTop:0,navTop:0,rightBarTop:0}},mounted:function(){this.toolTipManual=!1},methods:{handleChange:function(t){var e=this;if(!this.loading){if(this.loading=!0,"boolean"!=typeof t)this.status=!this.status;else{if(this.status===t)return void(this.loading=!1);this.status=t}Fai.top._Global.hideSettingCol=!this.status,this.status?this.showSettingCol():this.hideSettingCol(),setTimeout((function(){e.loading=!1}),this.animationTime)}},showSettingCol:function(){Site.logDog(201070,2),$("#fk-funPanelArea").fadeIn(),Fai.top._Global.isOpenAllLock&&$("#allLockBtn").fadeIn(),$("#fk-helpQueryPanelArea").fadeIn();var t=$("#memberBarArea");t.length>0&&t.css("top",this.memberBarAreaTop),$("#web").css("top",this.webTop),$(".floatLeftTop, .floatRightTop").css("top",this.webTop);var e=$(".horizontal-ruler-wrap");e.length>0&&e.is(":visible")&&(e.css({top:this.rulerTop,zIndex:""}),$(".vertical-ruler-wrap").fadeIn(),e.find(".line").fadeIn());var n=$("#fk-toolTopBar");n.css({top:this.topbarTop,"box-shadow":""}),setTimeout((function(){n.css("z-index","")}),300),Site.fixFixedHeader(this.webTop);var o=$("#navV2");o.length>0&&"fixed"==o.css("position")&&(o.css({top:this.navTop,transition:"top .3s"}),setTimeout((function(){o.css("transition","")}),300));var i=$(".fk-rbar");i.length>0&&(i.css("top",this.rightBarTop),setTimeout((function(){i.css("transition","")}),300))},hideSettingCol:function(){Site.logDog(201070,1),$("#fk-funPanelArea").fadeOut(),$("#allLockBtn").fadeOut(),$("#fk-helpQueryPanelArea").fadeOut();var t=0,e=$("#fk-toolTopBar"),n=e.outerHeight(!0),o=$(".horizontal-ruler-wrap");o.length>0&&o.is(":visible")&&(t=o.outerHeight(!0));var i=n+t;o.length>0&&o.is(":visible")&&(this.rulerTop=parseInt(o.css("top"),10),o.css({top:this.rulerTop-i,zIndex:9030}),$(".vertical-ruler-wrap").hide(),o.find(".line").hide());var r=parseInt(e.css("top"),10);this.topbarTop=r,e.css({top:r-i,"box-shadow":"none",zIndex:9030});var a=$("#memberBarArea");if(a.length>0){var c=parseInt(a.css("top"),10);this.memberBarAreaTop=c,a.css("top",c-i)}var s=$("#web"),u=parseInt(s.css("top"),10);this.webTop=u;var l=u-i;s.css("top",l),$(".floatLeftTop, .floatRightTop").css("top",l),Site.fixFixedHeader(l);var d=$("#navV2");d.length>0&&"fixed"==d.css("position")&&(this.navTop=parseInt(d.css("top"),10),d.css({top:this.navTop-i,transition:"top .3s"}),setTimeout((function(){d.css("transition","")}),300));var f=$(".fk-rbar");f.length>0&&(this.rightBarTop=parseInt(f.css("top"),10),f.css({top:this.rightBarTop-i,transition:".3s all"}))},handleShowTips:function(){this.showTips=!0}},template:'\n\t\t\t\t<tooltip-component\n\t\t\t\t\t:content="\'点击\' + (status ? \'隐藏\' : \'显示\') + \'设置栏\'" \n\t\t\t\t\tpopper-class="hideSettingPopup"\n\t\t\t\t\tplacement="bottom"\n\t\t\t\t\teffect="light"\n\t\t\t\t\tv-model="showTips"\n\t\t\t\t\t:manual="toolTipManual"\n\t\t\t\t>\n\t\t\t\t\t<div class="hide_setting_col" :class="{ hidden: status }" @click="handleChange">\n\t\t\t\t\t\t<svg>\n\t\t\t\t\t\t\t<use xlink:href="#icon_arrow05"></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t</tooltip-component>\n\t\t\t'}).$mount(),$("#hideSettingCol").append(I.$el).fadeIn()}},M=function(t){Fai.top._Global.isShowSettingColToggle&&I&&I.handleChange(t)},P=function(t){if("boolean"!=typeof t)throw Error("[Site.hideSettingColToggle]: 请传boolean");Fai.top._Global.isShowSettingColToggle=t,t?(x(),I&&I.handleShowTips()):($("#hideSettingCol").fadeOut(),I&&(I.showTips=!1),Fai.top._Global.hideSettingCol&&(I&&I.showSettingCol(),Fai.top._Global.hideSettingCol=!1))};function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var N=C(C({},{initRulerAndLine:function(){var t=$(".horizontal-ruler-wrap");if(t.length>0&&!t.is(":visible"))return $(".auxilibary-ruler-wrap").show(),Site.resetGmainPos(),void g();this.initRuler(),Site.resetGmainPos()},initRuler:function(){Fai.top._Global.openSiteRuler&&(function(){var t=$('\n        <div class="auxilibary-ruler-wrap horizontal-ruler-wrap">\n            <div class="content">\n\t\t\t\t<span class="temp-distance"></span>\n                <div class="temp-line"></div>\n                <div class="left-distance-line">\n                    <div class="two-line-distance"></div>\n                    <span class="before"></span>\n                    <span class="after"></span>\n                </div>\n                <div class="right-distance-line">\n                    <div class="two-line-distance"></div>\n                    <span class="before"></span>\n                    <span class="after"></span>\n                </div>\n            </div>\n        </div>\n    '),e=$("#fk-toolTopBar"),n=e.outerHeight(!0),o=(e.offset().top,n+e[0].getBoundingClientRect().top);t.css({top:o});var i=$("#webContainer").width(),r=t.find(".content");r.width("".concat(i,"px")),$("#fk-toolTopBar").before(t),_(),$(window).off("resize.ruler").on("resize.ruler",_),r.append(k(i,d,"horizontal-scale")),Site.resetGmainPos(),$("#J_WebRightBar").css("z-index",9030)}(),function(){var t=$('\n        <div class="auxilibary-ruler-wrap vertical-ruler-wrap">\n            <div class="content">\n\t\t\t\t<span class="temp-distance"></span>\n                <div class="temp-line"></div>\n                <div class="top-distance-line">\n                    <div class="two-line-distance"></div>\n                    <span class="before"></span>\n                    <span class="after"></span>\n                </div>\n                <div class="bottom-distance-line">\n                    <div class="two-line-distance"></div>\n                    <span class="before"></span>\n                    <span class="after"></span>\n                </div>\n            </div>\n        </div>\n    '),e=document.querySelector("#web"),n=document.querySelector("#topAdvArea");T(t,e);var o=$("#fk-toolTopBar"),i=o.outerHeight(!0)+o[0].getBoundingClientRect().top+$(".horizontal-ruler-wrap").height()+1;t.css({top:i}),$("body").append(t),u.bind(e,(function(){return T(t,e)})),n&&u.bind(n,(function(){return T(t,e)}))}(),function(){var t=Fai.top._Global.colLineList||[],e=Fai.top._Global.siteRuler.sll||[];if(0!==t.length||0!==e.length){var n=$(".horizontal-ruler-wrap .content"),o=$(".vertical-ruler-wrap .content");t.forEach((function(t){var e=t.type,i=t.id,r=t.distance,a=t.isLocked;w(e===d?n:o,e,r,!1,a,i)})),e.forEach((function(t){var e=t.type,i=t.id,r=t.distance,a=t.isLocked;w(e===d?n:o,e,r,!0,a,i)}))}}(),S(),function(){if(Fai.top._designAuth){var t=$(".vertical-ruler-wrap"),e=t.find(".content"),n=t.find(".temp-line"),o=t.find(".temp-distance");t.on("mousemouseover mousemove",(function(t){var e=$(t.target);if(!(e.hasClass("line")||e.hasClass("line-lock")||["svg","use"].includes(e.prop("tagName")))){var i=Fai.top._Global.siteRuler,r=i.clc,a=i.slc,c=t.ctrlKey?a:r,s=t.offsetY;e.hasClass("scale-item")&&(s+=parseInt(e.css("top"),10)),n.css({width:$(document).width()-17,top:s,background:c,display:"block"}),o.text("".concat(s,"px")).css({top:s+10,display:"block"})}})).on("mouseout",(function(){n.css({top:"",display:"none"}),o.css({top:"",display:"none"})})).on("click",(function(t){var n=$(t.target),o=t.offsetY;n.hasClass("scale-item")&&(o+=parseInt(n.css("top"),10)),w(e,f,o,t.ctrlKey),Site.logDog(m,2)}))}}())},removeAllLine:function(){Site.logDog(m,12),Site.undoRun((function(t){"do"==t?$(".vertical-ruler-wrap .line, .horizontal-ruler-wrap .line").hide():$(".vertical-ruler-wrap .line, .horizontal-ruler-wrap .line").show()}),{type:p,detail:"removeAllLine",doArgs:["do"],undoArgs:["undo"]}),g()},hideRulerAndLine:function(){Fai.top._Global.openSiteRuler||($(".auxilibary-ruler-wrap").hide(),Site.resetGmainPos(),g())},changeLineColor:function(t,e){$(".auxilibary-ruler-wrap ".concat("col"===t?".col-line":".site-line")).css({background:e}).find(".line-icon").css({fill:e}),g()},fixHorizontalRuler:function(){if(Fai.top._Global.openSiteRuler){var t=$(".horizontal-ruler-wrap .content"),e=$("#webContainer").width();t.width("".concat(e,"px")),t.append(k(e,d,"horizontal-scale")),S(),_()}},fixVerticalRuler:function(){if(Fai.top._Global.openSiteRuler){var t=$(".vertical-ruler-wrap"),e=document.querySelector("#web"),n=document.querySelector("#topAdvArea"),o=$(n);T(t,e),u.remove(n),o.length>0&&o.is(":visible")&&u.bind(n,(function(){return T(t,e)}))}}}),i),B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"toolbar-component toolbar-component__base",style:{left:t.left,top:t.top},on:{mouseenter:t.toolbarMouseenter,mouseleave:t.toolbarMouseleave}},t._l(t.toolList,(function(e){return n("div",{key:t.createSymbol(),staticClass:"toolbar-item",on:{click:function(n){return t.handleToolBarClick(e)}}},[n("tooltip-component",{attrs:{content:e.tooltipsText,effect:"light",disabled:e.disableTooltips||!e.tooltipsText,"popper-class":"toolbarToolTip"}},[n(t.getComponentByType(e),{tag:"component",attrs:{tool:e}})],1)],1)})),0)};B._withStripped=!0;var F=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"toolBarIconItem","class":"f-"+t.tool.icon})};F._withStripped=!0;var j={props:["tool"]},L=n(2),D=Object(L.a)(j,F,[],!1,null,null,null);D.options.__file="res/site/js/src/business/manage/toolbar/components/ToolBarIconItem.vue";var E=D.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toolBarTextItem"},[n("span",{staticClass:"toolBarText"},[t._v(t._s(t.tool.text))])])};R._withStripped=!0;var H={props:["tool"]},z=Object(L.a)(H,R,[],!1,null,null,null);z.options.__file="res/site/js/src/business/manage/toolbar/components/ToolBarTextItem.vue";var V=z.exports,G={data:function(){return{toolBarOptions:{},left:"0px",top:"0px",isShow:!1,mouseInToolbar:!1}},methods:{createSymbol:function(){return Symbol()},toolBarUpdate:function(t){var e=this;0!==t.$element.length&&(this.toolBarOptions=t,this.$nextTick((function(){e.setToolBarPosition(),e.showToolBar()})))},setToolBarPosition:function(){var t=this.getToolBarPosition(),e=t.left,n=t.top,o=0;o+=$(".horizontal-ruler-wrap").outerHeight()||0,o+=$("#fk-toolTopBar").outerHeight()||0,o+=$("#memberBarArea").outerHeight()||0,n<window.scrollY+o&&(n=window.scrollY+o),this.left="".concat(e,"px"),this.top="".concat(n,"px")},showToolBar:function(){this.preventHideTimer&&clearTimeout(this.preventHideTimer),this.isShow=!0,this.mouseInToolbar=!1},hideToolBar:function(){var t=this;this.preventHideTimer=setTimeout((function(){t.mouseInToolbar||t.handleHideToolBar()}),16)},toolbarMouseenter:function(){this.mouseInToolbar=!0,this.toolBarOptions.moveinToolbar&&this.toolBarOptions.moveinToolbar()},toolbarMouseleave:function(){var t=this;this.isShow=!1,this.mouseInToolbar=!1,this.$nextTick((function(){t.toolBarOptions.moveoutToolbar&&t.toolBarOptions.moveoutToolbar()}))},handleHideToolBar:function(){var t=this;this.isShow=!1,this.mouseInToolbar&&(this.mouseInToolbar=!1,this.$nextTick((function(){t.toolBarOptions.moveoutToolbar&&t.toolBarOptions.moveoutToolbar()})))},handleToolBarClick:function(t){"function"==typeof t.onclick&&(!1!==t.onclick()&&this.toolbarMouseleave())}},computed:{toolList:function(){return this.toolBarOptions.toolList||[]}}},Y={name:"ToolBarComponent",components:{ToolBarIconItem:E,ToolBarTextItem:V},mixins:[G],methods:{getToolBarPosition:function(){var t=this.toolBarOptions.$element.offset();return{left:t.left,top:t.top-$(".toolbar-component").outerHeight(!0)-6}},getComponentByType:function(t){var e={text:V,icon:E}[t.type];if(!e)throw new Error("请传入type：".concat(JSON.stringify(t)));return e}}},J=Object(L.a)(Y,B,[],!1,null,null,null);J.options.__file="res/site/js/src/business/manage/toolbar/BaseToolBarComponent.vue";var q=J.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"toolbar-component toolbar-component__side",style:{left:t.left,top:t.top},on:{mouseenter:t.toolbarMouseenter,mouseleave:t.toolbarMouseleave}},t._l(t.toolList,(function(e){return n("div",{key:t.createSymbol(),staticClass:"toolbar-side-item","class":{"toolbar-side-item__active":e.active},on:{click:function(n){return t.handleToolBarClick(e)}}},[n("div",{staticClass:"toolbar-svg-wrap"},[n("svg",{staticClass:"toolbar-svg"},[n("use",{attrs:{"xlink:href":e.active?"#icon_tab1":"#icon_tab"}})])]),t._v(" "),n("div",{staticClass:"toolbar-text-wrap"},[t._v("\n\t\t\t"+t._s(e.text)+"\n\t\t")])])})),0)};U._withStripped=!0;var W={name:"SideToolBarComponent",mixins:[G],methods:{getToolBarPosition:function(){var t=this.toolBarOptions.$element.offset(),e=t.left,n=t.top,o=$(this.$el);o.outerHeight(!0);return{left:e-o.width(),top:n}}}},Z=Object(L.a)(W,U,[],!1,null,null,null);Z.options.__file="res/site/js/src/business/manage/toolbar/SideToolBarComponent.vue";var X=Z.exports;function K(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Q=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._vm=null,this.component=e}var e,n,o;return e=t,(n=[{key:"_init",value:function(){var e=this;if(null===this._vm){var n=document.querySelector("#toolBarComponent_".concat(this.component.name));null===n&&(n=document.createElement("div"),document.querySelector("body").appendChild(n)),t.initedOnScroll||(t.onScrollCallbacks={},window.addEventListener("scroll",(function(){Object.keys(t.onScrollCallbacks).forEach((function(e){var n=t.onScrollCallbacks[e];"function"==typeof n&&n()}))})),t.initedOnScroll=!0),t.onScrollCallbacks[this.component.name||Math.random()]=function(){e.toolBarComponent.isShow&&e.toolBarComponent.setToolBarPosition()},this._vm=new Fai.top.Vue({el:n,components:{ToolBarComponent:this.component},template:'<ToolBarComponent ref="toolBar" />'})}}},{key:"show",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};Fai.top.Vue.options.components.TooltipComponent&&(null===this._vm&&this._init(),this.toolBarComponent.toolBarUpdate(t))}},{key:"hide",value:function(){null!==this._vm&&this.toolBarComponent.hideToolBar()}},{key:"toolBarComponent",get:function(){return null===this._vm?null:this._vm.$refs.toolBar}}])&&K(e.prototype,n),o&&K(e,o),t}(),tt={base:new Q(q),side:new Q(X)};function et(t){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e,n,o,i,r,a){try{var c=t[r](a),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(o,i)}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function it(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function rt(t,e){return(rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=ut(t);if(e){var i=ut(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return ct(this,n)}}function ct(t,e){return!e||"object"!==et(e)&&"function"!=typeof e?st(t):e}function st(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ut(t){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rt(t,e)}(c,jzModule.Module);var e,n,o,i,r,a=at(c);function c(t){var e;ot(this,c);for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return e=a.call.apply(a,[this,t].concat(o)),c._instances[t]=st(e),e.initManageModule(),e.init(),e}return e=c,n=[{key:"init",value:function(){this.isCusModuleClass()&&this.throwError("未定义 init 方法")}},{key:"initManageModule",value:function(){}},{key:"isCusModuleClass",value:function(){return Object.getPrototypeOf(this).constructor!==c}},{key:"switchModuleVersion",value:function(t){c.switchModuleVersion(this.moduleId,t,this.module.style)}}],o=[{key:"find",value:function(t){return c._instances[t]}},{key:"install",value:function(t){var e=t.id;t.style,new(jzModule.getManageModuleClass(t))(e,t)}},{key:"switchModuleVersion",value:function(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1;Site.diaLogSaveBtnStillNext((function(){return function(){var o=Site.addRequestPrefix({newPath:"/ajax/module_h.jsp",oldPath:Site.genAjaxUrl("module_h.jsp")}),i=Fai.isIE()?300:0,r={cmd:"switchModuleStyle",fromStyle:n,toStyle:e,id:t};$.ajax({type:"post",url:o,data:r,error:function(){Site.Message.warning(LS.js_systemError)},success:function(t){var n=JSON.parse(t);n.success?(Site.Message.success(n.msg),c.swichVersionLog(e),setTimeout((function(){return location.reload()}),i)):Site.Message.warning(n.msg)}})}}))()}},{key:"swichVersionLog",value:function(t){switch(t){case 116:Site.logDog(201220,1);break;case 6:Site.logDog(201220,2)}}},{key:"getModuleStaticData",value:function(t){var e={86:{svgName:"simpleText"},79:{svgName:"floatImg"},81:{svgName:"floatBtn"},1:{svgName:"rich"},88:{svgName:"list_photos"},89:{svgName:"list_photos"},90:{svgName:"list_photos"},107:{svgName:"list_photos"},108:{svgName:"list_photos"},6:{svgName:"article"},7:{svgName:"article"},116:{svgName:"article"},91:{svgName:"carousel_photos"},92:{svgName:"carousel_photos"},93:{svgName:"carousel_photos"},112:{svgName:"carousel_photos"},27:{svgName:"photoGroup"},36:{svgName:"flv"},11:{svgName:"nav"},87:{svgName:"pack"},110:{svgName:["tabPackHorizonal","tabPackVertical","tabPackFold","tabPackPicture"]},35:{svgName:"mulModuleCol"},109:{svgName:"fullmeasurePack"},2:{svgName:"product"},3:{svgName:"product"},8:{svgName:"product"},12:{svgName:"product"},13:{svgName:"product"},30:{svgName:"product"},41:{svgName:"product"},74:{svgName:"product"},95:{svgName:"productNav"},96:{svgName:"productNav"},97:{svgName:"productMallGroup"},45:{svgName:"productSearch"},40:{svgName:"serviceOnline"},32:{svgName:"siteForm"},75:{svgName:"msgSubmit"},64:{svgName:"siteQrCode"},62:{svgName:"siteSearch"},67:{svgName:"shareTo"},51:{svgName:"memberLogin"},54:{svgName:"memberLogin"},23:{svgName:"vote"},113:{svgName:"customSearch"},85:{svgName:"photoMoreCard"},98:{svgName:"photoMoreCard"},24:{svgName:"newsgroup"},101:{svgName:"photoGroupNav"},28:{svgName:"weather"},39:{svgName:"notice"},115:{svgName:"dynamicNumber"},18:{svgName:"map"},10:{svgName:"panelFile"},111:{svgName:"panorama"},56:{svgName:"location"},66:{svgName:"date"},37:{svgName:"code"},20:{svgName:"iframe"},17:{svgName:"flash"},65:{svgName:"indexFavorite"},72:{svgName:"weiboShow"},43:{svgName:"code"},26:{svgName:"productNav"},38:{svgName:"productLabel"},21:{svgName:"productNav"},9:{svgName:"filter"},4:{svgName:"photoGroup"},5:{svgName:"photoGroup"},16:{svgName:"photoGroup"},77:{svgName:"photoGroup"},31:{svgName:"photoGroup"},42:{svgName:"photoGroup"},29:{svgName:["tabPackHorizonal","tabPackVertical"]},80:{svgName:"fullmeasurePack"},34:{svgName:"table"},83:{svgName:"photoMoreCard"},33:{svgName:"link"},117:{svgName:"accrodionPack"}},n=null;if(!((n="logo"==t||"corpTitle"==t?Fai.top.$("#"+t):Fai.top.$("#module"+t)).length<1)){var o=n.attr("_modulestyle"),i=null;if("110"==o){var r=n.attr("class"),a=["fk-formTabX","fk-formTabY","fk-formTabFold","fk-formTabPicture"].findIndex((function(t){return r.includes(t)}));i={svgName:e[o].svgName[a]}}else if("29"==o){var c=n.attr("class"),s=["fk-formTabX","fk-formTabY"].findIndex((function(t){return c.includes(t)}));-1!=s&&(i={svgName:e[o].svgName[s]})}else i=e[o];return i}}},{key:"addNewModule",value:(i=regeneratorRuntime.mark((function s(t){var e,n=arguments;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return e=!(n.length>1&&n[1]!==undefined)||n[1],o.abrupt("return",new Promise((function(n){$.ajax({type:"get",url:Site.addRequestPrefix({newPath:"/ajax/module_h.jsp?cmd=addWafCk_add",oldPath:Site.genAjaxUrl("module_h.jsp?cmd=addWafCk_add")}),data:{colId:_colId,extId:_extId,style:t,useDefaultData:e,qurl:Fai.top.location.href},success:function(t){if(Fai.successHandle(t,"","系统错误","",3,1)){var e=$.parseJSON(t);Site.addNewModule(e.id,e.div,null,null,{returnModuledata:e.moduleData}).then(n)}}})})));case 2:case"end":return o.stop()}}),s)})),r=function(){var t=this,e=arguments;return new Promise((function(n,o){var r=i.apply(t,e);function a(t){nt(r,n,o,a,c,"next",t)}function c(t){nt(r,n,o,a,c,"throw",t)}a(undefined)}))},function(t){return r.apply(this,arguments)})},{key:"upDateModuleCallback",value:function(t){Fai.top.Site.ueHoverStyleBindEvent()}},{key:"addNewModuleCallback",value:function(t){Fai.top.Site.ueHoverStyleBindEvent()}}],n&&it(e.prototype,n),o&&it(e,o),c}();function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function mt(t,e){return(mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=vt(t);if(e){var i=vt(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return gt(this,n)}}function gt(t,e){return!e||"object"!==dt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vt(t){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}lt._instances={};var bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mt(t,e)}(r,t);var e,n,o,i=ht(r);function r(){return ft(this,r),i.apply(this,arguments)}return e=r,o=[{key:"switchVersion",value:function(t){var e=arguments.length>1&&arguments[1]!==undefined&&arguments[1];Site.diaLogSaveBtnStillNext((function(){return function(){Site.logDog(200879,e?7:8);var n=[];n.push("cmd=setWafCk_set"),n.push("&id="+t),n.push("&flag8="+e),$.ajax({type:"post",url:Site.addRequestPrefix({newPath:"/ajax/module_h.jsp",oldPath:Site.genAjaxUrl("module_h.jsp")}),data:n.join(""),error:function(){Fai.ing(LS.js_systemError,!0)},success:function(t){var e=$.parseJSON(t);e.success?setTimeout((function(){Fai.top.location.reload()}),Fai.isIE()?300:0):Fai.ing(e.msg,!0)}})}}))(t,e)}}],(n=[{key:"init",value:function(){}}])&&pt(e.prototype,n),o&&pt(e,o),r}(lt);function yt(t){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return St(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return St(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,r=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(c)throw r}}}}function St(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function kt(t,e,n,o,i,r,a){try{var c=t[r](a),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(o,i)}function Tt(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var r=t.apply(e,n);function a(t){kt(r,o,i,a,c,"next",t)}function c(t){kt(r,o,i,a,c,"throw",t)}a(undefined)}))}}function _t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function It(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function xt(t,e){return(xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=$t(t);if(e){var i=$t(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return Pt(this,n)}}function Pt(t,e){return!e||"object"!==yt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var At=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xt(t,e)}(u,t);var e,n,o,i,r,a,c,s=Mt(u);function u(){return _t(this,u),s.apply(this,arguments)}return e=u,n=[{key:"init",value:function(){this.bindTabSortable()}},{key:"isDirectionY",value:function(){return this.getFlag(4)}},{key:"getTabItemList",value:function(){return this.module.prop1}},{key:"addTabItem",value:(c=Tt(regeneratorRuntime.mark((function l(t){var e,n,o,i,r,a,c=arguments;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(e=c.length>1&&c[1]!==undefined?c[1]:0,n=parseInt(t.attr("_moduleid")),o=t.find(".titleText .mainTitle").first().text(),i=parseInt(t.attr("_modulestyle")),this.getTabItemList().find((function(t){return t.i==n}))){s.next=10;break}return r={i:n,name:o,style:i},this.getTabItemList().unshift(r),s.next=10,Vue.nextTick();case 10:return this.$module.find("#formTabButton".concat(n)).click(),(a=$("#formTabCntId".concat(n))).append(t),e&&a.css("cssText","height:".concat(e,"px !important;")),s.abrupt("return",a);case 15:case"end":return s.stop()}}),l,this)}))),function(t){return c.apply(this,arguments)})},{key:"customHeightChanged",value:function(){Site.removeMoveFrame("module"+this.moduleId),Site.dockModuleResize(this.$module)}},{key:"resetTabItemAnimation",value:function(){var t=Site.getModuleAttrAnimation(this.moduleId).list[0];if(t&&0!=t.t){var e=t.t,n=t.r,o=t.s,i=t.d,r=t.c,a={id:this.moduleId,type:e,direction:n,speed:o,delay:i,count:r};this.$module.find(".tab_anim").css("animation","none"),setTimeout((function(){jzUtils.run({name:"moduleAnimation.playAnimation",base:Site},a)}),1)}}},{key:"bindTabSortable",value:function(){var t=this,e=0,n=0,o=this.$module.find(".title_list");o.sortable("destroy").sortable({items:".item",axis:"x",dropOnEmpty:!0,start:function(n,i){o.sortable("option","axis",t.isDirectionY()?"y":"x"),$(i.item).css("transition","none"),e=$(i.item).parent().children(".formTabButton").index($(i.item))},stop:function(i,r){$(r.item).css("transition",""),n=$(r.item).parent().children(".formTabButton").index($(r.item)),o.sortable("cancel"),Site.undoRun((function(e,n){var i=t.getTabItemList().splice(n,1)[0];t.getTabItemList().splice(e,0,i),Vue.nextTick((function(){o.find(".item:eq(".concat(e,")")).click()}))}),{type:"module.tabBtn",detail:"tabBtnSortStop",doArgs:[n,e],undoArgs:[e,n]}),Fai.top.dragToAddModule||(Fai.top.originSortable=""),Site.getModuleAttrData(t.moduleId).changed=!0,Fai.top._moduleMoved++,Site.styleChanged()}})}},{key:"removeTab",value:(a=Tt(regeneratorRuntime.mark((function d(t){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=regeneratorRuntime.keys(this.getTabItemList());case 1:if((n.t1=n.t0()).done){n.next=13;break}if(e=n.t1.value,this.getTabItemList()[e].i!=t){n.next=11;break}return this.getTabItemList().splice(e,1),n.next=8,Vue.nextTick();case 8:return this.$module.find(".formTabButton:eq(0)").click(),Site.displayAddModule(),n.abrupt("return");case 11:n.next=1;break;case 13:case"end":return n.stop()}}),d,this)}))),function(t){return a.apply(this,arguments)})},{key:"refreshTabList",value:function(t,e){var n=this;t=$.extend(!0,[],t);var o=$("#hiddenModuleForms");this.$module.find(".form").appendTo(o),t.forEach((function(t,e){return t.id=e})),this.module.prop1=t,Vue.nextTick((function(){var i=n.$module.find(".J_tabPackContent");t.forEach((function(t,e){var n=i.eq(e);t.ml.forEach((function(t){o.find("#module".concat(t.i)).appendTo(n)}))})),e()}))}},{key:"editTabTitle",value:function(t,e){var n=this.getTabItemList().find((function(e){return e.i==t}));n&&(n.name=e)}},{key:"refreshTabModuleName",value:function(t){var e,n=wt(t);try{for(n.s();!(e=n.n()).done;){var o=e.value,i=o.id,r=o.moduleName;this.editTabTitle(i,r),$("#module".concat(i," .titleText").concat(i)).find(".mainTitle").text(r)}}catch(a){n.e(a)}finally{n.f()}}}],o=[{key:"addModuleCallBackForTab",value:(r=Tt(regeneratorRuntime.mark((function f(t,e,n,o,i,r,a){var c,s,l,d;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return c=$("#module".concat(t)),s=parseInt(o.replace("formTabContent","")),l=lt.find(s),c.attr("_intab",s),c.addClass("formInTab"),f.next=7,l.addTabItem(c,a);case 7:i.splice(0,1),i.length>0&&(d=i[0],r--,Site.addModule(d,e,n,{callback:null,parentId:o,callbackforTab:u.addModuleCallBackForTab,allCheckList:i,iCount:r,firstTabHeight:a})),Site.logDog(200691,1);case 10:case"end":return f.stop()}}),f)}))),function(t,e,n,o,i,a,c){return r.apply(this,arguments)})},{key:"addNewModuleCallBack",value:function(t,e,n,o){var i=Site.getModuleAttrPattern(e);if(i.changed=!0,Fai.top.Site.isVueStyleGrayTest(e)?(i.e=1,Site.setModuleStyleCss(e,".formBanner"+e,"display","none"),i.d.y=1,Site.hideModuleBorder(e),i.i.y=0):(i.bannerType=1,Site.setModuleStyleCss(e,".formBanner"+e,"display","none"),i.border.y=1,Site.hideModuleBorder(e),i.inner.y=0),t.reverse(),t.length>0){var r=t[0];Site.addModule(r,n,o,{callback:null,parentId:"formTabContent"+e,callbackforTab:u.addModuleCallBackForTab,allCheckList:t,iCount:t.length-1})}Site.setModuleHeight(e,200)}},{key:"moduleLeaveTab",value:(i=Tt(regeneratorRuntime.mark((function p(t){var e,n,o,i,r,a,c=arguments;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!((e=c.length>1&&c[1]!==undefined?c[1]:0)<=0)){s.next=3;break}return s.abrupt("return");case 3:if(n=t.attr("_moduleid"),o=lt.find(n).checkNestModule(),i=o.parentId,t.parent().attr("id")=="formTabCntId"+n&&e==i){s.next=8;break}return 1==$("#module"+e).attr("_autoheight")&&(Site.autoModuleHeight(e),Site.getModuleAttrPattern(e).changed=!0),s.next=8,u.find(e).removeTab(n);case 8:$("#module"+e).find(".formTabButton").first().trigger("click"),void 0!==(r=Fai.top.Site.isVueStyleGrayTest(n)?Site.getModuleAttrPattern(n).e:Site.getModuleAttrPattern(n).bannerType)&&t.find(".formBanner:visible").length&&1==r&&(Fai.top.Site.isVueStyleGrayTest(n)?Site.getModuleAttrPattern(n).e=0:Site.getModuleAttrPattern(n).bannerType=0),(a=Fai.top.Site.isVueStyleGrayTest(n)?Site.getModuleAttrPattern(n).d:Site.getModuleAttrPattern(n).border)&&1==a.y&&Site.hideModuleBorder(n),Site.displayAddModule();case 14:case"end":return s.stop()}}),p)}))),function(t){return i.apply(this,arguments)})},{key:"tabAddModuleBtn",value:function(){Fai.top._Global._topBarV2?Site.goToFunPanel():Site.faiFloatPanel(0)}}],n&&It(e.prototype,n),o&&It(e,o),u}(lt);function Ct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ot(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}!function(t,e,n){var o=e.data,i=e.dom,r=e.utils,a=e.event;function c(){var e=i.formTabButton;e.each((function(){var e,n=t(this);e=n.data("tabYPage"),n.removeClass("tabYPage"+e).removeData("tabYPage").show()})),e.eq(0).hasClass("formTabButtonHover")||e.eq(0).click()}function s(){o.formTabButtonHoverHeight=o.formTabButtonHoverHeight||i.formTabButtonYList.find(".formTabButtonHover").outerHeight(!0),o.formTabButtonLength=o.formTabButtonLength||i.formTabButton.length,o.onePageNumForFormTabButton=r.getOnePageNumForFormTabButton(),o.pageNum=r.getPageNum(),c(),a.setPages()}e.resizableStart=function(e){if(o.moduleId=e,i=t.extend(i,r.getBaseDom()),t.isEmptyObject(i))return a.resetDataAndDom();o.canRun=!0,c(),o.formTabButtonHeight=i.formTabButton.not(".formTabButtonHover").outerHeight(!0),o.formTabButtonLength=i.formTabButton.length,o.allFormTabButtonHeight=r.getAllFormTabButtonHeight(),o.pageNum=1},e.resizableResize=function(t){var e,n,c,u,l;o.canRun&&(o.wrapperHeight=t,o.showArrow=!r.checkHeightEnough(),o.showArrow?(o.bgColor=o.bgColor||(e=o.moduleId,n=i.module,c=Site.getModuleAttrPattern(e)||{},u=(Fai.top.Site.isVueStyleGrayTest(e)?c.gb:c.groupBg)||{},2==(l=u.y||0)?u.c||"#fff":1==l?"transparent":0==l?n.find(".formTabDirectionY .titleTable").css("background-color"):"fff"),i.arrow=i.arrow||a.findOrCreateArrow(),o.arrowHeight=o.arrowHeight||i.arrow.height(),i.arrow.css("top",o.wrapperHeight-o.arrowHeight).show(),s()):i.arrow&&(i.arrow.hide(),s()))},e.resizableStop=function(){if(o.canRun){if(o.showArrow?(o.formTabButtonHoverHeight=i.formTabButtonYList.find(".formTabButtonHover").outerHeight(!0),o.onePageNumForFormTabButton=r.getOnePageNumForFormTabButton(),o.pageNum=r.getPageNum(),o.wrapperHeight=a.setModuleNewHeight(),o.showArrow=!r.checkHeightEnough(),o.showArrow?(a.setPages(),a.bindArrow()):(i.arrow=i.arrow||i.formTabButtonYList.find(".J_tabYArrow"),i.arrow.remove(),c())):(i.arrow=i.arrow||i.formTabButtonYList.find(".J_tabYArrow"),i.arrow.remove(),c()),Fai.top.Site.isVueStyleGrayTest(o.moduleId))var t=Site.getModuleAttrPattern(o.moduleId).gpa||{};else t=Site.getModuleAttrPattern(o.moduleId).groupPageArrow||{};t.y=o.showArrow?1:0,t.bc=o.bgColor||"#fff",a.resetDataAndDom()}},e.resetPages=function(e){if(o.moduleId=e,i=t.extend(i,r.getBaseDom()),t.isEmptyObject(i))return a.resetDataAndDom();var n=i.formTabButtonYList.find(".J_tabYArrow");if(n.length&&(n.remove(),c()),Fai.top.Site.isVueStyleGrayTest(o.moduleId))var s=Site.getModuleAttrPattern(o.moduleId).gpa||{};else s=Site.getModuleAttrPattern(o.moduleId).groupPageArrow||{};s.y=0,a.resetDataAndDom()}}(jQuery,jzModule.TabModule.tabDirectionY||(jzModule.TabModule.tabDirectionY={data:{},dom:{},utils:{},event:{}}));var Nt=".tab_nav_item",Bt=function(){function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};Ct(this,t),this.module=e,this.$module=Fai.top.$("#module".concat(this.module.id)),this.init()}var e,n,o;return e=t,(n=[{key:"init",value:function(){this.bindEvents()}},{key:"bindEvents",value:function(){this.bindTabSortableEvent(".site_tabs_nav",Nt),this.bindTabHoverEditLayerEvent()}},{key:"swap",value:function(t,e,n){t.splice(n,0,t.splice(e,1)[0])}},{key:"isDirectionY",value:function(){return-1!==["left","right"].indexOf(this.$module.find(".J_site_tabs_nav").css("float"))}},{key:"bindTabSortableEvent",value:function(t,e){var n=this,o=0,i=0,r=this.$module.find(t);r.sortable("destroy").sortable({items:e,axis:"x",cancel:".J_tabPackContent",scroll:!1,scrollParent:document,start:function(t,i){$(i.item).is(e)&&(n.isDirectionY()&&r.sortable("option","axis","y"),$(i.item).css("transition","none"),o=r.find(e).index($(i.item)))},stop:function(t,a){$(a.item).is(e)&&($(a.item).css("transition",""),i=r.find(e).index($(a.item)),r.sortable("cancel"),Site.undoRun((function(t,o){n.swap(n.module.prop1,o,t),Vue.nextTick((function(){var n=r.find("".concat(e,":eq(").concat(t,")"));n.trigger("mouseenter"),n.trigger("click")}))}),{type:"module.tabBtn",detail:"tabBtnSortStop",doArgs:[i,o],undoArgs:[o,i]}),Fai.top.dragToAddModule||(Fai.top.originSortable=""),Site.getModuleAttrData(n.module.id).changed=!0,Fai.top._moduleMoved++,Site.styleChanged())}})}},{key:"bindTabHoverEditLayerEvent",value:function(){var t=this.$module,e=this.module.id;t.off("mouseenter.edit").on("mouseenter.edit",Nt,(function(){var n=t.find(Nt).index(this);Site.addEditLayer($(this),[{operationText:"编辑名称",className:"edit",evalScript:"Site.popupWindow({\n\t\t\t\t\t\ttitle: '编辑模块（标签模块)',\n\t\t\t\t\t\tframeSrcUrl: 'manage_v2/tabPackModuleEdit.jsp?id=".concat(e,"&colId=").concat(Fai.top._colId,"&extId=").concat(Fai.top._extId,"&ram=").concat(Math.random(),"&_editTabIndex=").concat(n,"',\t\n\t\t\t\t\t\twidth: 840,\n\t\t\t\t\t\theight: 652,\n\t\t\t\t\t\tsaveBeforePopup: false,\n\t\t\t\t\t\tversion: 2\n\t\t\t\t\t});\n\t\t\t\t")}],6,{extId:"i-".concat(n)})})).off("mouseleave.edit").on("mouseleave.edit",Nt,(function(){var e=t.find(Nt).index(this);Site.removeEditLayer($(this),"i-".concat(e))}))}}])&&Ot(e.prototype,n),o&&Ot(e,o),t}();function Ft(t){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Lt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,r=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(c)throw r}}}}function Lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function Dt(t,e,n,o,i,r,a){try{var c=t[r](a),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(o,i)}function Et(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var r=t.apply(e,n);function a(t){Dt(r,o,i,a,c,"next",t)}function c(t){Dt(r,o,i,a,c,"throw",t)}a(undefined)}))}}function Rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ht(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function zt(t,e){return(zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Yt(t);if(e){var i=Yt(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return Gt(this,n)}}function Gt(t,e){return!e||"object"!==Ft(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yt(t){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Jt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}(c,t);var e,n,o,i,r,a=Vt(c);function c(){return Rt(this,c),a.apply(this,arguments)}return e=c,n=[{key:"init",value:function(){if(!Fai.top._manageMode)switch(this.getStyle()){case 0:this.initDefaultTab();break;case 1:this.initFoldTab();break;case 2:this.initPictureTab()}}},{key:"initPictureTab",value:function(){return new Bt(this.module)}},{key:"initFoldTab",value:function(){this.bindTabEditLayer(),this.bindTabSortable(".m_foldtab",".tab_item")}},{key:"initDefaultTab",value:function(){this.bindTabEditLayer(),this.bindTabSortable(".title_list",".tab_title")}},{key:"getStyle",value:function(){return this.module.prop2}},{key:"isDirectionY",value:function(){return this.getFlag(4)}},{key:"getTabItemList",value:function(){return this.module.prop1}},{key:"getDefaultPicturePath",value:function(){var t=this.getTabItemList().length%2+1;return"".concat(Fai.top._resRoot).concat("/image/v2/pictureTabDefaultImage").concat(t,".jpg")}},{key:"addTabItem",value:(r=Et(regeneratorRuntime.mark((function s(){var t,e,n,o,i,r,a,c,u,l,d,f,p,m=arguments;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=m.length>0&&m[0]!==undefined?m[0]:{},e=t.index,n=t.title,o=t.picturePath,i=t.pictureId,r=t.addModule,a=void 0===r||r,c=this.getTabItemList().length,n=n||"标签".concat(c+1),!o&&(o=this.getDefaultPicturePath()),u={id:c,t:n,h:200,ml:[],pp:o,pid:i},this.getTabItemList().splice(e,0,u),s.next=9,Vue.nextTick();case 9:return l=this.$module.find(".".concat(this.config.tabNavItemClass,":eq(").concat(e,")")),d=this.$module.find(".".concat(this.config.tabPaneItemClass,":eq(").concat(e,")")),f=this.$module.find(".".concat(this.config.tabPaneClass)),p=d.find(".J_tabPackContent"),_elemZone.initOne(d),Site.EmptyOper.refresh(this.$module),d.find(".J_tabPackContent").height(f.height()),this.isAutoHeight()&&Site.autoModuleHeight(this.moduleId),l.trigger("mouseenter"),l.trigger("click"),this.resetTabItemAnimation(),Site.getModuleAttrData(this.moduleId).changed=!0,Site.styleChanged(),a&&Site.logDog(201097,3),s.abrupt("return",p);case 24:case"end":return s.stop()}}),s,this)}))),function(){return r.apply(this,arguments)})},{key:"editItemName",value:function(t,e){var n=this.getTabItemList()[t];e&&n&&/^标签\d+$/.test(n.t)&&(n.t=e)}},{key:"customHeightChanged",value:function(){Site.removeMoveFrame("module"+this.moduleId),Site.dockModuleResize(this.$module)}},{key:"resetTabItemAnimation",value:function(){var t=Site.getModuleAttrAnimation(this.moduleId).list[0];if(t&&0!=t.t){var e=t.t,n=t.r,o=t.s,i=t.d,r=t.c,a={id:this.moduleId,type:e,direction:n,speed:o,delay:i,count:r};this.$module.find(".tab_anim").css("animation","none"),setTimeout((function(){jzUtils.run({name:"moduleAnimation.playAnimation",base:Site},a)}),1)}}},{key:"bindTabSortable",value:function(t,e){var n=this,o=0,i=0,r=this.$module.find(t);r.sortable("destroy").sortable({items:e,axis:"y",cancel:".J_tabPackContent",scroll:!1,scrollParent:document,start:function(t,i){$(i.item).is(e)&&(0==n.getStyle()?r.sortable("option","axis",n.isDirectionY()?"y":"x"):1==n.getStyle()&&r.sortable("option","axis","y"),$(i.item).css("transition","none"),o=$(i.item).parent().children(e).index($(i.item)))},stop:function(t,a){$(a.item).is(e)&&($(a.item).css("transition",""),i=$(a.item).parent().children(e).index($(a.item)),r.sortable("cancel"),Site.undoRun((function(t,o){var i=n.getTabItemList().splice(o,1)[0];n.getTabItemList().splice(t,0,i),Vue.nextTick((function(){r.find("".concat(e,":eq(").concat(t,")")).click()}))}),{type:"module.tabBtn",detail:"tabBtnSortStop",doArgs:[i,o],undoArgs:[o,i]}),Fai.top.dragToAddModule||(Fai.top.originSortable=""),Site.getModuleAttrData(n.moduleId).changed=!0,Fai.top._moduleMoved++,Site.styleChanged())}})}},{key:"bindTabEditLayer",value:function(){var t=this.$module,e=this.moduleId;t.off("mouseenter.edit").on("mouseenter.edit",".tab_title",(function(){var n=t.find(".tab_title").index(this);Site.addEditLayer($(this),[{operationText:"编辑名称",className:"edit",evalScript:"Site.popupWindow({title: '编辑模块（标签模块）', frameSrcUrl: 'manage_v2/tabPackModuleEdit.jsp?id="+e+"&colId=' + Fai.top._colId + '&extId=' + Fai.top._extId + '&ram=' + Math.random() + '&_editTabIndex="+n+"', width: '840', height: '652', saveBeforePopup: false,version: 2});"}],6,{extId:"i-".concat(n)})})).off("mouseleave.edit").on("mouseleave.edit",".tab_title",(function(){var e=t.find(".tab_title").index(this);Site.removeEditLayer($(this),"i-".concat(e))}))}},{key:"bindContentResizable",value:function(){var t=this.$module;t.find(".J_tabPackContent").each((function(){var e=$(this);e.resizable({autoHide:!0,zIndex:9031,helper:"jz_resizable_helper",handles:"s",create:function(){Site.resizeModule.customHandles(e)},stop:function(){var e=t.resizable("option");e&&e.stop&&e.stop.apply(t[0])}})}))}},{key:"refreshTabList",value:function(t,e){var n=this;t=$.extend(!0,[],t);var o=$("#hiddenModuleForms");this.$module.find(".form").appendTo(o),t.forEach((function(t,e){return t.id=e})),this.module.prop1=t,Vue.nextTick((function(){var i=n.$module.find(".J_tabPackContent");t.forEach((function(t,e){var n=i.eq(e);t.ml.forEach((function(t){o.find("#module".concat(t.i)).appendTo(n)}))})),e()}))}},{key:"copyItem",value:(i=Et(regeneratorRuntime.mark((function u(t){var e,n,o,i,r,a;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=this.getTabItemList()[t]){c.next=3;break}return c.abrupt("return");case 3:return n=this.checkCopyItemTitle(e.t),o=this.getTabItemList().length,c.next=7,this.addTabItem({index:o,title:n,addModule:!1,pictureId:e.pid,picturePath:e.pp});case 7:i=c.sent,r=this.isPictureTab?"J_tab_pane_item":"tab_item",(a=Array.from(this.$module.find(".".concat(r,":eq(").concat(t,")")).find(".form")).map((function(t){return+$(t).attr("_moduleid")}))).length>0&&(i.find(".J_emptyOper").hide(),Site.copyAllModule(a,undefined,undefined,undefined,i.attr("id")));case 11:case"end":return c.stop()}}),u,this)}))),function(t){return i.apply(this,arguments)})},{key:"checkCopyItemTitle",value:function(t){var e,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,o=n>0?"（"+n+"）":"",i=t+o,r=jt(this.getTabItemList());try{for(r.s();!(e=r.n()).done;){var a=e.value;a.t==i&&(i=this.checkCopyItemTitle(t,n+1))}}catch(c){r.e(c)}finally{r.f()}return i}},{key:"config",get:function(){var t=this.getStyle();return{tabNavClass:["title_list","m_foldtab","J_site_tabs_nav"][t],tabNavItemClass:["tab_title","tab_item","J_tab_nav_item"][t],tabPaneClass:["formTabContent","tab_content","J_site_tabs_pane"][t],tabPaneItemClass:["tab_item","tab_content","J_tab_pane_item"][t]}}},{key:"isPictureTab",get:function(){return 2===this.getStyle()}}],o=[{key:"addNewModuleCallBack",value:function(t,e,n,o){var i=2===(c.find(e)&&c.find(e).module).prop2,r=Site.getModuleAttrPattern(e);if(r.changed=!0,Fai.top.Site.isVueStyleGrayTest(e)||i?(r.e=1,Site.setModuleStyleCss(e,".formBanner"+e,"display","none"),r.d.y=1,Site.hideModuleBorder(e),r.i.y=0):(r.bannerType=1,Site.setModuleStyleCss(e,".formBanner"+e,"display","none"),r.border.y=1,Site.hideModuleBorder(e),r.inner.y=0),t.reverse(),t.length>0){var a=t[0];Site.addModule(a,n,o,{callback:null,parentId:"formTabContent"+e,callbackforTab:jzModule.TabManageModule.addModuleCallBackForTab,allCheckList:t,iCount:t.length-1})}Site.setModuleHeight(e,200)}},{key:"shouldUseCopyItem",value:function(t,e){if(!$("#module"+t).hasClass("formStyle110"))return!1;var n=e.originalEvent.path,o=!1,i=!1;return n&&n.length&&(i=n.some((function(t){return $(t).hasClass("J_tabItemContextMenuTrigger")}))),i&&(o=!0),o}},{key:"getCopyItemOptions",value:function(t,e){var n=$("#module"+t),o=c.find(t);if(!n.hasClass("formStyle110"))return{};var i=o.config.tabNavItemClass,r=o.config.tabPaneItemClass,a=$(e.originalEvent&&e.originalEvent.target),s=a.hasClass(i)?a:a.parents(".".concat(i)),u=a.hasClass(r)?a:a.parents(".".concat(r));return s.length>0?n.find(".".concat(i)).index(s):n.find(".".concat(r)).index(u)}},{key:"copyItem",value:function(t,e){var n=c.find(t);if(n&&n.copyItem)return n.copyItem(e)}}],n&&Ht(e.prototype,n),o&&Ht(e,o),c}(lt);function qt(t){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t){return function(t){if(Array.isArray(t))return Wt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Wt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function Zt(t,e,n,o,i,r,a){try{var c=t[r](a),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(o,i)}function Xt(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var r=t.apply(e,n);function a(t){Zt(r,o,i,a,c,"next",t)}function c(t){Zt(r,o,i,a,c,"throw",t)}a(undefined)}))}}function Kt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function te(t,e){return(te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=oe(t);if(e){var i=oe(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return ne(this,n)}}function ne(t,e){return!e||"object"!==qt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function oe(t){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t,e,n){var o=e.data,i=e.dom,r=e.utils,a=e.event;function c(){var e=i.formTabButton;e.each((function(){var e,n=t(this);e=n.data("tabYPage"),n.removeClass("tabYPage"+e).removeData("tabYPage").show()})),e.eq(0).hasClass("formTabButtonHover")||e.eq(0).click()}function s(){o.formTabButtonHoverHeight=o.formTabButtonHoverHeight||i.formTabButtonYList.find(".formTabButtonHover").outerHeight(!0),o.formTabButtonLength=o.formTabButtonLength||i.formTabButton.length,o.onePageNumForFormTabButton=r.getOnePageNumForFormTabButton(),o.pageNum=r.getPageNum(),c(),a.setPages()}e.resizableStart=function(e){if(o.moduleId=e,i=t.extend(i,r.getBaseDom()),t.isEmptyObject(i))return a.resetDataAndDom();o.canRun=!0,c(),o.formTabButtonHeight=i.formTabButton.not(".formTabButtonHover").outerHeight(!0),o.formTabButtonLength=i.formTabButton.length,o.allFormTabButtonHeight=r.getAllFormTabButtonHeight(),o.pageNum=1},e.resizableResize=function(t){var e,n,c,u,l;o.canRun&&(o.wrapperHeight=t,o.showArrow=!r.checkHeightEnough(),o.showArrow?(o.bgColor=o.bgColor||(e=o.moduleId,n=i.module,c=Site.getModuleAttrPattern(e)||{},u=(Fai.top.Site.isVueStyleGrayTest(e)?c.gb:c.groupBg)||{},2==(l=u.y||0)?u.c||"#fff":1==l?"transparent":0==l?n.find(".formTabDirectionY .titleTable").css("background-color"):"fff"),i.arrow=i.arrow||a.findOrCreateArrow(),o.arrowHeight=o.arrowHeight||i.arrow.height(),i.arrow.css("top",o.wrapperHeight-o.arrowHeight).show(),s()):i.arrow&&(i.arrow.hide(),s()))},e.resizableStop=function(){if(o.canRun){if(o.showArrow?(o.formTabButtonHoverHeight=i.formTabButtonYList.find(".formTabButtonHover").outerHeight(!0),o.onePageNumForFormTabButton=r.getOnePageNumForFormTabButton(),o.pageNum=r.getPageNum(),o.wrapperHeight=a.setModuleNewHeight(),o.showArrow=!r.checkHeightEnough(),o.showArrow?(a.setPages(),a.bindArrow()):(i.arrow=i.arrow||i.formTabButtonYList.find(".J_tabYArrow"),i.arrow.remove(),c())):(i.arrow=i.arrow||i.formTabButtonYList.find(".J_tabYArrow"),i.arrow.remove(),c()),Fai.top.Site.isVueStyleGrayTest(o.moduleId))var t=Site.getModuleAttrPattern(o.moduleId).gpa||{};else t=Site.getModuleAttrPattern(o.moduleId).groupPageArrow||{};t.y=o.showArrow?1:0,t.bc=o.bgColor||"#fff",a.resetDataAndDom()}},e.resetPages=function(e){if(o.moduleId=e,i=t.extend(i,r.getBaseDom()),t.isEmptyObject(i))return a.resetDataAndDom();var n=i.formTabButtonYList.find(".J_tabYArrow");if(n.length&&(n.remove(),c()),Fai.top.Site.isVueStyleGrayTest(o.moduleId))var s=Site.getModuleAttrPattern(o.moduleId).gpa||{};else s=Site.getModuleAttrPattern(o.moduleId).groupPageArrow||{};s.y=0,a.resetDataAndDom()}}(jQuery,jzModule.TabPackModule.tabDirectionY||(jzModule.TabPackModule.tabDirectionY={data:{},dom:{},utils:{},event:{}}));var ie=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&te(t,e)}(s,t);var e,n,o,i,r,a,c=ee(s);function s(){return Kt(this,s),c.apply(this,arguments)}return e=s,(n=[{key:"init",value:function(){this.initHoverSubModule(),this.bindFixToolBarInSelectableMode(),this.fixAccordionItemData(),this.isInSelectableMode=!1,this.hoverAccordionItemId=null}},{key:"bindFixToolBarInSelectableMode",value:function(){var t=this;Site.bindGobalEvent("toggleSelectableMode",(function(e,n){n?(t.isInSelectableMode=!0,t.hoverAccordionItemId&&(t.tempHoverAccordionItemId=t.hoverAccordionItemId),t.onAccordionItemMouseleave(t.hoverAccordionItemId)):(t.isInSelectableMode=!1,t.tempHoverAccordionItemId&&t.onAccordionItemMouseenter(t.tempHoverAccordionItemId))}))}},{key:"initHoverSubModule",value:function(){var t=this;this.$el.off("mouseenter.hoverSubModule").on("mouseenter.hoverSubModule",".form",(function(e){if(!e.isTrigger){var n=$(e.target);t.moveOnSubModule=!0;var o=Number(n.parents(".accordion_item").attr("id").replace("accordion_item_",""));t.onAccordionItemMouseleave(o)}})).off("mouseleave.hoverSubModule").on("mouseleave.hoverSubModule",".form",(function(e){if(!e.isTrigger){var n=$(e.target);t.moveOnSubModule=!1;var o=Number(n.parents(".accordion_item").attr("id").replace("accordion_item_",""));t.onAccordionItemMouseenter(o)}}))}},{key:"addNewAccordionItemById",value:function(t){var e=this.accordionList.findIndex((function(e){return e.id==t}));this.addNewAccordionItem(e+1)}},{key:"setDefaultExpandItem",value:function(t){Site.Message.success("设置默认展开列成功，点击保存后生效"),this.module.prop2=t}},{key:"createNewAccordionPattern",value:function(t){return{id:t,cb:{c:"#fff",f:"",p:"",r:0,y:0},eb:{c:"#fff",f:"",p:"",r:0,y:0}}}},{key:"addNewAccordionItem",value:(a=Xt(regeneratorRuntime.mark((function u(t){var e,n,o,i,r=this;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(this.accordionList.length!=this.module.accordionItemMaxLength){a.next=3;break}return Site.Message.warning("最多不超过6个列"),a.abrupt("return");case 3:return e=Math.max.apply(Math,Ut(this.accordionList.map((function(t){return t.id})))),o={id:n=e+1,cd:{ml:[]},ed:{ml:[]}},i=this.createNewAccordionPattern(n),this.accordionList.splice(t,0,o),this.accordionPatternList.push(i),this.module.editingIndex=t,a.next=12,Fai.top.Vue.nextTick();case 12:return this.isToggle=!0,this.$el.find("#accordion_item_".concat(e)).one("transitionend",(function(){r.isToggle=!1,r.onAccordionItemMouseenter(n)})),Fai.top._elemZone.initOne(this.$el),Site.EmptyOper.refresh(this.$el),a.abrupt("return",n);case 17:case"end":return a.stop()}}),u,this)}))),function(t){return a.apply(this,arguments)})},{key:"copyAccordionItem",value:(r=Xt(regeneratorRuntime.mark((function l(t){var e,n,o,i,r,a,c,s,u,d,f,p;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return e=this.accordionList[t],l.next=3,this.addNewAccordionItem(t+1);case 3:for(n=l.sent,o=this.accordionPatternList.find((function(t){return t.id==e.id})),(i=JSON.parse(JSON.stringify(o))).id=n,r=this.accordionPatternList.findIndex((function(t){return t.id==n})),this.accordionPatternList.splice(r,1,i),a=[{origin:"accordionPackContent".concat(this.module.id,"-").concat(e.id,"-collapse"),target:"accordionPackContent".concat(this.module.id,"-").concat(n,"-collapse")},{origin:"accordionPackContent".concat(this.module.id,"-").concat(e.id,"-expand"),target:"accordionPackContent".concat(this.module.id,"-").concat(n,"-expand")}],c=[],s=0,u=a;s<u.length;s++)d=u[s],f=$("#".concat(d.origin)),(p=Array.from(f.find(".form")).map((function(t){return Number($(t).attr("_moduleid"))})).filter((function(t){return!isNaN(t)}))).length>0&&(f.find(".J_emptyOper").hide(),c.push(Site.copyAllModule(p,undefined,undefined,undefined,d.target,undefined,!0)));Site.Message.warning({message:"正在复制中",duration:0}),Promise.all(c).then((function(){Site.Message.success("复制成功")}))["catch"]((function(t){Site.Message.error({message:"复制失败",duration:0})})),this.module.activeIndex>=t&&(this.module.activeIndex+=1);case 15:case"end":return l.stop()}}),l,this)}))),function(t){return r.apply(this,arguments)})},{key:"removeAccordionItem",value:function(t){var e=this;if(this.accordionList.length!=this.module.accordionItemMinLength){var n=this.accordionList.findIndex((function(e){return e.id==t})),o=this.accordionPatternList.findIndex((function(e){return e.id==t}));this.accordionList.splice(n,1),this.accordionPatternList.splice(o,1);var i=n;n>this.accordionList.length-1&&(i=this.accordionList.length-1),n==this.module.editingIndex?this.module.editingIndex=i:n<this.module.editingIndex&&this.module.editingIndex--,n==this.module.activeIndex?this.module.activeIndex=i:n<this.module.activeIndex&&this.module.activeIndex--,t==this.defaultExpandItemId&&(this.module.prop2=this.accordionList[i].id);var r=this.$el.find("#accordion_item_".concat(t," .form"));Array.from(r).map((function(t){return Number($(t).attr("_moduleid"))})).filter((function(t){return!isNaN(t)})).forEach((function(t){return Site.hideModule(t,!0,undefined,undefined,undefined,!0)})),this.onAccordionItemMouseleave(t),this.isToggle=!0,setTimeout((function(){e.isToggle=!1}),300)}else Site.Message.warning("最少保留2个列")}},{key:"getNearAccordionItem",value:function(t){var e=-1;return e=t>=this.accordionList.length-1?t-1:t+1,{id:this.accordionList[e].id,index:e}}},{key:"toggleAccordionItemStatus",value:(i=Xt(regeneratorRuntime.mark((function d(t,e){var n,o,i,r,a,c=this,s=arguments;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(n=s.length>2&&s[2]!==undefined&&s[2],o=this.accordionList.findIndex((function(e){return e.id==t})),i=this.module.activeIndex==o,e!==i){u.next=5;break}return u.abrupt("return");case 5:return i?(r=this.getNearAccordionItem(o),a=r.index,this.module.activeIndex=a):this.module.activeIndex=o,this.onAccordionItemMouseleave(t),this.isToggle=!0,u.next=10,Fai.top.Vue.nextTick();case 10:setTimeout((function(){c.isToggle=!1,Fai.top.jzModule.AccordionPackModule.triggerModuleAnimation(),!n&&c.onAccordionItemMouseenter(t)}),300);case 11:case"end":return u.stop()}}),d,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"openEditPanel",value:function(t){var e={entrance:0,id:this.module.id,styleId:117,titleMainName:"手风琴",accordionItemId:t};Fai.top.Site.editPanel.show(e)}},{key:"onAccordionItemMouseenter",value:function(t){var e=this;if(!(this.isToggle||this.isInSelectableMode||this.draging())){var n=this.accordionList.findIndex((function(e){return e.id==t}))==this.module.activeIndex,o=this.defaultExpandItemId==t,i={$element:this.$el.find("#accordion_item_".concat(t)),toolList:[{type:"text",text:"设置样式",onclick:function(){Site.logDog(201454,2),e.openEditPanel(t)}},{type:"icon",icon:"tool_add",tooltipsText:"新增一列",onclick:function(){Site.logDog(201454,3),e.addNewAccordionItemById(t)}},{type:"icon",icon:o?"tool_expand_active":"tool_expand",disableTooltips:!1,tooltipsText:"设置为默认展开",onclick:function(){Site.logDog(201454,4),e.setDefaultExpandItem(t)}},{type:"icon",icon:"tool_remove",tooltipsText:"删除列",onclick:function(){Site.logDog(201454,5),e.removeAccordionItem(t)}}],moveinToolbar:function(){e.triggerMouseenterForItem(t)},moveoutToolbar:function(){e.triggerMouseoutForItem(t)}};this.hoverAccordionItemId!==t&&Fai.top.jzManage.toolbar.base.show(i);var r={$element:this.$el.find("#accordion_item_".concat(t)),toolList:[{text:"初始",active:!n,onclick:function(){Site.logDog(201454,0),e.toggleAccordionItemStatus(t,!1)}},{text:"悬停",active:n,onclick:function(){Site.logDog(201454,1),e.toggleAccordionItemStatus(t,!0)}}],moveinToolbar:function(){e.triggerMouseenterForItem(t)},moveoutToolbar:function(){e.triggerMouseoutForItem(t)}};this.hoverAccordionItemId!==t&&Fai.top.jzManage.toolbar.side.show(r),this.showBorderLine(t),this.hoverAccordionItemId=t}}},{key:"draging",value:function(){return!!document.querySelector(".moduleSortableHelperWrap")}},{key:"showFirstAddTips",value:function(){var t=this;if(((this.module.pattern.acp||{}).al||[]).forEach((function(t){Fai.top.Vue.set(t.cb,"r",30),Fai.top.Vue.set(t.eb,"r",30)})),!this.module.isAddedAccordionPack){var e='\n\t\t\t<div class="accordion_first_add_tip_wrap">\n\t\t\t\t<div class="accordion_first_add_tip">\n\t\t\t\t\t<img class="accordion_tip_img" src="'.concat(Fai.top._resImageRoot,'/image/v2/accordionPackTips.gif?v=202005141717">\n\t\t\t\t\t<div class="accordion_tip_text">可编辑多列，且悬停有展开效果。编辑保存后，预览可查看效果</div>\n\t\t\t\t\t<div class="accordion_tip_get">我知道了</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t');$(e).appendTo(this.$el),this.$el.find(".accordion_tip_get").on("click",(function(){t.$el.find(".accordion_first_add_tip_wrap").fadeOut((function(){$(this).remove()})),Fai.top._isLoginO||$.ajax({url:Site.addRequestPrefix({newPath:"/ajax",oldPath:"ajax"})+"/module_h.jsp?cmd=setWafCk_updateFirstAddAccordionPackFlag"})})),this.$el.find(".accordion_first_add_tip_wrap").on("dblclick",(function(t){t.stopPropagation()})),this.triggerMouseenterForItem(this.accordionList[0].id)}}},{key:"triggerMouseenterForItem",value:function(t){var e=new Event("mouseenter"),n=this.$el.find("#accordion_item_".concat(t))[0];n&&n.dispatchEvent(e)}},{key:"triggerMouseoutForItem",value:function(t){var e=new Event("mouseleave"),n=this.$el.find("#accordion_item_".concat(t))[0];n&&n.dispatchEvent(e)}},{key:"onAccordionItemMouseleave",value:function(t){Fai.top.jzManage.toolbar.base.hide(),Fai.top.jzManage.toolbar.side.hide(),this.hideBorderLine(t),this.hoverAccordionItemId=null}},{key:"initBorderLine",value:function(t){var e=this.$el.find("#accordion_item_".concat(t));["top","right","left","bottom"].forEach((function(t){$('<div class="accordion_line accordion_line_'.concat(t,'"></div>')).appendTo(e)}))}},{key:"showBorderLine",value:function(t){var e=this.$el.find("#accordion_item_".concat(t)),n=".".concat(e.hasClass("accordion_item_active")?"accordion_item_expand":"accordion_item_collapse"," .c_empty_oper");0==e.find(n).length&&$(e).find(".accordion_line").show()}},{key:"hideBorderLine",value:function(t){this.$el.find("#accordion_item_".concat(t)).find(".accordion_line").hide()}},{key:"fixAccordionItemData",value:function(){var t=this,e=this.module.prop1,n=this.pattern.acp.al;e.length!==n.length&&e.forEach((function(e){var o=e.id;n.find((function(t){return t.id===o}))||n.push(t.createNewAccordionPattern(o))}))}},{key:"accordionList",get:function(){return this.module.prop1}},{key:"accordionPattern",get:function(){return this.module.pattern.acp||{}}},{key:"defaultExpandItemId",get:function(){return this.module.prop2}},{key:"accordionPatternList",get:function(){return this.accordionPattern.al||[]}}])&&Qt(e.prototype,n),o&&Qt(e,o),s}(lt);function re(t){switch(t.style){case 32:return t.isVue?bt:lt;case 29:return t.isVue?At:lt;case 110:return t.isVue?Jt:lt;case 117:return ie}return lt}var ae={},ce="formLockEdit",se="J_lockEditTip",ue="J_lock_icon",le="jz_module_locked",de="form",fe="formContainerLock";function pe(t,e){moduleAttr["module"+t]&&moduleAttr["module"+t].commProp&&(moduleAttr["module"+t].commProp.lock=e,moduleAttr["module"+t].commProp.changed=!0,Site.styleChanged())}function me(t){var e="#module"+t,n=Fai.top.$(e);return{$el:n,moduleStr:"module"+t,moduleStatus:jzModule.utils.getModuleStatus(t),nestInfo:Site.checkNestModule(n)}}function he(t){t.children(".".concat(se)).hide()}function ge(t,e){["Top","Bottom","Right","Left"].forEach((function(n){Fai.top.$("#module".concat(t,"moveFrame").concat(n)).css("border-color",e)}))}function ve(t){var e=me(t),n=e.$el,o=e.moduleStatus,i=e.nestInfo;return function(t,e){e.isPack||e.isFullmeasurePack||e.isTabPack?t.addClass(fe):t.addClass("".concat(ce," ").concat(le)),t.draggable("destroy")}(n,i),function(t,e,n){n.inPack?(t.resizable("destroy"),t.children(".ui-resizable-cancelTip").remove(),jzUtils.run({name:"_elemZone.packChildrenDisableResizable",base:Fai.top},t)):1===e?Site.dockModuleResize_disable(t):(t.resizable("destroy"),t.children(".ui-resizable-cancelTip").remove())}(n,o,i),i.isPack&&function(t){jzUtils.run({name:"_elemZone.destroySelectToolOneZone",base:Fai.top},t)}(n),function(t){if(t.children(".".concat(se)).length>0)t.children(".".concat(se)).show();else{var e="\n\t\t<span class='".concat(se," fk-setEditTip fk-lockEditTip' _faiscotip='锁定状态, 再点击可解锁'></span>\n\t");t.append(e),t.children(".J_oper_btn_wrap").find(".".concat(ue)).hide()}}(n),function(t){ge(t,"#c00000")}(t),this}function be(t){var e=me(t),n=e.$el,o=e.moduleStatus,i=e.nestInfo;return function(t,e,n){if(t.removeClass("".concat(ce," ").concat(fe," ").concat(le)).children(se).addClass("fk-openEditTip").removeClass("fk-lockEditTip"),n.inPack||1===e||Site.floatModuleDraggable(t),n.inPack||n.inFullmeasurePack||n.inTabPack){var o=t.parents(".".concat(fe)).eq(0);o.hasClass(ce)&&o.removeClass(ce)}}(n,o,i),function(t,e,n){n.inPack?jzUtils.run({name:"_elemZone.resizeZoneOneModule",base:Fai.top},t):1===e&&Site.dockModuleResize(t),n.isPack&&jzUtils.run({name:"_elemZone.resizeOneZoneModule",base:Fai.top},t)}(n,o,i),i.isPack&&function(t){jzUtils.run({name:"_elemZone.selectToolOneZone",base:Fai.top},t)}(n),he(n),function(t){ge(t,"#5874d8")}(t),this}function ye(t,e){var n=this,o=me(t),i=o.$el;o.nestInfo.nest&&$.each(i.find(".form"),(function(t,o){var i=Number($(o).attr("_moduleid"));"function"==typeof e&&e.call(n,isNaN(i)?-1:i)}))}function we(t){return"function"!=typeof t&&(t=function(t){return t}),Object.keys(moduleAttr).filter(t).map((function(t){return t.substring("module".length)})).map((function(t){return parseInt(t,10)}))}function Se(t){Fai.top.Site.undoRun((function(){}),{type:"lock",detail:"lock",undoSame:!1,redoSame:!1,undoFn:jzModule.ManageModule.unlockModule.bind(jzModule.ManageModule),redoFn:jzModule.ManageModule.lockModule.bind(jzModule.ManageModule),undoArgs:[t],redoArgs:[t]})}function ke(t){Fai.top.Site.undoRun((function(){}),{type:"unlock",detail:"unlock",undoSame:!1,redoSame:!1,undoFn:jzModule.ManageModule.lockModule.bind(jzModule.ManageModule),redoFn:jzModule.ManageModule.unlockModule.bind(jzModule.ManageModule),undoArgs:[t],redoArgs:[t]})}ae.isLock=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";try{var e="";if("number"!=typeof t&&Number.isNaN(Number(t))){if("string"!=typeof t||!/^module\d+/.test(t))return!1;e=t}else e="module"+t;return 1===moduleAttr[e].commProp.lock}catch(n){return!1}},ae.lockModule=function(t){var e=this,n=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];this.isLock(t)||pe(t,1),ve(t),ye(t,(function(t){!e.isLock(t)&&e.lockModule(t)})),n&&Se(t)},ae.unlockModule=function(t){var e=this,n=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];pe(t,0),be(t),ye(t,(function(t){e.isLock(t)&&e.unlockModule(t)})),n&&ke(t)},ae.lockModules=function(){var t=this,e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return e.forEach((function(e){return t.lockModule(e,!1)})),this},ae.unlockModules=function(){var t=this,e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return e.forEach((function(e){return t.unlockModule(e,!1)})),this},ae.hideLockIcons=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return t.forEach((function(t){return he(me(t).$el)})),this},ae.initLockModules=function(){var t=we((function(t){try{return 1===moduleAttr[t].commProp.lock}catch(e){return!1}}));t.forEach(ve),this.hideLockIcons(t),Fai.top.$(document).on("click.lock",".".concat(se),(function(t){t.stopPropagation();var e=$(t.target).parents(".".concat(de)).eq(0);if(e){var n=parseInt(e.attr("_moduleId"),10);ae.unlockModule(n)}})),Fai.top.$(document).on("click.lock",".".concat(ue),(function(t){t.stopPropagation();var e=$(t.target).parents(".".concat(de)).eq(0);if(e){var n=parseInt(e.attr("_moduleId"),10);ae.lockModule(n)}}))},ae.unlockAllModules=function(){var t;t=we(),_Global.isAllLock=!1,ae.unlockModules(t)},ae.lockAllModules=function(){var t;t=we(),_Global.isAllLock=!0,ae.lockModules(t),ae.hideLockIcons(t)};var Te=ae;function _e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Ie(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_e(Object(n),!0).forEach((function(e){xe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function xe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Me="_lock",Pe={enumerable:!1,configurable:!1};function $e(t){!function(t,e,n){var o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};Object.defineProperty(t,e,Ie(Ie(Ie({},Pe),o),{},{value:n}))}(t,Me,Te),function(t,e){var n=function(n){if(Object.prototype.hasOwnProperty.call(t[e],n)){if("undefined"!=typeof t[n])throw Error("[init.js proxy]：对象".concat(t,"已经存在[").concat(n,"]属性，请检查属性是否冲突"));Object.defineProperty(t,n,Ie(Ie({},Pe),{},{get:function(){return this[e][n]},set:function(t){this[e][n]=t}}))}};for(var o in t[e])n(o)}(t,Me)}function Ae(t,e,n,o,i,r,a){try{var c=t[r](a),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(o,i)}function Ce(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Oe=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.DB_NAME="jzSiteFont",this.DB_VERSION=1,this.FONT_FILE_SOTRE_NAME="fontFile",this.STORE_LIST=[{name:this.FONT_FILE_SOTRE_NAME,options:{keyPath:"fontId",autoIncrement:!1},indexs:[{key:"fontName",unique:!0},{key:"file",unique:!0}]}],this.db=null,this.fontList=[],this._opened=!1,this._getFontListDone=!1,this.getFontListPromise=this._openDb()}var e,n,o;return e=t,o=[{key:"isSupport",value:function(){return"undefined"!=typeof window.indexedDB}}],(n=[{key:"isSupport",value:function(){return t.isSupport()}},{key:"getObjectStore",value:function(t,e){return this.db.transaction(t,e).objectStore(t)}},{key:"checkOpened",value:function(){return this._opened}},{key:"checkGetFontListDone",value:function(){return this._getFontListDone}},{key:"_openDb",value:function(){var t=this;return new Promise((function(e,n){if(t.isSupport()){var o=window.indexedDB.open(t.DB_NAME,t.DB_VERSION);o.onsuccess=function(n){t.db=n.target.result,t._opened=!0,t.getAllFont().then((function(){t._getFontListDone=!0,e(t.db)}))},o.onerror=function(e){t.db=null},o.onupgradeneeded=function(e){var n=e.target.result;t.STORE_LIST.forEach((function(t){var e=t.name,o=t.options,i=t.indexs;if(!n.objectStoreNames.contains(e)){var r=n.createObjectStore(e,o);i.forEach((function(t){r.createIndex(t.key,t.key,{unique:t.unique||!0})}))}}))}}else n("该浏览器不支持indexedDb")}))}},{key:"addFont",value:function(t,e,n){var o=this;return new Promise(function(){var i,r=(i=regeneratorRuntime.mark((function a(i,r){var c,s,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o.checkOpened()){a.next=3;break}return r("请先开启数据库"),a.abrupt("return");case 3:if(t&&e&&n){a.next=6;break}return r("参数错误"),a.abrupt("return");case 6:if(c={fontId:t,fontName:e,arrayBuffer:n,version:o.DB_VERSION},!o.fontList.some((function(e){return e.fontId==t}))){a.next=10;break}return a.next=10,o.deleteFont(t);case 10:s=o.getObjectStore(o.FONT_FILE_SOTRE_NAME,"readwrite"),(u=s.add(c)).onsuccess=function(){o.fontList.push(c),i()},u.onerror=function(t){r("addFont err => , ".concat(JSON.stringify(t)))};case 14:case"end":return a.stop()}}),a)})),function(){var t=this,e=arguments;return new Promise((function(n,o){var r=i.apply(t,e);function a(t){Ae(r,n,o,a,c,"next",t)}function c(t){Ae(r,n,o,a,c,"throw",t)}a(undefined)}))});return function(t,e){return r.apply(this,arguments)}}())}},{key:"deleteFont",value:function(t){var e=this;return new Promise((function(n,o){if(e.checkOpened())if(t){var i=e.getObjectStore(e.FONT_FILE_SOTRE_NAME,"readwrite")["delete"](t);i.onsuccess=function(){n()},i.onerror=function(t){o("deleteFont err => , ".concat(JSON.stringify(t)))}}else o("参数错误");else o("请先开启数据库")}))}},{key:"getAllFont",value:function(){var t=this;return new Promise((function(e,n){if(t.checkOpened()){var o=t.getObjectStore(t.FONT_FILE_SOTRE_NAME,"readwrite").openCursor(),i=[];o.onsuccess=function(n){var o=n.target.result;o?(i.push(o.value),o["continue"]()):(t.fontList=i.slice(0),e(i))},o.onerror=function(t){n("getAllFont err => , ".concat(t))}}else n("请先开启数据库")}))}}])&&Ce(e.prototype,n),o&&Ce(e,o),t}();if("undefined"!=typeof window&&(window.FontIndexedDb=Oe),"undefined"!=typeof window){window.jzManage={initStore:s,auxiliaryTools:N,toolbar:tt},window.FontIndexedDb=Oe,$e(lt);var Ne=window.jzModule||(window.jzModule={});Ne.ManageModule=lt,Object.assign(Ne,r)}}})}));