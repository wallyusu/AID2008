function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function i(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(g){function v(t,c){var h=[];"undefined"!=typeof c.dataList&&null!==c.dataList||(c.dataList=[]),g.each(c.dataList,function(t,e){"undefined"==typeof e[c.primaryKey]&&(c.dataList[t][c.primaryKey]=c.tmp.maxPrimaryKey,c.tmp.maxPrimaryKey++)}),T(t,c);var e=c.dataList;0<c.tmp.searchMatcher.length&&(e=c.tmp.result),c.exportDataCallback&&c.exportDataCallback(c);var i=x(c,e);if(c.showDataBefore&&c.showDataBefore(i),0<i.length)g.each(i,function(t,d){d[c.primaryKey];var e="";c.tableRowsClass[d[c.primaryKey]]&&(e=' class="'+c.tableRowsClass[d[c.primaryKey]]+'"');var i=c.primaryKey+'="'+d[c.primaryKey]+'"';h.push("<tr "+i+e+">"),c.tableColumn.showCheckbox&&h.push('<td class="checkBoxWidth textCenter"><label class="faiTableCheckboxLabel"><input type="checkbox" value=""></label></td>'),g.each(c.tableColumn.columns,function(t,e){var i=e.key,o=d[i],a=e.rowClass,s="";s="undefined"!=typeof e.extData&&g.isFunction(e.extData)?e.extData(o,d):"undefined"==typeof e.encode||e.encode?Fai.encodeHtml(o):o,e.custom&&(s=e.customData),c.sortData.showSortBtn&&i==c.sortData.showColumnKey&&(s='<div class="sortPanel"><a class="up pointer"></a><a class="down pointer"></a></div>',a=void 0!==a?"sortWidth "+a:"sortWidth");var n="",r="padding ellipsis tdWrap";n=void 0!==a?a+" ellipsis":"defaultWidth ellipsis";var l="";e.onTitle&&(l=' title="'+Fai.encodeHtml(o)+'"',e.textArea&&(l=' title="'+Fai.encodeHtmlAttr(o)+'"')),e.textArea&&(r+=" textAreaWrap "),h.push('<td class="'+n+'"'+l+'><div class="'+r+'">'+s+"</div></td>")}),h.push("</tr>")});else{var o=k(t);h.push('<tr class="queryIngTr">'),h.push('<td class="padding" colspan="'+o+'">'+c.noDataMsg+"</td>"),h.push("</tr>")}t.find("div.center table:first>tbody").html(h.join("")),(Fai.isIE6()||Fai.isIE7())&&(a(t),g(window).resize(function(){a(t)})),c.itemHover&&s(t),n(t,c),(c.sortData.showSortBtn||c.sortData.sortable)&&l(t,c),c.sortData.showSortBtn&&(u(t),f(t,c)),c.sortData.sortable&&d(t,c),p(t),c.bottom.show&&c.bottom.showTotal&&y(t),c.bottom.show&&c.bottom.showAllTotal&&m(t,c.tmp.result),c.bottom.show&&c.bottom.showExtTotal&&b(t,c),c.bottom.show&&c.bottom.showPage&&P(t,c),_(t),w(t),E(t,c),c.showDataAfter&&c.showDataAfter()}function a(t){t.find("tr.fixIE6forFaiTable").remove();var e=t.width();if(0<t.find("table.faiTable").width()-e){var i=k(t),o=[];o.push('<tr class="fixIE6forFaiTable">'),o.push('<td colspan="'+i+'"></td>'),o.push("</tr>"),t.find("table.faiTable").append(o.join(""))}}function o(i,o,a,s,n){var t=[],e=i.find("div.center table:first>thead>tr>th").length;t.push('<tr class="queryIngTr">'),t.push('<td class="padding" colspan="'+e+'"><div class="ajaxLoading1 queryIng">数据加载中...</div></td>'),t.push("</tr>"),i.find("div.center table:first>tbody").html(t.join("")),g.ajax({type:o.ajax.type,data:o.ajax.data,url:o.ajax.url,error:function r(){i.find("div.center table:first>tbody td").html('<td colspan="'+e+'"><div class="ajaxLoading1 queryIng">数据加载失败...</div></td>')},success:function l(t){var e=g.parseJSON(g.trim(t));o.dataList=e,a&&s&&n&&o.dataList.sort(function(t,e){var i=Fai.compareObjNew(t,e,s,n);return 0==i&&"name"!=n&&(i=Fai.compareObjNew(t,e,"asc","name")),i}),v(i,o)}})}function s(t){t.find("div.center table:first>tbody>tr").hover(function(){g(this).addClass("hover")},function(){g(this).removeClass("hover")})}function n(t,o){var a,s,n=0,r=0,l=!1,d=o.expandMinWidth,c=d,h=t.find("div.center table:first>thead"),e=t.find("div.center table:first>thead th"),i=t.find("div.center table:first>thead").find("th.expand").find(".expandRightLine"),p=h.find("th.pointer");i.hover(function(){g(this).addClass("expanding")},function(){g(this).removeClass("expanding")}),i.mousedown(function(t){n=t.pageX,a=g(this).parents("th.expand"),g(this),r=a.width(),l=!0,h.addClass("changeCursor"),p.removeClass("pointer"),a.addClass("expanding"),s=a.attr("data-key"),g(o.tableColumn.columns).each(function(t,e){if(e.key==s)return c=e.expandMinWidth||d,!1;c=d}),e.mousemove(function(t){var e=0,i=0;l&&(h.onselectstart=function(){return!1},e=parseInt(t.pageX-n),i=parseInt(r+e),a.css({width:i<c?c+"px":i+"px"}))})}).mousemove(function(t){a=g(this).parents("th.expand"),s=a.attr("data-key"),g(o.tableColumn.columns).each(function(t,e){if(e.key==s)return c=e.expandMinWidth||d,!1;c=d});var e=0,i=0;l&&(h.onselectstart=function(){return!1},e=parseInt(t.pageX-n),i=parseInt(r+e),a.css({width:i<c?c+"px":i+"px"}))}),g(document).mouseup(function(t){l&&(l=!1,h.removeClass("changeCursor"),p.addClass("pointer"),""!=o.expandCookie&&g.cookie(o.expandCookie+a.attr("data-key"),a.width(),{expires:365,path:"/"}))})}function r(t,i){t.find("div.center table:first>thead>tr>th").each(function(t){if(g(this).attr("data-key")!=undefined){var e=parseInt(g.cookie(i.expandCookie+g(this).attr("data-key"),{path:"/"}))||0;0!=e&&g(this).css({width:e+"px"})}})}function l(t,e){t.find("div.center table:first>tbody>tr").each(function(){var t=parseInt(g(this).attr(e.primaryKey));-1!=g.inArray(t,e.sortData.unSortList)&&g(this).removeClass("move").addClass("unSort").find(".sortPanel").remove()})}function d(e,t){e.find("div.center table:first>tbody>tr").each(function(){g(this).hasClass("queryIngTr unSort")||g(this).addClass("move")}),e.sortable("destroy"),e.sortable({start:function i(){var t=k(e);g(".sortablePlaceholder").append('<td colspan="'+t+'"><div class="sortableHighlight"></div></td>')},axis:"y",placeholder:"sortablePlaceholder",items:"div.center table:first>tbody>tr:not(.unSort)",distance:3,cancel:".queryIngTr, input, .unSort",stop:function o(){p(e),u(e),t.sortData.sortBack&&t.sortData.sortBack(),c(e,t)}}),e.disableSelection()}function p(t){t.find("div.center table:first>tbody>tr").removeClass("even odd").each(function(t,e){t%2==0?g(this).addClass("odd"):g(this).addClass("even")})}function u(t){var e=t.find("div.center table:first>tbody>tr>td .sortPanel a.up"),i=t.find("div.center table:first>tbody>tr>td .sortPanel a.down");e.removeClass("disabled").first().addClass("disabled"),i.removeClass("disabled").last().addClass("disabled")}function c(t,o){var e=o.dataList,i=o.page.showCount,a=o.page.startPage,s=e.length,n=i*(a-1),r=i*a-1,l=t.find("div.center table:first>tbody>tr"),d=[],c=[];0==i&&(r=s-1,n=0),s<r&&(r=s-1);for(var h=n;h<=r;h++)d.push(e[h]);g.each(l,function(t,e){var i=g(e).attr(o.primaryKey);g.each(d,function(t,e){if(i==e[o.primaryKey])return c.push(e),!1})});for(var p=0,u=n;u<=r;u++)e[u]=c[p],p++;o.dataList=e}function f(e,i){e.find("div.center table:first>tbody>tr>td .sortPanel a").bind("click",function(){var t=g(this).parents("tr");g(this).hasClass("up")?t.insertBefore(t.prev()):g(this).hasClass("down")&&t.insertAfter(t.next()),u(e),i.sortData.sortBack&&i.sortData.sortBack(),c(e,i),p(e)}),u(e)}function m(t,e){var i=e.length;t.find("div.bottom>.total>.allTotal").html("总共"+i+"个")}function b(t,e){var i="";"undefined"!=typeof e.bottom.showExtData&&g.isFunction(e.bottom.showExtData)&&(i=e.bottom.showExtData(e.tmp.result)),t.find("div.bottom>.total>.extTotal").html(i)}function y(t){var e=0;g.each(t.find("div.center table:first>tbody>tr"),function(){g(this).hasClass("queryIngTr")||e++}),t.find("div.bottom>.total>.pageTotal").html("本页共"+e+"个 ")}function _(i){var t=i.find("div.center table:first>thead>tr>th.checkBoxWidth input.checkbox.all"),o=i.find("div.center table:first>thead>tr>th.checkBoxWidth input.checkbox.all").parents("tr"),a=i.find("div.center table:first>tbody>tr>td.checkBoxWidth input");o.removeClass("checkedAll"),t.bind("click",function(){var t=g(this).prop("checked");a.prop("checked",t);var e=i.find("div.center table:first>tbody>tr>td.checkBoxWidth input[type='checkbox']").parents("tr");t?(e.addClass("checked"),o.addClass("checkedAll")):(e.removeClass("checked"),o.removeClass("checkedAll"))}),a.bind("click",function(){i.find("div.center table:first>tbody>tr>td.checkBoxWidth input:checked").length==a.length?(t.prop("checked",!0),o.addClass("checkedAll")):(t.prop("checked",!1),o.removeClass("checkedAll")),g(this).prop("checked")?g(this).parents("tr").addClass("checked"):g(this).parents("tr").removeClass("checked")})}function w(t){t.find("div.center table:first>thead>tr>th.checkBoxWidth input.checkbox.all").prop("checked",!1)}function C(t,e){t.find("div.center table:first>thead>tr>th.sort").bind("click",function(){if(g(this).hasClass("expanding"))g(this).removeClass("expanding");else{var o=g(this).attr("data-key"),a="";a=g(this).hasClass("desc")?(g(this).addClass("asc").removeClass("desc").siblings().removeClass("asc desc"),"asc"):(g(this).addClass("desc").removeClass("asc").siblings().removeClass("asc desc"),"desc"),e.dataList.sort(function(t,e){var i=Fai.compareObjNew(t,e,a,o);return 0==i&&"name"!=o&&(i=Fai.compareObjNew(t,e,"asc","name")),i}),v(t,e),e.sortCallback&&e.sortCallback()}})}function k(t){return t.find("div.center table:first>thead>tr>th").length}function x(t,e){var o=t.page.startPage,a=t.page.showCount,s=t.tmp.maxPage,n=[];if(0==a)return e;var r=e.length;if(e&&0<e.length){o=(s=(r=e.length)%a==0?r/a:Math.floor(r/a)+1)<(o=o<1?1:o)?s:o;var l=((t.page.startPage=o)-1)*a<0?0:(o-1)*a,d=o+a<0?0:o+a;for(d=r<d?r:l+a,i=l;i<d;i++)"undefined"!=typeof e[i]&&n.push(e[i])}else s=1;return t.tmp.maxPage=s,n}function P(t,e){var i,o,a=[];if(i=e.page.startPage-2<=0?1:e.page.startPage-2,o=e.page.startPage+2>=e.tmp.maxPage?e.tmp.maxPage:e.page.startPage+2,!0===e.page.pageClass.isDefaultPage)if("new2"==e.page.pageClass.pageStyle){a.push('<a href="javascript:;" hidefocus="true" class="firstPage '+e.page.pageClass.pagePrevClass+'">首页</a>'),a.push('<a href="javascript:;" hidefocus="true" class="prevPage disabledBtn '+e.page.pageClass.pagePrevClass+'"><<上一页</a>'),5<Math.abs(e.page.startPage-1)&&1!=i&&a.push("<div class='pageNo_model'><a class='grayContent'>1</a></div>"),2<i&&a.push("<div class='pageEllipsis_new'></div>");for(var s=i;s<=o;s++)s==e.page.startPage?a.push("<div class='pageNo_model'><span style='margin-left:4px;' class='blueTitle'>"+e.page.startPage+"</span></div>"):a.push("<div class='pageNo_model'><a class='grayContent'>",s,"</a></div>");o<e.tmp.maxPage-1&&a.push("<div class='pageEllipsis_new'></div>"),5<Math.abs(e.page.startPage-e.tmp.maxPage)&&e.tmp.maxPage!=o&&a.push("<div class='pageNo_model'><a class='grayContent'>"+e.tmp.maxPage+"</a></div>"),a.push('<a href="javascript:;" hidefocus="true" class="nextPage disabledBtn '+e.page.pageClass.pageNextClass+'">下一页>></a>'),a.push('<a href="javascript:;" hidefocus="true" class="endPage '+e.page.pageClass.pageNextClass+'">尾页</a>')}else if("new"==e.page.pageClass.pageStyle){a.push('<a href="javascript:;" hidefocus="true" class="prevPage disabledBtn '+e.page.pageClass.pagePrevClass+'"><div class="pagePrevClassImg"></div></a>'),5<Math.abs(e.page.startPage-1)&&1!=i&&a.push("<div class='pageNo_model'><a class='grayContent'>1</a></div>"),2<i&&a.push("<div class='pageEllipsis_new'></div>");for(s=i;s<=o;s++)s==e.page.startPage?a.push("<div class='pageNo_model'><span style='margin-left:4px;' class='blueTitle'>"+e.page.startPage+"</span></div>"):a.push("<div class='pageNo_model'><a class='grayContent'>",s,"</a></div>");o<e.tmp.maxPage-1&&a.push("<div class='pageEllipsis_new'></div>"),5<Math.abs(e.page.startPage-e.tmp.maxPage)&&e.tmp.maxPage!=o&&a.push("<div class='pageNo_model'><a class='grayContent'>"+e.tmp.maxPage+"</a></div>"),a.push('<a href="javascript:;" hidefocus="true" class="nextPage disabledBtn '+e.page.pageClass.pageNextClass+'"><div class="pageNextClassImg"></div></a>'),a.push('<span style="margin-left: 10px;position: relative;top:1px;" class="currentPage">共&nbsp;'+e.tmp.maxPage+"&nbsp;页</span>"),a.push('<div class="pageSearch pageSearch_N"><span class="grayTitle">到第&nbsp;<input oninput="this.value=this.value.replace(/[^0-9]+/g,\'\')" type="text" maxlength="3" onkeypress="javascript:return Fai.isNumberKey(event);">&nbsp;页<span></div>'),a.push('<div class="pageSearchClick pageSearchClick_N"><a class="bottomSearch" href="javascript:;">确定</a></div>')}else a.push('<a href="javascript:;" hidefocus="true" class="prevPage disabledBtn '+e.page.pageClass.pagePrevClass+'"><div class="pagePrevClassImg"></div></a>'),a.push('<span class="currentPage">'+e.page.startPage+"/"+e.tmp.maxPage+"</span>"),a.push('<a href="javascript:;" hidefocus="true" class="nextPage disabledBtn '+e.page.pageClass.pageNextClass+'"><div class="pageNextClassImg"></div></a>'),a.push('<div class="pageSearch"><input type="text" maxlength="3" onkeypress="javascript:return Fai.isNumberKey(event);"></div>'),a.push('<div class="pageSearchClick">跳转</div>');else a.push('<a href="javascript:;" hidefocus="true" class="prevPage disabledBtn">上一页</a>'),a.push('<span class="currentPage">'+e.page.startPage+"/"+e.tmp.maxPage+"页</span>"),a.push('<a href="javascript:;" hidefocus="true" class="nextPage disabledBtn">下一页</a>');t.find("div.bottom>.page").html(a.join("")),h(t,e)}function h(e,i){var t=e.find("div.bottom>div.page"),o=t.find("a.prevPage"),a=t.find("a.nextPage"),s=t.find("a.firstPage"),n=t.find("a.endPage"),r=t.find(".pageSearchClick"),l=i.page.startPage,d=(i.page.showCount,i.tmp.maxPage);"new"==i.page.pageClass.pageStyle&&t.find(".pageNo_model").each(function(){var t=g(this).find(".grayContent").text();g(this).find(".grayContent").addClass("pointer"),g(this).find(".grayContent").bind("click",function(){i.page.startPage=parseInt(t),v(e,i),i.isUsePageQueryOrder&&i.pageQueryOrderCallback()})});"new2"==i.page.pageClass.pageStyle&&(t.find(".pageNo_model").each(function(){var t=g(this).find(".grayContent").text();g(this).find(".grayContent").addClass("pointer"),g(this).find(".grayContent").bind("click",function(){i.page.startPage=parseInt(t),v(e,i),i.isUsePageQueryOrder&&i.pageQueryOrderCallback()})}),(s=t.find(".firstPage")).bind("click",function(){i.page.startPage=1,v(e,i),i.isUsePageQueryOrder&&i.pageQueryOrderCallback()}),(n=t.find(".endPage")).bind("click",function(){i.page.startPage=t.find(".pageNo_model:last").text(),v(e,i),i.isUsePageQueryOrder&&i.pageQueryOrderCallback()}));1<l&&o.removeClass("disabledBtn"),l<d&&a.removeClass("disabledBtn"),"new"==i.page.pageClass.pageStyle&&(o.hasClass("disabledBtn")&&(o.removeClass("prevShow_model"),o.addClass("prevHide_model")),a.hasClass("disabledBtn")&&(a.removeClass("nextShow_model"),a.addClass("nextHide_model"))),"new2"==i.page.pageClass.pageStyle&&(o.hasClass("disabledBtn")&&(o.removeClass("prevShow_model"),o.addClass("prevHide_model"),s.removeClass("prevShow_model"),s.addClass("prevHide_model")),a.hasClass("disabledBtn")&&(a.removeClass("nextShow_model"),a.addClass("nextHide_model"),n.removeClass("nextShow_model"),n.addClass("nextHide_model"))),o.hasClass("disabledBtn")||(o.addClass("pointer"),o.bind("click",function(){S(e,i),i.isUsePageQueryOrder&&i.pageQueryOrderCallback()})),a.hasClass("disabledBtn")||(a.addClass("pointer"),a.bind("click",function(){F(e,i),i.isUsePageQueryOrder&&i.pageQueryOrderCallback()})),1<d&&r.removeClass("disabledBtn"),r.hasClass("disabledBtn")||(r.addClass("pointer"),r.bind("click",function(){I(e,i),i.isUsePageQueryOrder&&i.pageQueryOrderCallback()}))}function S(t,e){var i=e.page.startPage,o=e.page.showCount,a=e.dataList.length;a%o==0||Math.floor(a/o);0<i-1&&i--,e.page.startPage=i,v(t,e)}function F(t,e){var i=e.page.startPage,o=e.page.showCount,a=e.dataList.length;i+1<=(a%o==0?a/o:Math.floor(a/o)+1)&&i++,e.page.startPage=i,v(t,e)}function I(t,e){var i=t.find("div.bottom>div.page").find(".pageSearch input").val();""!=i&&(i=parseInt(i));e.page.startPage;var o=e.page.showCount,a=e.dataList.length,s=a%o==0?a/o:Math.floor(a/o)+1;i<=s&&0<i?e.page.startPage=i:""===i?Fai.ing("您没有输入数值。",!0):e.page.startPage=s,v(t,e)}function D(t,i){if(g.isArray(t)){var e=g.extend(!0,[],t);return g.each(e,function(t,e){delete e[i.primaryKey]}),e}if("object"===_typeof(t)){var o=g.extend(!0,{},t);return delete o[i.primaryKey],o}}function E(t,e){var i=t.find("div.center table:first>thead>tr>th"),o=t.find("div.center table:first>tbody>tr"),a=e.tableColumn.hiddenKeyList;g.each(i,function(e){var i=g(this).attr("data-key");g(this).removeClass("disabled"),-1!=g.inArray(i,a)&&g(this).addClass("disabled"),g.each(o,function(t){g(this).find("td").eq(e).removeClass("disabled"),-1!=g.inArray(i,a)&&g(this).find("td").eq(e).addClass("disabled")})})}function T(t,e){var o=[];e.tmp.resultMap={},g.each(e.dataList,function(t,l){var i=0;g.each(e.tmp.searchMatcher,function(t,o){var e=o.searchKeyList,a=o.searchString,s=o.useToLowerCase;void 0===s&&(s=!0);var n=o.cmd;void 0===n&&(n="like");var r=!1;g.each(e,function(t,e){var i=l[e];if(s&&"string"==typeof a&&"string"==typeof i?(i=i.toString().toLowerCase(),a=a.toString().toLowerCase()):"string"==typeof i?i=i.toString():void 0===i&&(i=""),"eq"==n){if(i===a)return!(r=!0)}else if("gt"==n){if(a<i)return!(r=!0)}else if("lt"==n){if(i<a)return!(r=!0)}else if("ge"==n){if(l[e].toString()>=a)return!(r=!0)}else if("le"==n){if(i<=a)return!(r=!0)}else if("and"==n){if(Fai.checkBit(i,a))return!(r=!0)}else if("inArray"==n){if(0<=g.inArray(a,i))return!(r=!0)}else if("callBack"==n){if(o.callBack(l))return!(r=!0)}else if("string"!=typeof i&&(i=i.toString()),0<=i.indexOf(a))return!(r=!0)}),r&&i++}),i==e.tmp.searchMatcher.length&&(o.push(l),e.tmp.resultMap[l.id]=t)}),e.tmp.result=o}g.widget("ui.faiTable",{options:{before:function t(){},toolBar:[],tableColumn:{showCheckbox:!1,columns:[],hiddenKeyList:[]},bottom:{show:!1,showTotal:!1,showAllTotal:!1,showExtTotal:!1,showPage:!1},showDataBefore:function e(){},showDataAfter:function N(){},ajax:{type:"post",url:"",data:""},primaryKey:"_index",dataList:[],noDataMsg:"没有数据",tableRowsClass:{},sortData:{sortable:!1,showSortBtn:!1,showColumnKey:"_sort",unSortList:[],sortBack:function M(){}},page:{startPage:1,showCount:0,pageClass:{isDefaultPage:!1,pageStyle:"",pagePrevClass:"",pageNextClass:""}},itemHover:!1,tmp:{result:[],maxPage:0,newAddDataList:[],rmDataList:[],editDataList:[],maxPrimaryKey:0,searchMatcher:[],resultMap:{}},after:function L(){},expand:!1,expandCookie:"",expandMinWidth:5,sortCallback:null,customClassStyle:"",toolBarPosition:"top",isUsePageQueryOrder:!1,pageQueryOrderCallback:function $(){},exportDataCallback:function O(t){}},_create:function A(){var t=this,c=t.options,e=t.element;c.before&&c.before();var h=[];c.customClassStyle?h.push("<div class="+c.customClassStyle+">"):h.push('<div class="faiTableWrap">'),"top"==c.toolBarPosition&&0<c.toolBar.length&&(h.push('<div class="top">'),g.each(c.toolBar,function(t,e){if(e.show){var i="";"undefined"!=typeof e.extClass&&(i+=e.extClass);var o="";"undefined"!=typeof e.content&&(o+=e.content),h.push('<div class="toolBar '+i+'">'+o+"</div>")}}),h.push("</div>")),h.push('<div class="center">'),h.push('<table class="faiTable" cellpadding="0" cellspacing="0">'),h.push("<thead>"),h.push("<tr>"),c.tableColumn.showCheckbox&&h.push('<th class="checkBoxWidth textCenter sep"><label class="faiTableCheckboxLabel"><input class="checkbox all" type="checkbox"></label></th>');var p=!1,u="",f="",m=c.expand;0<c.tableColumn.columns.length?g.each(c.tableColumn.columns,function(t,e){var i=e.onsort,o=e.sortAs,a=e.expand;void 0===a&&(a=m);e.sortCallback;var s="";"undefined"!=typeof e.key&&(s=' data-key="'+e.key+'"');var n="",r="";c.tableColumn.columns.length!=t+1&&(r=" sep");var l="";i&&(l=" sort pointer"),p||"asc"!=o||(p=!0,u="asc",f=e.key,i&&(l+=" asc")),p||"desc"!=o||(p=!0,u="desc",f=e.key,i&&(l+=" desc"));var d=e.colClass;c.sortData.showSortBtn&&e.key==c.sortData.showColumnKey&&(l="",d=void 0!==d?"sortWidth "+d:"sortWidth"),n=void 0!==d?' class="'+d+r+l:' class="defaultWidth'+r+l,a?(n+=' expand "',h.push("<th"+s+n+'><div class="expandRightLine-box"><div class="expandRightLine"></div></div><div class="padding title">'+e.name+"</div></th>")):(n+=' "',h.push("<th"+s+n+'><div class="padding">'+e.name+"</div></th>"))}):h.push("<th>&nbsp;</th>"),h.push("</tr>"),h.push("</thead>"),h.push("<tbody>"),h.push("</tbody>"),h.push("<tfoot></tfoot>"),h.push("</table>"),h.push("</div>"),"bottom"==c.toolBarPosition&&0<c.toolBar.length&&(h.push('<div class="top">'),g.each(c.toolBar,function(t,e){if(e.show){var i="";"undefined"!=typeof e.extClass&&(i+=e.extClass);var o="";"undefined"!=typeof e.content&&(o+=e.content),h.push('<div class="toolBar '+i+'">'+o+"</div>")}}),h.push("</div>")),c.bottom.show&&(h.push('<div class="bottom">'),h.push('<div class="total">'),c.bottom.showTotal&&h.push('<span class="pageTotal"></span>'),c.bottom.showAllTotal&&h.push('<span class="allTotal"></span>'),c.bottom.showExtTotal&&h.push('<span class="extTotal"></span>'),h.push("</div>"),c.bottom.showPage&&(h.push('<div class="page">'),h.push("</div>")),h.push("</div>")),h.push("</div>"),e.append(h.join("")),"undefined"!=typeof c.ajax.url&&""!=c.ajax.url?(c.dataList=[],o(e,c,p,u,f)):(p&&u&&f&&c.dataList.sort(function(t,e){var i=Fai.compareObjNew(t,e,u,f);return 0==i&&"name"!=f&&(i=Fai.compareObjNew(t,e,"asc","name")),i}),v(e,c)),C(e,c),r(e,c),c.after&&c.after()},sortDataList:function B(t){var e=this.options,i=this.element,o=e.dataList,a=i.find("div.center table:first>tbody>tr"),s=i.find("div.center table:first>tbody");g.each(t,function(t,i){g.each(o,function(t,e){if(i===e.id){var o=e._index;return g.each(a,function(t,e){var i=parseInt(g(e).attr("_index"));if(o===i)return s.append(e),!1}),!1}})});for(var n=(a=i.find("div.center table:first>tbody>tr")).length-1;0<=n;n--){0<g(a[n]).find("div.checkedBtn").length&&s.prepend(a[n])}u(i),p(i),c(i,e)},returnDataList:function j(t){var e=this.options,i=e.dataList,o=D(i,e);return t?i:o},returnRmDataList:function z(){var t=this.options;return D(t.tmp.rmDataList,t)},returnChoiceDataList:function H(o){var a=this,t=a.element,s=a.options,e=t.find("div.center table:first>tbody>tr>td.checkBoxWidth input[type='checkbox']:checked").parents("tr"),n=[];return e.each(function(t,e){var i=g(this).attr(s.primaryKey);n.push(a.getPrimaryKeyData(i,o))}),n},rmChoices:function W(){var t=this,e=t.element,o=t.options,a=o.dataList,s=o.tmp.rmDataList,n=o.tmp.newAddDataList,r=o.tmp.result,l=o.tmp.editDataList,i=e.find("div.center table:first>tbody>tr>td.checkBoxWidth input[type='checkbox']:checked").parents("tr");return 0==i.length||(i.each(function(t,e){var i=g(this).attr(o.primaryKey);g.each(a,function(t,e){if(e[o.primaryKey]==i)return s.push(e),a.splice(t,1),!1}),g.each(n,function(t,e){if(e[o.primaryKey]==i)return n.splice(t,1),!1}),g.each(r,function(t,e){if(e[o.primaryKey]==i)return r.splice(t,1),!1}),g.each(l,function(t,e){if(e[o.primaryKey]==i)return l.splice(t,1),!1})}),v(e,o)),!0},rmChoicesList:function Y(t){var i=this;return g.each(t,function(t,e){i.rmPrimaryKeyData(e)}),!0},addData:function R(t,e){var i=this.element,o=this.options,a=o.dataList,s=o.tmp.newAddDataList;return t[o.primaryKey]=o.tmp.maxPrimaryKey,o.tmp.maxPrimaryKey++,e?a.splice(0,0,t):a.push(t),s.push(t),v(i,o),!0},returnNewAddDataList:function V(){var t=this.options;return D(t.tmp.newAddDataList,t)},hiddenColumns:function X(t){var e=this.options,i=this.element;e.tableColumn.hiddenKeyList=t,E(i,e)},searchString:function G(i){var t=this,o=t.options,e=t.element;1<o.page.startPage&&(o.page.startPage=1),g.each(o.tmp.searchMatcher,function(t,e){if(e.uid==i.uid)return o.tmp.searchMatcher.splice(t,1),!1}),o.tmp.searchMatcher.push(i),v(e,o)},rmSearchObj:function K(i){var t=this,e=t.element,o=t.options;g.each(o.tmp.searchMatcher,function(t,e){if(e.uid==i)return o.tmp.searchMatcher.splice(t,1),!1}),v(e,o)},getPrimaryKeyId:function q(t){var e=this.options,i=g(t).parents("tr").attr(e.primaryKey);return parseInt(i)},getPrimaryKeyData:function U(i,t){var o=this.options,e=o.dataList,a=!1,s={};if(g.each(e,function(t,e){if(e[o.primaryKey]==i)return s=e,!(a=!0)}),a)return t?s:D(s,o)},rmPrimaryKeyData:function Q(i){var t=this.element,o=this.options,a=o.dataList,s=o.tmp.rmDataList,n=o.tmp.newAddDataList,r=o.tmp.result,l=o.tmp.editDataList;return g.each(a,function(t,e){if(e[o.primaryKey]==i)return s.push(e),a.splice(t,1),!1}),g.each(n,function(t,e){if(e[o.primaryKey]==i)return n.splice(t,1),!1}),g.each(r,function(t,e){if(e[o.primaryKey]==i)return r.splice(t,1),!1}),g.each(l,function(t,e){if(e[o.primaryKey]==i)return l.splice(t,1),!1}),v(t,o),!0},editData:function J(o,a,s){var t=this.element,n=this.options,e=n.dataList,r=n.tmp.editDataList,l=n.tmp.newAddDataList,d=!1,i="";return g.each(e,function(t,e){if(e[n.primaryKey]==o){s?g.extend(e,a):g.extend(!0,e,a);var i=!(d=!0);return g.each(l,function(t,e){if(e[n.primaryKey]==o)return!(i=!0)}),i||(g.each(r,function(t,e){if(e[n.primaryKey]==o)return r.splice(t,1),!1}),r.push(e)),!1}}),!!d&&(g(n.tableColumn.columns).each(function(){g(this)[0].ext&&(i=g(this)[0].key)}),""!=i&&"string"==typeof i&&n.dataList.length>o&&(n.dataList[o][i]=a[i]),v(t,n),!0)},editReplaceData:function Z(a,s){var t=this.element,n=this.options,e=n.dataList,r=!1,i="";return g.each(e,function(t,e){if(e[n.primaryKey]==a){for(var i in r=!0,e){var o=s[i];void 0!==o&&(e[i]=o)}return!1}}),!!r&&(g(n.tableColumn.columns).each(function(){g(this)[0].ext&&(i=g(this)[0].key)}),""!=i&&"string"==typeof i&&(n.dataList[0][i]=s[i]),v(t,n),!0)},returnEditDataList:function tt(){var t=this.options;return D(t.tmp.editDataList,t)},addClassToRow:function et(t){},unSortListAdd:function it(t){var e=this,i=(this.element,e.options),o=i.sortData.unSortList;-1==g.inArray(t,o)&&i.sortData.unSortList.push(t)},unSortListRm:function ot(i){var o=this.options,t=o.sortData.unSortList;g.each(t,function(t,e){if(e==i)return o.sortData.unSortList.splice(t,1),!1})},editThisRowColumn:function at(t,a,e,s){var n=this,r=n.options,l=n.getPrimaryKeyId(t),i=g(t).parents("tr"),o=-1;g.each(r.tableColumn.columns,function(t,e){if(e.key==a)return o=t,!0}),r.tableColumn.showCheckbox&&o++;var d=i.find("td").eq(o).find("div.tdWrap"),c=g.trim(d.text()),h=g('<input type="text" class="txtInput" maxlength="'+e+'"/>');""==c&&(c=g(".txtInput").val()),h.val(c),h.bind("blur",function(){var t=g.trim(g(this).val()),e={primaryKeyId:l,primaryKey:r.primaryKey,key:a,"old-data":c,"new-data":t};void 0!==s&&s(e);var i=e["new-data"];if(d.html(Fai.encodeHtml(i)),i!=c){var o={};o[a]=i,n.editData(l,o)}return!1}),h.bind("keypress",function(t){13==t.keyCode&&g(this).blur()}),d.html(h),setTimeout(function(){h.focus()},1)},editFileName:function st(t,o,e,a){var i=this,s=i.options,n=i.getPrimaryKeyId(t),r=g(t).parents("tr"),l=-1;g.each(s.tableColumn.columns,function(t,e){if(e.key==o)return l=t,!0}),s.tableColumn.showCheckbox&&l++;var d=r.find("td").eq(l).find("div.tdWrap"),c=g.trim(d.text()),h=c.lastIndexOf("."),p=c.substring(h),u=c.substring(0,h),f=g('<input type="text" class="txtInput" maxlength="'+e+'"/>');f.val(u),f.bind("blur",function(){var t=g.trim(g(this).val()),e={primaryKeyId:n,primaryKey:s.primaryKey,key:o,"src-data":c,"type-data":p,"name-data":u,"new-data":t};if(void 0!==a)a(e);else{var i=e["new-data"];d.html(Fai.encodeHtml(i))}return!1}),f.bind("keypress",function(t){13==t.keyCode&&g(this).blur()}),d.html(f),setTimeout(function(){f.focus()},1)},returnResultDataList:function nt(t){var e=this.options,i=e.tmp.result,o=D(i,e);return t?i:o},refreshHiddenList:function rt(t){var e=this,i=e.element,o=e.options;return g.isArray(t)&&(o.tableColumn.hiddenKeyList=t),E(i,o),!0},refreshshowCountList:function lt(t){var e=this,i=e.options,o=e.element;t&&(i.page.showCount=t),v(o,i)},refreshShowTable:function dt(t){var e=this.element,i=this.options;return i.dataList=t,v(e,i),!0}})}(jQuery),function(_){var s=new Array("00","33","66","99","CC","FF"),n=new Array("FF0000","00FF00","0000FF","FFFF00","00FFFF","FF00FF");function w(t){var e;e=t?(Fai.top.$("body").append('<div id="colorpanel" class="colorpanel"></div>'),Fai.top.$("#colorpanel")):(_("body").append('<div id="colorpanel" class="colorpanel"></div>'),_("#colorpanel"));var o="";for(i=0;i<2;i++)for(j=0;j<6;j++)for(o+="<tr height=12>",o=0==i?o+'<td width=11 style="background-color:#'+s[j]+s[j]+s[j]+';">':o+'<td width=11 style="background-color:#'+n[j]+';">',k=0;k<3;k++)for(l=0;l<6;l++)o=o+'<td width=11 style="background-color:#'+s[k+3*i]+s[l]+s[j]+';">';var a="";"undefined"!=typeof Fai&&"undefined"!=typeof Fai.top._resRoot&&Fai.top._resRoot,_.browser.msie&&/6.0/.test(navigator.userAgent)&&(a='<iframe frameborder="0" tabindex="-1" src="javascript:false" class="colorFrameBorder"/>'),o=a+'<div class="color_outsideBorder"><table width=229px border="0" cellspacing="0" cellpadding="0" style="background-color:#e8f3fe;" class="colorTableBody"><tr height=27><td colspan=21><table cellpadding="0" cellspacing="1" border="0" class="colorBorderCollapse"><tr><td width="3"><td><div class="DisColorBorder"><div id="DisColor" class="DisColor"></div><div></td><td width="3"><td id="is_Transparent"><input type="text" id="HexColor" size="7" class="HexColor" value="#000000"><a hidefocus="true" class="color_transparent" href="javascript:;" onclick="return false;" id="_cTransparent" title="透明色"></a><a hidefocus="true" class="color_sure" href="javascript:;" onclick="return false;" id="_cconfirm" title="确定"></a><a hidefocus="true" class="color_close" href="javascript:;" onclick="return false;" id="_cclose" title="关闭"></a></td></tr></table></td></table><div class="color_insideBorder"><div class="color_white"><table id="CT" border="1" cellspacing="0" cellpadding="0" class="colorBorderCollapse color_borderTableColor" bordercolor="000000">'+o+"</table></div></div></div>",e.html(o),e.mouseout(function(t){e.attr("mouseIn",0)}),e.mouseover(function(t){e.attr("mouseIn",1)}),e.focusout(function(){1!=e.attr("mouseIn")?e.remove():e.find("#HexColor").focus()})}function r(t,f,m,g,e,v,b){var y=_("#"+t);"undefined"!=typeof Fai&&"undefined"!=typeof Fai.top._resRoot&&Fai.top._resRoot,void 0!==e&&null!=e&&""!=e&&y.css("background",e),y.attr("title","点击选择颜色"),_("#"+t).click(function(){var i,o,a,t,e,s,n,r=_(this).offset().top,l=_(this).height(),d=_(this).offset().left;w(b),n=b?(i=Fai.top.$("#DisColor"),o=Fai.top.$("#HexColor"),a=Fai.top.$("#colorpanel"),t=Fai.top.$("#CT tr td"),e=Fai.top.$("#_cTransparent"),s=Fai.top.$("#_cconfirm"),Fai.top.$("#_cclose")):(i=_("#DisColor"),o=_("#HexColor"),a=_("#colorpanel"),t=_("#CT tr td"),e=_("#_cTransparent"),s=_("#_cconfirm"),_("#_cclose"));var c=y.css("background-color");i.css("background-color",c),"rgba(0, 0, 0, 0)"==c||"transparent"==c?o.val(""):(c=C(c),o.val(c));var h=r+l+m,p=d+g-4;if(b){var u=Fai.top.$(".formDialog");0<u.length&&(h+=u.offset().top+9,p+=u.offset().left+26)}a.css({top:h,left:p}),r+l+m<0&&a.css({top:"4px"}),a.show(),t.unbind("click").mouseover(function(){var t=_(this).css("background-color");t=C(t),i.css("background-color",t),o.val(t)}).click(function(){if(f){var t=_(this).css("background-color");f(C(t))}t=C(t),y.css("background",t),y.css("border","1px solid #aab3bb"),a.remove()}),void 0!==v&&1==v?(e.show(),e.mouseover(function(){i.css("background-color",""),o.val(null)}).click(function(){f&&(f("transparent"),y.css("background","transparent")),a.remove()})):e.hide(),s.click(function(){if(f){var t=o.val(),e=!1;0!=t.indexOf("#")||4!=t.length&&7!=t.length||(e=!0),""!=t&&(t=C(t)),void 0!==v&&1==v&&""==t&&(t="transparent",e=!0),e&&(f(t),y.css("background",t),y.css("border","1px solid #aab3bb")),a.remove()}}),n.click(function(){a.remove()}),a.find("#HexColor").focus(),a.attr("mouseIn",0),o.keydown(function(t){return _.browser.msie?13!=event.keyCode||(s.click(),!1):13!=t.which||(s.click(),!1)}),o.bind("cut paste",function(){setTimeout(function(){var t=o.val(),e=!1;0!=t.indexOf("#")||4!=t.length&&7!=t.length||(e=!0),void 0!==v&&1==v&&""==t&&(t="transparent",e=!0),e&&i.css("background-color",t)},10)}),o.keyup(function(){var t=_(this).val(),e=!1;0!=t.indexOf("#")||4!=t.length&&7!=t.length||(e=!0),void 0!==v&&1==v&&""==t&&(t="transparent",e=!0),e&&i.css("background-color",t)})})}function C(t){if("#"==t.charAt(0))return t;Number(t);var e=t.split(/\D+/);return"#"+o(65536*Number(e[1])+256*Number(e[2])+Number(e[3]),6)}function o(t,e){for(var i=t.toString(16);i.length<e;)i="0"+i;return i}jQuery.extend({showcolor:function d(t,e,i,o,a,s,n){r(t,e,i,o,a,s,n)}})}(jQuery),function(u){function i(t){t.stopPropagation();var e=t.data.$$,i=t.data.options;e(".faiColorPicker").remove();var o=i.historyCookie("colorpicker_history")?decodeURIComponent(i.historyCookie("colorpicker_history")).split(","):[],a='<div class="faiColorPicker" id="'+("faiColorPicker"+Math.floor(1e3*Math.random()))+'"><input type="text" id="faiColorPicker-hidden" /><div class="faiColorPicker-clearcolor"><div class="original-title">当前颜色:</div><div class="original-color" style="background-color:transparent;"></div><div class="original-clear" title="透明色"></div></div>';a+='<div class="faiColorPicker-colorcol">';for(var s,n=1;n<10;n++)a+='<div class="col"><div class="col-color first"><div    style="background-color:'+(s=i["col"+n])[0]+'"></div></div><div class="col-color second"><div style="background-color:'+s[1]+'"></div></div><div class="col-color"><div      style="background-color:'+s[2]+'"></div></div><div class="col-color"><div       style="background-color:'+s[3]+'"></div></div><div class="col-color"><div       style="background-color:'+s[4]+'"></div></div><div class="col-color last"><div  style="background-color:'+s[5]+'"></div></div></div>';a+="</div>",a+='<div class="faiColorPicker-colornormal"><div class="colornormal-title">标准颜色:</div><div class="colornormal-color">';for(var r,l,d=i.colnormal,c=0;c<9;c++)a+='<div class="col"><div class="col-color normal"><div style="background-color:'+d[c]+'"></div></div></div>';a+="</div></div>",a+='<div class="faiColorPicker-colorhistory"><div class="colorhistory-title">最近使用:</div><div class="colorhistory-color">';c=0;for(var h=o.length;c<h;c++)a+='<div class="col"><div class="col-color history"><div style="background-color:'+o[c]+';"></div></div></div>';if(a+="</div></div>",i.advance&&e("body").ColorPicker&&(a+='<div class="faiColorPicker-coloradvance"><a class="coloradvance-btn" href="javascript:;">更多颜色</a></div>'),a+="</div>",e("body").append(a),e(".faiColorPicker-colorcol>.col").last().addClass("col-last"),e(".faiColorPicker-colornormal>.colornormal-color>.col").last().addClass("col-last"),e(".faiColorPicker-colorhistory>.colorhistory-color>.col").last().addClass("col-last"),i.showInTop)if(e(".formDialog").offset()){var p=e(".formDialog:last").offset();l=i.left+p.left+i.base.offset().left+i.base.width()/2,r=i.top+p.top+i.base.offset().top+i.base.height()/2+27}else l=i.left+i.base.offset().left+i.base.width()/2,r=i.top+i.base.offset().top+i.base.height()/2;else l=i.left+i.base.offset().left+i.base.width()/2,r=i.top+i.base.offset().top+i.base.height()/2,u(window).height()-r<272&&(r-=272),u(window).width()-l<206&&(l-=206);e(".faiColorPicker").css({left:l,top:r,"z-index":9999}).show(),e(".faiColorPicker").click(function(t){t.stopPropagation()}),e(".faiColorPicker").find("#faiColorPicker-hidden").focus(),f(i)}function f(t){var e=t.$$,i=e(".original-color"),o=t.target.css(t.targetattr);if(v(o)&&i.addClass("original-transparentIco"),i.css("background-color",o),e(".col-color").unbind("click",s).bind("click",{$$:e,elm:t.target,targetattr:t.targetattr,onchange:t.onchange,onclick:t.onclick},s),e(".col-color").unbind("mouseenter",l).bind("mouseenter",{$$:e,elm:t.target,targetattr:t.targetattr,onmousein:t.onmousein,onchange:t.onchange},l).unbind("mouseleave",d).bind("mouseleave",{$$:e,elm:t.target,targetattr:t.targetattr,onchange:t.onchange},d),e(".faiColorPicker").unbind("mouseleave",d).bind("mouseleave",{$$:e,elm:t.target,targetattr:t.targetattr,onchange:t.onchange},d),e(".original-clear").unbind("click",n).bind("click",{$$:e,elm:t.target,targetattr:t.targetattr,onchange:t.onchange,onreset:t.onreset,onclick:t.onclick},n),e(".original-clear").unbind("mouseenter",r).bind("mouseenter",{$$:e,elm:t.target,targetattr:t.targetattr,onchange:t.onchange,onreset:t.onreset},r),e(".coloradvance-btn").unbind("click",h).bind("click",{$$:e,elm:t.target,targetattr:t.targetattr,base:t.base,baseattr:t.baseattr,onchange:t.onchange,mobiFrame:t.mobiFrame},h),e("body").unbind("click",c).bind("click",{$$:e,elm:t.target,targetattr:t.targetattr,onchange:t.onchange},c),t.showInTop){u("body").unbind("click",c).bind("click",{$$:e,elm:t.target,targetattr:t.targetattr,onchange:t.onchange},c);var a=e(".faiColorPicker");a.mouseout(function(){a.attr("mouseIn",0)}).mouseover(function(){a.attr("mouseIn",1)}).focusout(function(){1!=a.attr("mouseIn")?a.remove():a.find("#faiColorPicker-hidden").focus()})}}function s(t){t.stopPropagation();var e=t.data.$$,i=e(this).find("div").css("background-color");g(i=p(i)),t.data.elm.css(t.data.targetattr,i).removeClass("faiColorPicker-transparentIco"),e(".original-color").css("background-color",i),e(".faiColorPicker").remove(),t.data.onchange.apply(t.data.elm,[i,m(i)]),t.data.onclick.apply(t.data.elm,[i,m(i)])}function n(t){t.stopPropagation();var e=t.data.$$;t.data.elm.css(t.data.targetattr,"transparent").addClass("faiColorPicker-transparentIco"),e(".original-color").css("background-color","transparent").addClass("original-transparentIco"),e(".faiColorPicker").remove(),t.data.onchange.apply(t.data.elm,["transparent","transparent"]),t.data.onclick.apply(t.data.elm,["transparent","transparent"]),t.data.onreset.apply(t.data.elm,[this])}function r(t){(0,t.data.$$)(".original-color").css("background-color","transparent").addClass("original-transparentIco"),t.data.onchange.apply(t.data.elm,["transparent","transparent"]),t.data.onreset.apply(t.data.elm,[this])}function l(t){var e=t.data.$$,i=u(this).find("div").css("background-color");i=p(i),e(".original-color").css("background-color",i).removeClass("original-transparentIco"),t.data.onmousein.apply(t.data.elm,[i,m(i)]),t.data.onchange.apply(t.data.elm,[i,m(i)])}function d(t){var e=t.data.elm.css(t.data.targetattr),i=(0,t.data.$$)(".original-color");e&&(t.data.onchange.apply(t.data.elm,[e,m(e)]),i.css("background-color",e).removeClass("original-transparentIco"),v(e)&&i.addClass("original-transparentIco"))}function c(t){var e=t.data.$$;if(0<e(".faiColorPicker").length){var i=t.data.elm.css(t.data.targetattr);i&&t.data.onchange.apply(t.data.elm,[i,m(i)])}e(".faiColorPicker").remove()}function h(i){i.stopPropagation();var t=i.data.$$,o=i.data.mobiFrame?Fai.top.$:i.data.$$,e=i.data.elm.css(i.data.targetattr);e&&i.data.onchange.apply(i.data.elm,[e,m(e)]),t(".faiColorPicker").remove();var a=Fai.popupWindow({title:"高级颜色选项",width:470,height:260,divId:"AdvanceFaiColorPicker",divContent:'<div class="AdvanceColorPicker"><script type="text/javascript">$(".AdvanceColorPicker").ColorPicker({flat: true , color:"'+p(i.data.elm.css(i.data.targetattr))+'"});<\/script></div>'});return o("#popupWindow"+a).find(".colorpicker_cancel").unbind("click").bind("click",function(){Fai.closePopupWindow(a)}),o("#popupWindow"+a).find(".colorpicker_submit").unbind("click").bind("click",{base:i.data.base,baseattr:i.data.baseattr,elm:i.data.elm,onchange:i.data.onchange},function(t){var e="#"+o(".colorpicker_hex>input").val();t.data.elm.removeClass("faiColorPicker-transparentIco"),t.data.elm.css(i.data.targetattr,e),t.data.base.css(t.data.baseattr,e),t.data.onchange.apply(t.data.elm,[e,m(e)]),g(e),Fai.closePopupWindow(a)}),!1}function p(t){if(/#/g.test(t))return t;t=t.replace(/[rgba\(\)]/g,"").split(",");for(var e,i=["#"],o=0;o<3;o++)1===(e=parseInt(t[o]).toString(16)).length&&(e="0"+e),i.push(e);return i.join("")}function m(t){return/rgb/gi.test(t)?t:["rgb(",(t=parseInt(t.substring(1),16))>>16,",",(65280&t)>>8,",",255&t,")"].join("")}function g(t){var e=Fai.top.$.cookie("colorpicker_history"),i=e?decodeURIComponent(e).split(","):[],o=i.join();new RegExp(t,"gi").test(o)||(8<i.length&&i.pop(),i.unshift(t),Fai.top.$.cookie("colorpicker_history",encodeURIComponent(i)))}function v(t){return!!(t&&"rgba(0,0,0,0)"==t.replace(/\s/g,"")||"transparent"==t)}u.fn.faiColorPicker=function(t){var e={base:this,target:this,baseattr:"background-color",targetattr:"background-color",defaultcolor:null,col1:["#ffffff","#dbdbdb","#9b9b9b","#4d4d4d","#161616","#000000"],col2:["#cbdeff","#69a1ff","#0f67ff","#0042b3","#01296e","#001e4d"],col3:["#c0b6ff","#6b55ff","#1f00fc","#1200a0","#0a015e","#08004b"],col4:["#d7b5ff","#9f56ff","#7000fc","#4800a0","#2b005c","#210049"],col5:["#f0bfdd","#e16cb3","#dd158f","#9c0061","#570035","#410028"],col6:["#ffcfc1","#ff835f","#ff3e07","#ac0000","#661500","#501100"],col7:["#ffe9c4","#ffc265","#ff9d0b","#b06900","#683f00","#4f2f00"],col8:["#fff6d5","#fee370","#ffd119","#bb9600","#765d00","#594601"],col9:["#e2efc3","#c0e073","#a4db1d","#719f00","#405a00","#314500"],colnormal:["#c00000","#ff0000","#ffc000","#ffff00","#94d152","#00af50","#01b0f1","#0172c2","#012060"],historyCookie:Fai.top.$.cookie,advance:!0,showInTop:!1,mobiFrame:!1,onreset:u.noop,onchange:u.noop,onclick:u.noop,onmousein:u.noop,id:this.selector,top:0,left:0};(t=u.extend({},e,t)).defaultcolor&&t.baseattr&&(t.base.css(t.baseattr,t.defaultcolor),v(t.defaultcolor)&&t.target.addClass("faiColorPicker-transparentIco")),t.showInTop?t.$$=Fai.top.$:t.$$=u,t.base.bind("click",{options:t,$$:t.$$},i)}}(jQuery),function(n){var i,a,t,s,r,l,d,c,h,p,u,f,m,g,v,b,y,_,w,o,C,k,x,P,S,F,I,D,E,T,N,M,L,$,O,A,e,B,j,z,H,W,Y,R=(i=65,a=['<div class="colorpicker">','<div class="colorpicker_color">',"<div>","<div></div>","</div>","</div>",'<div class="colorpicker_hue">',"<div></div>","</div>",'<div class="colorpicker_new_color_title">新增</div>','<div class="colorpicker_current_color_title">当前</div>','<div class="colorpicker_new_color"></div>','<div class="colorpicker_current_color"></div>','<div class="colorpicker_hex">','<span> #</span><input type="text" maxlength="6" size="6" />',"</div>",'<div class="colorpicker_rgb_r colorpicker_field">','<i class="colorpicker_field_title">红(R):</i> ','<input type="text" maxlength="3" size="3" class="numeric" />','<span><i class="colorpicker_rgbnum_add"></i><i class="colorpicker_rgbnum_reduce"></i></span>',"</div>",'<div class="colorpicker_rgb_g colorpicker_field">','<i class="colorpicker_field_title">绿(G):</i>','<input type="text" maxlength="3" size="3" class="numeric" />','<span><i class="colorpicker_rgbnum_add"></i><i class="colorpicker_rgbnum_reduce"></i></span>',"</div>",'<div class="colorpicker_rgb_b colorpicker_field">','<i class="colorpicker_field_title">蓝(B):</i>','<input type="text" maxlength="3" size="3" class="numeric" />','<span><i class="colorpicker_rgbnum_add"></i><i class="colorpicker_rgbnum_reduce"></i></span>',"</div>",'<div class="colorpicker_hsb_h colorpicker_field">','<i class="colorpicker_field_title">色相(H):</i>','<input type="text" maxlength="3" size="3" class="numeric"/>','<span><i class="colorpicker_hsbnum_add"></i><i class="colorpicker_hsbnum_reduce"></i></span>',"</div>",'<div class="colorpicker_hsb_s colorpicker_field">','<i class="colorpicker_field_title">饱和度(S):</i>','<input type="text" maxlength="3" size="3" class="numeric"/>','<span><i class="colorpicker_hsbnum_add"></i><i class="colorpicker_hsbnum_reduce"></i></span>',"</div>",'<div class="colorpicker_hsb_b colorpicker_field">','<i class="colorpicker_field_title">亮度(B):</i>','<input type="text" maxlength="3" size="3" class="numeric"/>','<span><i class="colorpicker_hsbnum_add"></i><i class="colorpicker_hsbnum_reduce"></i></span>',"</div>",'<div class="colorpicker_submit abutton faiButton saveButton">确定</div>','<div class="colorpicker_cancel abutton faiButton cancelButton ">取消</div>',"</div>"].join(""),t={eventName:"click",onShow:n.noop,onBeforeShow:n.noop,onHide:n.noop,color:"ff0000",livePreview:!0,flat:!1},s=function s(t,e){var i=z(t);n(e).data("colorpicker").fields.eq(1).val(i.r).end().eq(2).val(i.g).end().eq(3).val(i.b).end()},r=function r(t,e){n(e).data("colorpicker").fields.eq(4).val(t.h.toFixed(0)).end().eq(5).val(t.s.toFixed(0)).end().eq(6).val(t.b.toFixed(0)).end()},l=function l(t,e){n(e).data("colorpicker").fields.eq(0).val(W(t)).end()},d=function d(t,e){n(e).data("colorpicker").selector.css("backgroundColor","#"+W({h:t.h,s:100,b:100})),n(e).data("colorpicker").selectorIndic.css({left:parseInt(150*t.s/100,10),top:parseInt(150*(100-t.b)/100,10)})},c=function c(t,e){n(e).data("colorpicker").hue.css("top",parseInt(150-150*t.h/360,10))},h=function h(t,e){n(e).data("colorpicker").currentColor.css("backgroundColor","#"+W(t))},p=function p(t,e){n(e).data("colorpicker").newColor.css("backgroundColor","#"+W(t))},u=function u(t){var e=t.charCode||t.keyCode||-1;if(i<e&&e<=90||32==e)return!1;!0===n(this).parent().parent().data("colorpicker").livePreview&&f.apply(this)},f=function f(t){var e,i=n(this).parent().parent();0<this.parentNode.className.indexOf("_hex")?i.data("colorpicker").color=e=B(A(this.value)):0<this.parentNode.className.indexOf("_hsb")?i.data("colorpicker").color=e=$({h:i.data("colorpicker").fields.eq(4).val(),s:i.data("colorpicker").fields.eq(5).val(),b:i.data("colorpicker").fields.eq(6).val()}):i.data("colorpicker").color=e=j(O({r:i.data("colorpicker").fields.eq(1).val(),g:i.data("colorpicker").fields.eq(2).val(),b:i.data("colorpicker").fields.eq(3).val()})),t&&(s(e,i.get(0)),l(e,i.get(0)),r(e,i.get(0))),d(e,i.get(0)),c(e,i.get(0)),p(e,i.get(0))},m=function m(t){var e=n(this).parent().parent(),i=i=e.data("colorpicker").color;e.data("colorpicker").fields.parent().removeClass("colorpicker_focus"),s(i,e.get(0)),r(i,e.get(0)),l(i,e.get(0)),c(i,e.get(0)),d(i,e.get(0)),p(i,e.get(0))},g=function g(){i=0<this.parentNode.className.indexOf("_hex")?70:65,n(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),n(this).parent().addClass("colorpicker_focus")},function V(t){t.stopPropagation();var e=n(this).parent().find("input").focus(),i={el:n(this).parent().addClass("colorpicker_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:t.pageY,field:e,val:parseInt(e.val(),10),preview:n(this).parent().parent().data("colorpicker").livePreview};n(document).bind("mouseup",i,Ll),n(document).bind("mousemove",i,Kl)},function Kl(e){return e.data.field.val(Math.max(0,Math.min(e.data.max,parseInt(e.data.val+e.pageY-e.data.y,10)))),e.data.preview&&f.apply(e.data.field.get(0),[!0]),!1},function Ll(e){return f.apply(e.data.field.get(0),[!0]),e.data.el.removeClass("colorpicker_slider").find("input").focus(),n(document).unbind("mouseup",Ll),n(document).unbind("mousemove",Kl),!1},v=function v(t){t.stopPropagation();var e=n(this).parent().parent().find("input").focus();e.val(parseInt(e.val())+3),f.apply(n(this).parent().get(0),[!0])},b=function b(t){t.stopPropagation();var e=n(this).parent().parent().find("input").focus();e.val(parseInt(e.val())-3),f.apply(n(this).parent().get(0),[!0])},y=function y(t){t.stopPropagation();var e=n(this).parent().parent().find("input").focus();e.val(parseInt(e.val())+1),f.apply(n(this).parent().get(0),[!0])},_=function _(t){t.stopPropagation();var e=n(this).parent().parent().find("input").focus();e.val(parseInt(e.val())-1),f.apply(n(this).parent().get(0),[!0])},w=function w(t){t.stopPropagation();var e={cal:n(this).parent(),y:n(this).offset().top};e.preview=e.cal.data("colorpicker").livePreview,f.apply(e.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,t.pageY-e.y)))/150,10)).get(0),[!0]),n(document).bind("mouseup",e,C),n(document).bind("mousemove",e,o)},o=function o(t){return f.apply(t.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,t.pageY-t.data.y)))/150,10)).get(0),[t.data.preview]),!1},C=function C(t){return s(t.data.cal.data("colorpicker").color,t.data.cal.get(0)),l(t.data.cal.data("colorpicker").color,t.data.cal.get(0)),n(document).unbind("mouseup",C),n(document).unbind("mousemove",o),!1},k=function k(t){t.stopPropagation();var e={cal:n(this).parent(),pos:n(this).offset()};e.preview=e.cal.data("colorpicker").livePreview,f.apply(e.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,t.pageY-e.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,t.pageX-e.pos.left))/150,10)).get(0),[!0]),n(document).bind("mouseup",e,P),n(document).bind("mousemove",e,x)},x=function x(t){return f.apply(t.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,t.pageY-t.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,t.pageX-t.data.pos.left))/150,10)).get(0),[t.data.preview]),!1},P=function P(t){return s(t.data.cal.data("colorpicker").color,t.data.cal.get(0)),l(t.data.cal.data("colorpicker").color,t.data.cal.get(0)),n(document).unbind("mouseup",P),n(document).unbind("mousemove",x),!1},S=function S(t){n(this).addClass("saveButton-hover")},F=function F(t){n(this).removeClass("saveButton-hover")},I=function I(t){var e=n(this).parent(),i=e.data("colorpicker").color;e.data("colorpicker").origColor=i,h(i,e.get(0))},D=function D(t){n(this).addClass("cancelButton-hover")},E=function E(t){n(this).removeClass("cancelButton-hover")},T=function T(t){var e=n("#"+n(this).data("colorpickerId"));e.data("colorpicker").onBeforeShow.apply(this,[e.get(0)]);var i=n(this).offset(),o=L(),a=i.top+this.offsetHeight,s=i.left;return a+176>o.t+o.h&&(a-=this.offsetHeight+176),s+356>o.l+o.w&&(s-=356),e.css({left:s+"px",top:a+"px"}),0!=e.data("colorpicker").onShow.apply(this,[e.get(0)])&&e.show(),n(document).bind("mousedown",{cal:e},N),!1},N=function N(t){M(t.data.cal.get(0),t.target,t.data.cal.get(0))||(0!=t.data.cal.data("colorpicker").onHide.apply(this,[t.data.cal.get(0)])&&t.data.cal.hide(),n(document).unbind("mousedown",N))},M=function M(t,e,i){if(t==e)return!0;if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return!!(16&t.compareDocumentPosition(e));for(var o=e.parentNode;o&&o!=i;){if(o==t)return!0;o=o.parentNode}return!1},L=function L(){var t="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(t?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(t?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(t?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(t?document.documentElement.clientHeight:document.body.clientHeight)}},$=function $(t){return{h:Math.min(360,Math.max(0,t.h)),s:Math.min(100,Math.max(0,t.s)),b:Math.min(100,Math.max(0,t.b))}},O=function O(t){return{r:Math.min(255,Math.max(0,t.r)),g:Math.min(255,Math.max(0,t.g)),b:Math.min(255,Math.max(0,t.b))}},A=function A(t){var e=6-t.length;if(0<e){for(var i=[],o=e;o--;)i.push("0");i.push(t),t=i.join("")}return t},e=function e(t){return{r:(t=parseInt(-1<t.indexOf("#")?t.substring(1):t,16))>>16,g:(65280&t)>>8,b:255&t}},B=function B(t){return j(e(t))},j=function j(t){var e={h:0,s:0,b:0},i=Math.min(t.r,t.g,t.b),o=Math.max(t.r,t.g,t.b),a=o-i;return e.b=o,e.s=0!=o?255*a/o:0,0!=e.s?t.r==o?e.h=(t.g-t.b)/a:t.g==o?e.h=2+(t.b-t.r)/a:e.h=4+(t.r-t.g)/a:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,{h:parseFloat(e.h,2),s:e.s,b:e.b}},z=function z(t){var e={},i=Math.round(t.h),o=Math.round(255*t.s/100),a=Math.round(255*t.b/100);if(0==o)e.r=e.g=e.b=a;else{var s=a,n=(255-o)*a/255,r=i%60*(s-n)/60;360==i&&(i=0),i<60?(e.r=s,e.b=n,e.g=n+r):i<120?(e.g=s,e.b=n,e.r=s-r):i<180?(e.g=s,e.r=n,e.b=n+r):i<240?(e.b=s,e.r=n,e.g=s-r):i<300?(e.b=s,e.g=n,e.r=n+r):i<360?(e.r=s,e.g=n,e.b=s-r):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},H=function H(t){var i=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return n.each(i,function(t,e){1==e.length&&(i[t]="0"+e)}),i.join("")},W=function W(t){return H(z(t))},Y=function Y(){var t=n(this).parent(),e=t.data("colorpicker").origColor;t.data("colorpicker").color=e,s(e,t.get(0)),l(e,t.get(0)),r(e,t.get(0)),d(e,t.get(0)),c(e,t.get(0)),p(e,t.get(0))},{init:function X(o){if("string"==typeof(o=n.extend({},t,o||{})).color)o.color=B(o.color);else if(o.color.r!=undefined&&o.color.g!=undefined&&o.color.b!=undefined)o.color=j(o.color);else{if(o.color.h==undefined||o.color.s==undefined||o.color.b==undefined)return this;o.color=$(o.color)}return this.each(function(){if(!n(this).data("colorpickerId")){var t=n.extend({},o);t.origColor=o.color;var e="colorpicker_"+parseInt(1e3*Math.random());n(this).data("colorpickerId",e);var i=n(a).attr("id",e);t.flat?i.appendTo(this).show():i.appendTo(document.body),t.fields=i.find("input").bind("keyup",u).bind("change",f).bind("blur",m).bind("focus",g),t=n.extend({},t,{el:this,selector:i.find("div.colorpicker_color").bind("mousedown",k),selectorIndic:i.find("div.colorpicker_color").find("div div"),hue:i.find("div.colorpicker_hue div"),newColor:i.find("div.colorpicker_new_color"),currentColor:i.find("div.colorpicker_current_color")}),i.find("div.colorpicker_hue").bind("mousedown",w),i.find("i.colorpicker_hsbnum_add").bind("click",y),i.find("i.colorpicker_hsbnum_reduce").bind("click",_),i.find("i.colorpicker_rgbnum_add").bind("click",v),i.find("i.colorpicker_rgbnum_reduce").bind("click",b),i.find(">div.colorpicker_current_color").bind("click",Y),i.data("colorpicker",t),i.find(".numeric").numeric({negative:!1}),i.find("div.colorpicker_submit").bind("mouseenter",S).bind("mouseleave",F).bind("click",I),i.find("div.colorpicker_cancel").bind("mouseenter",D).bind("mouseleave",E),s(t.color,i.get(0)),r(t.color,i.get(0)),l(t.color,i.get(0)),c(t.color,i.get(0)),d(t.color,i.get(0)),h(t.color,i.get(0)),p(t.color,i.get(0)),t.flat?i.css({position:"relative",display:"block"}):n(this).bind(t.eventName,T)}})},showPicker:function G(){return this.each(function(){n(this).data("colorpickerId")&&T.apply(this)})},hidePicker:function K(){return this.each(function(){n(this).data("colorpickerId")&&n("#"+n(this).data("colorpickerId")).hide()})},setColor:function q(e){if("string"==typeof e)e=B(e);else if(e.r!=undefined&&e.g!=undefined&&e.b!=undefined)e=j(e);else{if(e.h==undefined||e.s==undefined||e.b==undefined)return this;e=$(e)}return this.each(function(){if(n(this).data("colorpickerId")){var t=n("#"+n(this).data("colorpickerId"));t.data("colorpicker").color=e,t.data("colorpicker").origColor=e,s(e,t.get(0)),r(e,t.get(0)),l(e,t.get(0)),c(e,t.get(0)),d(e,t.get(0)),h(e,t.get(0)),p(e,t.get(0))}})}});n.fn.extend({ColorPicker:R.init,ColorPickerHide:R.hidePicker,ColorPickerShow:R.showPicker,ColorPickerSetColor:R.setColor})}(jQuery),function(d){d.fn.initSlider=function(t){if(this){var i={initStartIndex:100,initStart:0,endStart:100,unit:"%",refreshFn:null,saveValueFn:null,styleChangeFn:null};d.extend(i,t);var e='<div class="slider_outside"><div class="slider_stay"><div class="slider_move" style="position:absolute;"></div></div><div class="slider_value">100%</div></div>';0===d(this).find(".slider_outside").length?d(this).append(e):n(i.refreshFn)&&i.refreshFn(i.initStartIndex);var o=parseInt(d(".slider_stay").width())-parseInt(d(".slider_move").width()),a=!1,s=o/(i.endStart-i.initStart);d(".slider_value").text(i.initStartIndex+i.unit),i.initStartIndex===i.initStart?d(".slider_move").css("left","0px"):i.initStartIndex===i.endStart?d(".slider_move").css("left",o+"px"):d(".slider_move").css("left",(i.initStartIndex-i.initStart)*s+"px"),d(".slider_move").draggable({handler:".slider_move",axis:"x",containment:"parent",stop:function r(){},drag:function l(){var t=parseInt(this.style.left),e=Math.ceil(t/s)+i.initStart;e<i.initStart&&(e=i.initStart),e>i.endStart&&(e=i.endStart),d(".slider_value").text(e+i.unit),n(i.refreshFn)&&i.refreshFn(e),!a&&n(i.styleChangeFn)&&(i.styleChangeFn(),a=!0),n(i.saveValueFn)&&i.saveValueFn(e)}})}function n(t){return"[object Function]"===Object.prototype.toString.call(t)}}}(jQuery),function(c){var r=[{first:"SimSun",second:"宋体"},{first:"PMingLiU",second:"新细明体"},{first:"FangSong_GB2312",second:"仿宋_GB2312"},{first:"微软雅黑",second:"微软雅黑"},{first:"隶书",second:"隶书"},{first:"幼圆",second:"幼圆"},{first:"STKaiti",second:"华文楷体"},{first:"方正舒体",second:"方正舒体"},{first:"华文彩云",second:"华文彩云"},{first:"华文行楷",second:"华文行楷"},{first:"华文宋体",second:"华文宋体"},{first:"Arial",second:"Arial"},{first:"Tahoma",second:"Tahoma"},{first:"impact",second:"impact"},{first:"Arial Serif",second:"Arial Serif"},{first:"Georgia",second:"Georgia"},{first:"Garamond",second:"Garamond"},{first:"Times New Roman",second:"Times New Roman"}];function h(t){return"[object Function]"===Object.prototype.toString.call(t)}c.fn.fontFamilySelect=function(t){var i={type:0,defaultValue:"SimSun",defaultValueIndex:0,refreshFn:null,styleChangeFn:null,fontfamily:null};c.extend(i,t),i.fontfamily=i.fontfamily||r;var o,a=['<div id="f_family_select',i.type,'" class="f_family_select">','<div class="f_family_body"></div>','<div class="f_family_button"></div>',"</div>"];if(a=a.join(""),0===c("#f_family_select"+i.type).length){c(this).append(a),a=c("#f_family_select"+i.type),o=['<div id="f_family_menu',i.type,'" class="f_family_menu" style="display:none;">','<div id="f_family_content" class="f_family_content">'];var s="";c.each(i.fontfamily,function(t,e){e.first===i.defaultValue&&(i.defaultValueIndex=t,s=" f_selected"),o.push("<div class='f_family_option"+s+"' style='font-family:"+e.first+"' _value='"+e.first+"' title='"+e.second+"'>"+e.second+"</div>"),s=""}),o.push("</div></div>"),o=o.join(""),0===c("body").find("#f_family_menu"+i.type).length&&c("body").append(o)}else a=c("#f_family_select"+i.type),h(i.refreshFn)&&i.refreshFn(i.defaultValue),a.find(".f_family_button").removeClass("f_b_selected"),c("#f_family_menu"+i.type).hide(),c("#f_family_menu"+i.type).find(".f_selected").removeClass("f_selected");o=c("#f_family_menu"+i.type),f_family_button=a.find(".f_family_button"),a.find(".f_family_body").html(i.fontfamily[i.defaultValueIndex].second),a.find(".f_family_body").attr("title",i.fontfamily[i.defaultValueIndex].second),f_family_button.mousemove(function(){c(this).addClass("f_b_hover")}).mouseleave(function(){c(this).removeClass("f_b_hover")}),a.unbind("click").bind("click",function(){if(!o.attr("_isPos")){var t=a.offset();o.offset({top:t.top+21,left:t.left}),o.attr("_isPos",1)}var e=c(this).find(".f_family_button");e.hasClass("f_b_selected")?(o.hide(),e.removeClass("f_b_selected")):(o.show(),e.addClass("f_b_selected"))}),c(document).bind("click",function(t){0==c(t.target).closest(".f_family_body, .f_family_button").length&&(o.hide(),a.find(".f_family_button").removeClass("f_b_selected")),t.stopPropagation()});var e=c(".ui-tabs").find(".ui-state-default a");0<e.length&&e.on("click",function(){o.hide(),a.find(".f_family_button").removeClass("f_b_selected")});var n=o.find(".f_family_content").children();c(n).mousemove(function(){c(this).addClass("f_hover")}).mouseleave(function(){c(this).removeClass("f_hover")}).click(function(){a.find(".f_family_body").html(c(this).html()),a.find(".f_family_body").attr("title",c(this).html()),o.find(".f_selected").removeClass("f_selected"),c(this).addClass("f_selected"),h(i.refreshFn)&&i.refreshFn(c(this).attr("_value")),h(i.styleChangeFn)&&i.styleChangeFn()})},c.fn.fontSzieSlider=function(t){var a={type:0,initStartIndex:12,initStart:12,endStart:60,space:1,refreshFn:null,styleChangeFn:null,needInput:!1,sliderEnd:60};c.extend(a,t);var i=[];a.needInput?(i.push('<div id="f_size_select'+a.type+'" class="f_size_select f_size_select_input" >'),i.push('<input type="text" maxlength="3" class="f_size_body f_size_body_input"/>'),i.push('<div class="f_size_button f_size_button_input"></div>')):(i.push('<div id="f_size_select'+a.type+'" class="f_size_select">'),i.push('<div class="f_size_body"></div>'),i.push('<div class="f_size_button"></div>')),i.push("</div>"),i=i.join(""),0===c(this).find("#f_size_select"+a.type).length?c(this).append(i):(h(a.refreshFn)&&a.refreshFn(a.initStartIndex),c("#f_size_menu"+a.type).hide(),c("#f_size_select"+a.type).find(".f_size_button").removeClass("f_b_selected")),i=c("#f_size_select"+a.type);var s,o=['<div id="f_size_menu',a.type,'" class="f_size_menu" style="display:none;" >','<div class="f_slider_stay">','<div class="f_slider_strip"></div>','<div class="f_slider_move"></div>',"</div>","</div>"];o=o.join(""),0===c("body").find("#f_size_menu"+a.type).length&&c("body").append(o),o=c("#f_size_menu"+a.type),s=i.find(".f_size_body"),a.needInput?s.val(a.initStartIndex):s.html(a.initStartIndex+"px"),i.find(".f_size_button").mousemove(function(){c(this).addClass("f_b_hover")}).mouseleave(function(){c(this).removeClass("f_b_hover")}),i.unbind("click").bind("click",function(){if(!o.attr("_isPos")){var t=i.offset();o.offset({top:t.top+22,left:t.left}),o.attr("_isPos",1)}var e=i.find(".f_size_button");e.hasClass("f_b_selected")?(o.hide(),e.removeClass("f_b_selected")):(o.show(),e.addClass("f_b_selected"))}),c(document).bind("click",function(t){0==c(t.target).closest(".f_size_body, .f_size_button, #f_size_menu"+a.type).length&&(o.hide(),i.find(".f_size_button").removeClass("f_b_selected")),t.stopPropagation()});var e=c(".ui-tabs").find(".ui-state-default a");0<e.length&&e.on("click",function(){o.hide(),i.find(".f_size_button").removeClass("f_b_selected")});var n=parseInt(o.find(".f_slider_stay").height())-parseInt(o.find(".f_slider_move").height()),r=Math.floor(n/(a.endStart-a.initStart)*10)/10,l=o.find(".f_slider_move");a.initStartIndex<a.sliderEnd+1?l.text(a.initStartIndex+"px"):l.text(a.sliderEnd+"px"),a.initStartIndex===a.initStart?l.css("top","0px"):a.initStartIndex>=a.endStart?l.css("top",n+"px"):l.css("top",(a.initStartIndex-a.initStart)*r+"px"),o.find(".f_slider_strip").click(function(t){var e=l.height()/2,i=Math.ceil((t.offsetY-e)/r)+a.initStart,o=c(this).height();t.offsetY>o-e?l.css("top",o-e+"px"):t.offsetY<e?l.css("top","auto"):l.css("top",t.offsetY-e+"px"),i<a.initStart&&(i=a.initStart),i>a.endStart&&(i=a.endStart),i%a.space&&(i+=1),l.text(i+"px"),a.needInput?s.val(i):s.html(i+"px"),h(a.refreshFn)&&a.refreshFn(i),h(a.styleChangeFn)&&a.styleChangeFn()}),l.draggable({handler:".f_slider_move",axis:"y",containment:"parent",drag:function d(){var t=parseInt(this.style.top),e=Math.floor(t/r)+a.initStart;e<a.initStart&&(e=a.initStart),e>a.endStart&&(e=a.endStart),e%a.space||(c(this).text(e+"px"),a.needInput?s.val(e):s.html(e+"px"),h(a.refreshFn)&&a.refreshFn(e),h(a.styleChangeFn)&&a.styleChangeFn())}}),a.needInput&&(s.off("keyup.fontsize").on("keyup.fontsize",function(t){var e=c(this).val(),i=e;c.isNumeric(e)&&11<e&&e<1e3&&(e<a.sliderEnd+1?l.css("top",(1*e-1*a.initStart)*r+"px"):(l.css("top",(a.sliderEnd-1*a.initStart)*r+"px"),i=a.sliderEnd),11<e&&(e>a.sliderEnd?o.hide():o.show()),l.text(i+"px"),h(a.refreshFn)&&a.refreshFn(e),h(a.styleChangeFn)&&a.styleChangeFn())}),s.off("keypress.fontsize").on("keypress.fontsize",function(t){return Fai.isNumberKey(t)}),s.off("focusout.fontsize").on("focusout.fontsize",function(t){var e=c(this).val();c.isNumeric(e)?(e<12||999<e)&&(Fai.ing("字号范围在12-999之间",!0),e<12?c(this).val(12):c(this).val(999),c(this).trigger("keyup")):(Fai.ing("字号范围在12-999之间",!0),c(this).val(12),c(this).trigger("keyup"))}))},c.fn.fontStyleEditor=function(t){var o={id:0,toolbars:[{name:"fontfamily",defaultValue:"",refreshFn:null},{name:"fontsize",defaultValue:12,refreshFn:null},{name:"bold",defaultValue:0,refreshFn:null},{name:"italic",defaultValue:0,refreshFn:null},{name:"underline",defaultValue:0,refreshFn:null},{name:"fontcolor",defaultValue:"",refreshFn:null,removeCssFn:null}],styleChangeFn:null,fontfamily:null};c.extend(o,t);var a='<div id="f_editor'+o.id+'" class="f_editor"></div>';0===c("#f_editor"+o.id).length&&c(this).append(a),a=c("#f_editor"+o.id);var s=function s(t){var e={defaultValue:0,refreshFn:null,styleChangeFn:null};c.extend(e,t);var i="<div id='f_b_bold"+o.id+"' class='f_button f_b_bold "+(e.defaultValue?"f_bold_select":"")+"'></div>";0===c("#f_b_bold"+o.id).length?a.append(i):(h(e.refreshFn)&&e.refreshFn(e.defaultValue),c("#f_b_bold"+o.id).removeClass("f_bold_select")),c("#f_b_bold"+o.id).mousemove(function(){c(this).addClass("f_bold_hover")}).mouseleave(function(){c(this).removeClass("f_bold_hover")}).unbind("click").bind("click",function(){c(this).hasClass("f_bold_select")?(c(this).removeClass("f_bold_select"),e.defaultValue=0):(c(this).addClass("f_bold_select"),e.defaultValue=1),h(e.refreshFn)&&e.refreshFn(e.defaultValue),h(e.styleChangeFn)&&e.styleChangeFn()})},n=function n(t){var e={defaultValue:0,refreshFn:null,styleChangeFn:null};c.extend(e,t);var i="<div id='f_b_italic"+o.id+"' class='f_button f_b_italic "+(e.defaultValue?"f_italic_select":"")+"'></div>";0===c("#f_b_italic"+o.id).length?a.append(i):(h(e.refreshFn)&&e.refreshFn(e.defaultValue),c("#f_b_italic"+o.id).removeClass("f_italic_select")),c("#f_b_italic"+o.id).mousemove(function(){c(this).addClass("f_italic_hover")}).mouseleave(function(){c(this).removeClass("f_italic_hover")}).unbind("click").bind("click",function(){c(this).hasClass("f_italic_select")?(c(this).removeClass("f_italic_select"),e.defaultValue=0):(c(this).addClass("f_italic_select"),e.defaultValue=1),h(e.refreshFn)&&e.refreshFn(e.defaultValue),h(e.styleChangeFn)&&e.styleChangeFn()})},r=function r(t){var e={defaultValue:0,refreshFn:null,styleChangeFn:null};c.extend(e,t);var i="<div id='f_b_underline"+o.id+"' class='f_button f_b_underline "+(e.defaultValue?"f_unline_select":"")+"'></div>";0===c("#f_b_underline"+o.id).length?a.append(i):(h(e.refreshFn)&&e.refreshFn(e.defaultValue),c("#f_b_underline"+o.id).removeClass("f_unline_select")),c("#f_b_underline"+o.id).mousemove(function(){c(this).addClass("f_unline_hover")}).mouseleave(function(){c(this).removeClass("f_unline_hover")}).unbind("click").bind("click",function(){c(this).hasClass("f_unline_select")?(c(this).removeClass("f_unline_select"),e.defaultValue=0):(c(this).addClass("f_unline_select"),e.defaultValue=1),h(e.refreshFn)&&e.refreshFn(e.defaultValue),h(e.styleChangeFn)&&e.styleChangeFn()})},l=function l(t){var e={defaultValue:"",refreshFn:null,removeCssFn:null};c.extend(e,t);var i=["<div id='f_color",o.id,"' class='f_button f_b_color'>","<div id='f_b_color",o.id,"' class='f_color_edit'",e.defaultValue?' style="border:1px solid #aab3bb;"':"","></div>","</div>"];i=i.join(""),0===c("#f_color"+o.id).length&&(a.append(i),c("#f_b_color"+o.id).faiColorPicker({defaultcolor:e.defaultValue,onchange:e.refreshFn,showInTop:!0})),h(e.removeCssFn)&&(e.removeCssFn(),h(e.refreshFn)&&e.refreshFn(e.defaultValue),c("#f_b_color"+o.id).removeAttr("style")),e.defaultValue||c("#f_color"+o.id).bind("mousemove",function(){c(this).children().attr("style")?c(this).unbind("mousemove"):c(this).addClass("f_color_hover")}).bind("mouseleave",function(){c(this).children().attr("style")?c(this).unbind("mouseleave"):c(this).removeClass("f_color_hover")})};c.each(o.toolbars,function(t,e){switch(e.name){case"fontfamily":a.fontFamilySelect({type:o.id,defaultValue:e.defaultValue,defaultValueIndex:3,refreshFn:e.refreshFn,styleChangeFn:o.styleChangeFn,fontfamily:o.fontfamily});break;case"fontsize":a.fontSzieSlider({type:o.id,initStartIndex:e.defaultValue,initStart:e.initStart,endStart:e.endStart,space:e.space,refreshFn:e.refreshFn,styleChangeFn:o.styleChangeFn,needInput:!0});break;case"bold":s({defaultValue:e.defaultValue,refreshFn:e.refreshFn,styleChangeFn:o.styleChangeFn});break;case"italic":n({defaultValue:e.defaultValue,refreshFn:e.refreshFn,styleChangeFn:o.styleChangeFn});break;case"underline":r({defaultValue:e.defaultValue,refreshFn:e.refreshFn,styleChangeFn:o.styleChangeFn});break;case"fontcolor":l({defaultValue:e.defaultValue,refreshFn:e.refreshFn,removeCssFn:e.removeCssFn})}})}}(jQuery),function(){function o(t,e){e?t.addClass("ui-radioBtnSelected"):t.removeClass("ui-radioBtnSelected")}jQuery.widget("ui.radiobox",{_create:function t(){var e=this,i=this.element;i.addClass("ui-radioBtn").append("<div class='ui-radioBtnCtl'></div>"),o(i,!!e.options.initVal),i.click(function(){if(!e.options.disabled){var t=!i.hasClass("ui-radioBtnSelected");o(i,t)}"function"==typeof e.options.click&&e.options.click(t)})},getVal:function e(){return this.element.hasClass("ui-radioBtnSelected")},setVal:function i(t){o(this.element,!!t)}})}(),function(c){c.widget("ui.combobox",{_create:function h(){var n=this,t=this.element,r=t.width(),l=c("<input>").appendTo(t).attr("placeholder",n.options.placeholder).autocomplete({source:n.options.source,delay:0,minLength:0,open:function d(t,e){if(n.options.maxlength)c(this).autocomplete("widget").width(n.options.maxlength);else{c(this).autocomplete("widget").width();var i=c(this).outerWidth()-6;l.width()!=r-Fai.getCssInt(l,"border-left-width")&&(i=c(this).outerWidth(),n.options.readonly||(i=c(this).outerWidth()-6)),c(this).autocomplete("widget").width(i)}n.options.maxHeight&&c(this).autocomplete("widget").css("max-height",n.options.maxHeight);var o=c(this).autocomplete("widget").find("li");if(1==o.length&&0==c(this).attr("readonly")){var a=c(this).val(),s=!1;c(o).each(function(t,e){var i=c.trim(c(e).text());a==i&&(s=!0)}),s&&c(this).autocomplete("close")}},select:function s(t,e){c(n).data("key",e.item.key),n.options.select&&n.options.select(e.item),n.options.change&&n.options.change(e.item.label),n.options.finish&&setTimeout(function(){n.options.finish(e.item)},0)}});l.change(function(){n.options.change&&n.options.change(c(this).val())}),l.keyup(function(t){n.options.change&&n.options.change(c(this).val()),n.options.keyup&&n.options.keyup(c(this).val())}),n.options.readonly&&l.click(function(t){return l.autocomplete("widget").is(":visible")?l.autocomplete("close"):l.autocomplete("search",""),!1}),n.options.id&&l.attr("id",n.options.id),n.options.readonly&&l.attr("readonly","readonly"),l.width(r-Fai.getCssInt(l,"border-left-width")),t.width(r+Fai.getCssInt(l,"border-left-width")+Fai.getCssInt(l,"border-right-width")),n.options.name?l.attr("name",n.options.name):l.attr("name",n.options.id),"undefined"!=typeof n.options.initVal&&l.val(n.options.initVal),"undefined"!=typeof n.options.initKey?c(n).data("key",n.options.initKey):c(n).data("key","");var e=c("<div>&nbsp;</div>").attr("tabIndex",-1).css("outline","none").insertAfter(l).addClass("autoCompleteButton").hover(function(){c(this).addClass("autoCompleteButtonHover")},function(){c(this).removeClass("autoCompleteButtonHover"),c(this).removeClass("autoCompleteButtonDown")}).mouseup(function(){}).mousedown(function(){c(this).removeClass("autoCompleteButtonHover"),c(this).addClass("autoCompleteButtonDown")}).click(function(){return l.autocomplete("widget").is(":visible")?l.autocomplete("close"):(l.autocomplete("search",""),l.focus()),!1}),i=l.outerHeight();t.css("position","relative"),t.css("height",i);var o=r-e.width()-(n.options.readonly?0:1),a=l.position().top+(i-e.height())/2;e.css("position","absolute"),e.css("left",o+"px"),e.css("top",a+"px"),n.options.readonly||(l.width(r-Fai.getCssInt(l,"border-left-width")-20),l.css("padding-right","20px"),e.css("background-color","#ffffff").css("*width","17px")),n.options.readonly?e.show():l.focus(function(){e.show()})},addSource:function e(i){var t=this.element.find("input"),o=t.autocomplete("option","source"),a=!1;c.each(o,function(t,e){e.key==i.key&&(a=!0,o.splice(t,1,i))}),a||o.push(i),t.autocomplete("option","source",o)},setSource:function i(t){this.element.find("input").autocomplete("option","source",t)},getSource:function t(){return this.element.find("input").autocomplete("option","source")},setInitVal:function o(t,e){this.element.find("input").val(t),c(this).data("key",e)},setInitKey:function a(i){var t=this.element.find("input"),e=t.autocomplete("option","source"),o="";c.each(e,function(t,e){e.key==i&&(o=e.label)}),t.val(o),c(this).data("key",i)},getVal:function s(){return this.element.find("input").val()},getKey:function n(){return c(this).data("key")},setKey:function r(t){c(this).data("key",t)}})}(jQuery),function(h){var t=[],d=/^url\(["']?([^"'\)]*)["']?\);?$/i,c=/\.png$/i,p=h.browser.msie&&6==h.browser.version;h.Poshytip=function(t,e){this.$elm=h(t),this.opts=h.extend({},h.fn.poshytip.defaults,e),this.$tip=h(['<div id="',this.opts.id,'" class="',this.opts.className,'" ',""!=this.opts.cusStyle?"style='"+this.opts.cusStyle+"'":"",">",'<div class="tip-inner tip-bg-image"></div>','<div class="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left"></div>',"</div>"].join("")),this.$arrow=this.$tip.find("div.tip-arrow"),this.$inner=this.$tip.find("div.tip-inner"),this.disabled=!1,this.init()},h.Poshytip.prototype={init:function e(){switch(t.push(this),this.$elm.data("title.poshytip",this.$elm.attr("title")),this.$elm.data("poshytip",this),this.opts.showOn){case"hover":this.$elm.bind({"mouseenter.poshytip":h.proxy(this.mouseenter,this),"mouseleave.poshytip":h.proxy(this.mouseleave,this)}),"cursor"==this.opts.alignTo&&this.$elm.bind("mousemove.poshytip",h.proxy(this.mousemove,this)),this.opts.allowTipHover&&this.$tip.hover(h.proxy(this.clearTimeouts,this),h.proxy(this.hide,this));break;case"focus":this.$elm.bind({"focus.poshytip":h.proxy(this.show,this),"blur.poshytip":h.proxy(this.hide,this)})}if(this.opts.autoLocation){var i=this,o=i.$elm.offset().top,a=i.$elm.offset().left;this.interval=setInterval(function(){var t=i.$elm.offset().top,e=i.$elm.offset().left;o==t&&a==e||(i.update(),i.display(),o=t,a=e)},300)}},mouseenter:function i(t){if(this.disabled)return!0;this.clearTimeouts(),this.$elm.attr("title",""),this.showTimeout=setTimeout(h.proxy(this.show,this),this.opts.showTimeout)},mouseleave:function o(){if(this.disabled)return!0;this.clearTimeouts(),this.$elm.attr("title",this.$elm.data("title.poshytip")),this.hideTimeout=setTimeout(h.proxy(this.hide,this),this.opts.hideTimeout)},mousemove:function a(t){if(this.disabled)return!0;this.eventX=t.pageX,this.eventY=t.pageY,this.opts.followCursor&&this.$tip.data("active")&&(this.calcPos(),this.$tip.css({left:this.pos.l,top:this.pos.t}),this.pos.arrow&&(this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow))},show:function s(){this.disabled||this.$tip.data("active")||(this.reset(),this.update(),this.display())},hide:function n(){!this.disabled&&this.$tip.data("active")&&this.display(!0)},reset:function r(){this.$tip.queue([]).detach().css("visibility","hidden").data("active",!1),this.$inner.find("*").poshytip("hide"),this.opts.fade&&this.$tip.css("opacity",this.opacity),this.$arrow[0].className="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left"},update:function l(t){if(!this.disabled){var e=t!==undefined;if(e){if(!this.$tip.data("active"))return}else t=this.opts.content;this.$inner.contents().detach();var i=this;this.$inner.append("function"==typeof t?t.call(this.$elm[0],function(t){i.update(t)}):"[title]"==t?this.$elm.data("title.poshytip"):t),this.refresh(e)}},refresh:function u(t){if(!this.disabled){if(t){if(!this.$tip.data("active"))return;this.$tip.css("left"),this.$tip.css("top")}this.$tip.css({left:0,top:0}).appendTo(this.opts.appendToId?h(this.opts.appendToId):document.body),this.opacity===undefined&&(this.opacity=this.$tip.css("opacity"));var e=this.$tip.css("background-image").match(d),i=this.$arrow.css("background-image").match(d);if(e){var o=c.test(e[1]);p&&o?(this.$tip.css("background-image","none"),this.$inner.css({margin:0,border:0,padding:0}),e=o=!1):this.$tip.prepend('<table border="0" cellpadding="0" cellspacing="0"><tr><td class="tip-top tip-bg-image" colspan="2"><span></span></td><td class="tip-right tip-bg-image" rowspan="2"><span></span></td></tr><tr><td class="tip-left tip-bg-image" rowspan="2"><span></span></td><td></td></tr><tr><td class="tip-bottom tip-bg-image" colspan="2"><span></span></td></tr></table>').css({border:0,padding:0,"background-image":"none","background-color":"transparent"}).find(".tip-bg-image").css("background-image",'url("'+e[1]+'")').end().find("td").eq(3).append(this.$inner),o&&!h.support.opacity&&(this.opts.fade=!1)}i&&!h.support.opacity&&(p&&c.test(i[1])&&(i=!1,this.$arrow.css("background-image","none")),this.opts.fade=!1);var a=this.$tip.find("table");if(p){this.$tip[0].style.width="",a.width("auto").find("td").eq(3).width("auto");var s=this.$tip.width(),n=parseInt(this.$tip.css("min-width")),r=parseInt(this.$tip.css("max-width"));!isNaN(n)&&s<n?s=n:!isNaN(r)&&r<s&&(s=r),this.$tip.add(a).width(s).eq(0).find("td").eq(3).width("100%")}else a[0]&&a.width("auto").find("td").eq(3).width("auto").end().end().width(this.$tip.width()).find("td").eq(3).width("100%");if(this.tipOuterW=this.$tip.outerWidth(),this.tipOuterH=this.$tip.outerHeight(),this.calcPos(),i&&this.pos.arrow&&(this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow,this.$arrow.css("visibility","inherit")),this.$tip.css({left:this.pos.l,top:this.pos.t}),"top"==this.pos.arrow)Math.round(this.$arrow.offset().left+this.$arrow.width()-this.$arrow.width()/2)!=(l=Math.round(this.$elm.offset().left+this.$elm.width()-this.$elm.width()/2))&&this.$arrow.offset({top:this.$tip.offset().top-(this.$arrow.height()-1),left:l});else if("bottom"==this.pos.arrow){var l;Math.round(this.$arrow.offset().left+this.$arrow.width()-this.$arrow.width()/2)!=(l=Math.round(this.$elm.offset().left+this.$elm.width()-this.$elm.width()/2))&&this.$arrow.offset({top:this.$tip.offset().top+this.$tip.height()+this.$arrow.height()+5+1,left:l})}}},display:function f(t){var e=this.$tip.data("active");if(!(e&&!t||!e&&t)){if(this.$tip.stop(),(this.opts.slide&&this.pos.arrow||this.opts.fade)&&(t&&this.opts.hideAniDuration||!t&&this.opts.showAniDuration)){var i={},o={};if(this.opts.slide&&this.pos.arrow){var a,s;if("bottom"==this.pos.arrow||"top"==this.pos.arrow){if(s="bottom",(a="top")==this.pos.arrow)Math.round(this.$arrow.offset().left+this.$arrow.width()-this.$arrow.width()/2)!=(n=Math.round(this.$elm.offset().left+this.$elm.width()-this.$elm.width()/2))&&this.$arrow.offset({top:this.$tip.offset().top-(this.$arrow.height()-1),left:n});else if("bottom"==this.pos.arrow){var n;Math.round(this.$arrow.offset().left+this.$arrow.width()-this.$arrow.width()/2)!=(n=Math.round(this.$elm.offset().left+this.$elm.width()-this.$elm.width()/2))&&this.$arrow.offset({top:this.$tip.offset().top+this.$tip.height()+this.$arrow.height()+5+1,left:n})}}else a="left",s="right";var r=parseInt(this.$tip.css(a));i[a]=r+(t?0:this.opts.slideOffset*(this.pos.arrow==s?-1:1)),o[a]=r+(t?this.opts.slideOffset*(this.pos.arrow==s?1:-1):0)}this.opts.fade&&(i.opacity=t?this.$tip.css("opacity"):0,o.opacity=t?0:this.opacity),this.$tip.css(i).animate(o,this.opts[t?"hideAniDuration":"showAniDuration"])}t?this.$tip.queue(h.proxy(this.reset,this)):this.$tip.css("visibility","inherit"),this.$tip.data("active",!e)}},disable:function m(){this.reset(),this.disabled=!0},enable:function g(){this.disabled=!1},destroy:function v(){this.reset(),this.$tip.remove(),this.$elm.unbind("poshytip").removeData("title.poshytip").removeData("poshytip"),t.splice(h.inArray(this,t),1),this.opts.autoLocation&&clearInterval(this.interval)},clearTimeouts:function b(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0),this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0)},calcPos:function y(){var t,e,i,o,a,s,n={l:0,t:0,arrow:""},r=h(window),l={l:r.scrollLeft(),t:r.scrollTop(),w:r.width(),h:r.height()};if("cursor"==this.opts.alignTo)t=e=i=this.eventX,o=a=s=this.eventY;else{var d=this.$elm.offset(),c={l:d.left,t:this.opts.appendToId?d.top-h(this.opts.appendToId).offset().top:d.top,w:this.$elm.outerWidth(),h:this.$elm.outerHeight()};e=(t=c.l+("inner-right"!=this.opts.alignX?0:c.w))+Math.floor(c.w/2),i=t+("inner-left"!=this.opts.alignX?c.w:0),a=(o=c.t+("inner-bottom"!=this.opts.alignY?0:c.h))+Math.floor(c.h/2),s=o+("inner-top"!=this.opts.alignY?c.h:0)}switch(this.opts.alignX){case"right":case"inner-left":n.l=i+this.opts.offsetX,n.l+this.tipOuterW>l.l+l.w&&(n.l=l.l+l.w-this.tipOuterW),"right"!=this.opts.alignX&&"center"!=this.opts.alignY||(n.arrow="left");break;case"center":n.l=e-Math.floor(this.tipOuterW/2),n.l+this.tipOuterW>l.l+l.w?n.l=l.l+l.w-this.tipOuterW:n.l<l.l&&(n.l=l.l);break;default:n.l=t-this.tipOuterW-this.opts.offsetX,n.l<l.l&&(n.l=l.l),"left"!=this.opts.alignX&&"center"!=this.opts.alignY||(n.arrow="right")}switch(this.opts.alignY){case"bottom":case"inner-top":n.t=s+this.opts.offsetY,n.arrow&&"cursor"!=this.opts.alignTo||(n.arrow="top"),n.t+this.tipOuterH>l.t+l.h&&(n.t=o-this.tipOuterH-this.opts.offsetY,"top"==n.arrow&&(n.arrow="bottom"));break;case"center":n.t=a-Math.floor(this.tipOuterH/2),n.t+this.tipOuterH>l.t+l.h?n.t=l.t+l.h-this.tipOuterH:n.t<l.t&&(n.t=l.t);break;default:n.t=o-this.tipOuterH-this.opts.offsetY,n.arrow&&"cursor"!=this.opts.alignTo||(n.arrow="bottom"),n.t<l.t&&(n.t=s+this.opts.offsetY,"bottom"==n.arrow&&(n.arrow="top"))}this.pos=n}},h.fn.poshytip=function(e){if("string"==typeof e)return this.each(function(){var t=h(this).data("poshytip");t&&t[e]&&t[e]()});var t=h.extend({},h.fn.poshytip.defaults,e);return h("#poshytip-css-"+t.className)[0]||h(['<style id="poshytip-css-',t.className,'" type="text/css">',"div.",t.className,"{visibility:hidden;position:absolute;top:0;left:0;}","div.",t.className," table, div.",t.className," td{margin:0;font-family:inherit;font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;}","div.",t.className," td.tip-bg-image span{display:block;font:1px/1px sans-serif;height:",t.bgImageFrameSize,"px;width:",t.bgImageFrameSize,"px;overflow:hidden;}","div.",t.className," td.tip-right{background-position:100% 0;}","div.",t.className," td.tip-bottom{background-position:100% 100%;}","div.",t.className," td.tip-left{background-position:0 100%;}","div.",t.className," div.tip-inner{background-position:-",t.bgImageFrameSize,"px -",t.bgImageFrameSize,"px;}","div.",t.className," div.tip-arrow{visibility:hidden;position:absolute;overflow:hidden;font:1px/1px sans-serif;}","</style>"].join("")).appendTo("head"),this.each(function(){new h.Poshytip(this,t)})},h.fn.poshytip.defaults={content:"[title]",className:"tip-yellow",cusStyle:"",bgImageFrameSize:10,showTimeout:500,hideTimeout:100,showOn:"hover",alignTo:"cursor",alignX:"right",alignY:"top",offsetX:-22,offsetY:18,allowTipHover:!0,followCursor:!1,fade:!0,slide:!0,slideOffset:8,showAniDuration:300,hideAniDuration:300}}(jQuery),function(c){var r=5;c.widget("ui.slider",c.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function l(){var s=this,t=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),i="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=t.values&&t.values.length||1,a=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(t.disabled?" ui-slider-disabled ui-disabled":"")),this.range=c([]),t.range&&(!0===t.range&&(t.values||(t.values=[this._valueMin(),this._valueMin()]),t.values.length&&2!==t.values.length&&(t.values=[t.values[0],t.values[0]])),this.range=c("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:"")));for(var n=e.length;n<o;n+=1)a.push(i);this.handles=e.add(c(a.join("")).appendTo(s.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(t){t.preventDefault()}).hover(function(){t.disabled||c(this).addClass("ui-state-hover")},function(){c(this).removeClass("ui-state-hover")}).focus(function(){t.disabled?c(this).blur():(c(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),c(this).addClass("ui-state-focus"))}).blur(function(){c(this).removeClass("ui-state-focus")}),this.handles.each(function(t){c(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(t){var e,i,o,a=c(this).data("index.ui-slider-handle");if(!s.options.disabled){switch(t.keyCode){case c.ui.keyCode.HOME:case c.ui.keyCode.END:case c.ui.keyCode.PAGE_UP:case c.ui.keyCode.PAGE_DOWN:case c.ui.keyCode.UP:case c.ui.keyCode.RIGHT:case c.ui.keyCode.DOWN:case c.ui.keyCode.LEFT:if(t.preventDefault(),!s._keySliding&&(s._keySliding=!0,c(this).addClass("ui-state-active"),!1===s._start(t,a)))return}switch(o=s.options.step,e=i=s.options.values&&s.options.values.length?s.values(a):s.value(),t.keyCode){case c.ui.keyCode.HOME:i=s._valueMin();break;case c.ui.keyCode.END:i=s._valueMax();break;case c.ui.keyCode.PAGE_UP:i=s._trimAlignValue(e+(s._valueMax()-s._valueMin())/r);break;case c.ui.keyCode.PAGE_DOWN:i=s._trimAlignValue(e-(s._valueMax()-s._valueMin())/r);break;case c.ui.keyCode.UP:case c.ui.keyCode.RIGHT:if(e===s._valueMax())return;i=s._trimAlignValue(e+o);break;case c.ui.keyCode.DOWN:case c.ui.keyCode.LEFT:if(e===s._valueMin())return;i=s._trimAlignValue(e-o)}s._slide(t,a,i)}}).keyup(function(t){var e=c(this).data("index.ui-slider-handle");s._keySliding&&(s._keySliding=!1,s._stop(t,e),s._change(t,e),c(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function t(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function h(t){var e,i,o,a,s,n,r,l,d=this.options;return!d.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e),o=this._valueMax()-this._valueMin()+1,(s=this).handles.each(function(t){var e=Math.abs(i-s.values(t));e<o&&(o=e,a=c(this),n=t)}),!0===d.range&&this.values(1)===d.min&&(n+=1,a=c(this.handles[n])),!1!==this._start(t,n)&&(this._mouseSliding=!0,s._handleIndex=n,a.addClass("ui-state-active").focus(),r=a.offset(),l=!c(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-r.left-a.width()/2,top:t.pageY-r.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,n,i),this._animateOff=!0))},_mouseStart:function e(t){return!0},_mouseDrag:function o(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function i(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function a(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function s(t){var e,i,o,a;return 1<(i=("horizontal"===this.orientation?(e=this.elementSize.width,t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)))/e)&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),o=this._valueMax()-this._valueMin(),a=this._valueMin()+i*o,this._trimAlignValue(a)},_start:function n(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function d(t,e,i){var o,a,s;this.options.values&&this.options.values.length?(o=this.values(e?0:1),2===this.options.values.length&&!0===this.options.range&&(0===e&&o<i||1===e&&i<o)&&(i=o),i!==this.values(e)&&((a=this.values())[e]=i,s=this._trigger("slide",t,{handle:this.handles[e],value:i,values:a}),o=this.values(e?0:1),!1!==s&&this.values(e,i,!0))):i!==this.value()&&!1!==(s=this._trigger("slide",t,{handle:this.handles[e],value:i}))&&this.value(i)},_stop:function p(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function u(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("change",t,i)}},value:function f(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function m(t,e){var i,o,a;if(1<arguments.length)return this.options.values[t]=this._trimAlignValue(e),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!c.isArray(t))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,o=t,a=0;a<i.length;a+=1)i[a]=this._trimAlignValue(o[a]),this._change(null,a);this._refreshValue()},_setOption:function g(t,e){var i,o=0;switch(c.isArray(this.options.values)&&(o=this.options.values.length),c.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":e?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;i<o;i+=1)this._change(null,i);this._animateOff=!1}},_value:function v(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function b(t){var e,i,o;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);for(i=this.options.values.slice(),o=0;o<i.length;o+=1)i[o]=this._trimAlignValue(i[o]);return i},_trimAlignValue:function y(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=0<this.options.step?this.options.step:1,i=(t-this._valueMin())%e,o=t-i;return 2*Math.abs(i)>=e&&(o+=0<i?e:-e),parseFloat(o.toFixed(5))},_valueMin:function _(){return this.options.min},_valueMax:function w(){return this.options.max},_refreshValue:function C(){var i,o,t,e,a,s=this.options.range,n=this.options,r=this,l=!this._animateOff&&n.animate,d={};this.options.values&&this.options.values.length?this.handles.each(function(t,e){i=(r.values(t)-r._valueMin())/(r._valueMax()-r._valueMin())*100,d["horizontal"===r.orientation?"left":"bottom"]=i+"%",c(this).stop(1,1)[l?"animate":"css"](d,n.animate),!0===r.options.range&&("horizontal"===r.orientation?(0===t&&r.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},n.animate),1===t&&r.range[l?"animate":"css"]({width:i-o+"%"},{queue:!1,duration:n.animate})):(0===t&&r.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},n.animate),1===t&&r.range[l?"animate":"css"]({height:i-o+"%"},{queue:!1,duration:n.animate}))),o=i}):(t=this.value(),e=this._valueMin(),a=this._valueMax(),i=a!==e?(t-e)/(a-e)*100:0,d["horizontal"===r.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](d,n.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},n.animate),"max"===s&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:n.animate}),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},n.animate),"max"===s&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:n.animate}))}}),c.extend(c.ui.slider,{version:"@VERSION"})}(jQuery),function(f){var r=function r(t,e){if("[object object]"!=Object.prototype.toString.call(e).toLowerCase())throw new Error("faiImageAdd parameter error");if(this.$elm=f(t),this.mouseInHandle=0,this.opts=f.extend({entry:"Site",_resRoot:"",_cssResource:"",moduleId:0,popupID:0,allPhotoList:[],groupId:0,photoGroupList:[],photoGroup:!1,addPhotoWay:0,dataStructure:[],fileUpload2_settings:{},imagesLimit:50,backUrl:"",refreshHoverImageCallback:function o(){},editPhotoCallback:function a(){},deletePhotoCallback:function s(){},addPhotoWayCallback:function n(){}},e),""==this.opts._cssResource)throw new Error("faiImageAddCss is not existed");var i=document.createElement("link");if(i.rel="stylesheet",i.type="text/css",i.href=this.opts._cssResource,f("head").append(i),0==this.opts.dataStructure.length)throw new Error("faiImageAdd dataStructure error");if("undefined"==typeof this.opts.linkType)throw new Error("faiImageAdd linkType error");this.isSite="Site"==this.opts.entry,this.isMobi="Mobi"==this.opts.entry,this.init(),this.checkPhotoGroup(),this.sortable(),this.movePhotoEvent(),this.fileUpload()};f.extend(r.prototype,{init:function l(){var t='<div class="photo-add-panel"><div class="upload-panel"><div class="photoList"><ul id="fk-imgContainer" class="img-container"><li style="float: left;" class="J_imgPanel J_moreImgPanel" id="fk-add-photo"><div class="add-photo fk-uploadButton"><div class="add-photo-picture">+</div><div class="add-photo-text">添加图片</div></div></li></ul></div></div></div><div class="add-photo-prompt"><div class="add-photo-btn fk-uploadButton"><div class="add-photo-btn-picture">+</div><div class="add-photo-btn-text">继续添加</div></div><div class="show-photo-list"><div class="add-photo-btn-text" style="display:inline;">图片已上传</div><div id="fk-photoNumber" class="add-photo-btn-text" style="display:inline;">0</div><div class="add-photo-btn-text" style="display:inline;">张</div></div></div>',e=this.opts.allPhotoList;if(f(t).appendTo(this.$elm),0<e.length)for(var i=0;i<e.length;i++){for(var o=e[i],a=this.opts.dataStructure,s=[],n=0;n<a.length;n++)s.push(o[a[n]]);this.addImage.apply(this,s)}f("#fk-imgContainer").disableSelection(),f("#fk-imgContainer").find(".photo-border").first().click()},addImage:function d(){var t=this,e=t.opts.dataStructure,i=arguments[0],o=arguments[1],a="<li id="+i+" class='img-panel J_imgPanel' title=''><div class='photo-border'><div class='photoHover'><div class='sortableHandle' id='sortableHandle'></div><a class='editBut J_photoHandle' title='编辑图片'></a><a class='deleteBut J_photoHandle' title='删除图片'></a></div><table width='100%' height='100%' cellpadding='0' cellspacing='0'><tr><td valign='middle'><img style='display:none;margin:0 auto;' data-origkinal='"+t.opts._resRoot+"/image/template/preview/loadingTmpl.gif' src="+o+" style='display:block; margin:auto;' class='Js_lazyloadimg' onload='Fai.Img.optimize(this, {width:90, height:76, display:0, mode:Fai.Img.MODE_SCALE_DEFLATE_FILL});'/></td></tr></table></div></li>";f("#fk-add-photo").before(a);for(var s=0;s<e.length;s++)0!=s&&f("#"+arguments[0]).data(e[s],arguments[s]);t.photoIdList=[],f("#fk-imgContainer").find(".img-panel").each(function(){t.photoIdList.push(f(this).attr("id"))}),f("#"+i+" .editBut").unbind("click").bind("click",function(){t.editPhoto(i)}),f("#"+i+" .deleteBut").unbind("click").bind("click",function(){t.deletePhoto(i)}),f("#"+i).unbind("dblclick").bind("dblclick",function(){t.editPhoto(i)});var n=t.photoCount();f("#fk-imgContainer").css("width",100*(n+1)).css("max-width",100*(n+1)),f("#fk-photoNumber").text(n)},checkPhotoGroup:function m(){var t,e,i,o,a,s,n=this,r=(n.opts.imagesLimit,n.opts.photoGroupList),l=n.opts.groupId,d=(n.opts.fileUpload2_settings,n.opts.addPhotoWay);if(n.opts.photoGroup){if(o='<div id="moduleAddPhotoPanel" class="clearPanel"><div class="clearTitle">添加图片：</div><div class="clearCtrl radioPanel"><input id="addDirectly" name="addPhotoRadio" type="radio"><label for="addDirectly">直接添加</label><input id="bindPhotoGroup" name="addPhotoRadio" type="radio"><label for="bindPhotoGroup">绑定图册</label></div></div>',a='<div class="managePhotoGroup"><div class="manageHeader"><div class="manageTitle">选择图册：</div><div class="manageBtn J_addPhotoGroup"><input type="button" class="faiButton" value="创建图册" /></div></div><div id="photoGroupList" class="photoGroupList"></div></div>',f(".photo-add-panel").before(o),(i=f("#moduleAddPhotoPanel")).after(a),s=f("#photoGroupList"),t=i.find("#addDirectly"),e=i.find("#bindPhotoGroup"),0<r.length){for(var c="",h=0;h<r.length;h++){var p=r[h].id,u=r[h].name;c+='<div id="photoGroup'+p+'" class="photoGroup">',c+='<table class="photoGroupTable" cellpadding="0" cellspacing="0"><tr>',c+='<td class="width-35 ta-c"><input value="'+p+'" id="pgRadio'+p+'" '+(l==p?"checked='checked'":"")+' name="pgRadio" type="radio" /><label for="pgRadio'+p+'"></label></td>',c+='<td><div class="photoGroupName" id="groupName'+p+'">'+Fai.encodeHtml(u)+"</div></td>",c+='<td><a class="editPhotoGroup" id="editPhotoGroup'+p+'">编辑</a>&nbsp;&nbsp;</td>',c+="</tr></table>",c+="</div>"}s[0].innerHTML=c}else s[0].innerHTML="<div class='empty-list'>您尚未创建图册</div>";e.unbind("click").bind("click",function(){f(".photo-add-panel, .add-photo-prompt").hide(),f(".managePhotoGroup").show(),n.refreshHoverImageList(),n.refreshClickPhoto();var t=Fai.top._aid;"undefined"==typeof Fai.top._aid&&(t=Fai.top._cid),!Fai.top._oem&&1424e4<t&&(f("#photoDetail").hide(),f("label[for='photoDetail']").hide(),f("#openTypePanel").hide(),f("#pictureLink")[0].checked&&f("#slideLink").click(),f("#pictureLink").hide(),f("label[for='pictureLink']").hide(),f("#openTypePanel").hide())}),t.unbind("click").bind("click",function(){f(".photo-add-panel, .add-photo-prompt").show(),f(".managePhotoGroup").hide(),n.refreshHoverImageList(),n.refreshClickPhoto(),f("#photoDetail").show(),f("label[for='photoDetail']").show(),f("#pictureLink").show(),f("label[for='pictureLink']").show()}),0==d?t[0].click():1==d&&e[0].click(),n.choicePhotoGroup(),n.editPhotoGroup(),n.addPhotoGroup()}},addPhotoGroup:function e(){var n=this,a=n.opts.backUrl,t=f(".J_addPhotoGroup"),r=f("#photoGroupList"),s=n.opts.version||1;function l(t){if(!Fai.isNull(t)){var e=[],i=f.parseJSON(t),o=(i.photoList,i.id);e+="<div id='photoGroup"+o+"' class='photoGroup' >",e+="<table class='photoGroupTable' cellpadding='0' celspacing='0'>",e+="<tr>",e+="<td class='width-35 ta-c'><input id='pgRadio"+o+"' value='"+o+"' name='pgRadio' type='radio' /><label for='pgRadio"+o+"'></label></td>",e+="<td><div class='photoGroupName' id=groupName"+o+">"+Fai.encodeHtml(i.name)+"</div></td>",e+="<td><a class='editPhotoGroup' id='editPhotoGroup"+o+"'>编辑</a>&nbsp;&nbsp;</td>",e+="</tr>",e+="</table>",e+="</div>";var a=r.children("div.empty-list");a.length&&a.remove(),r.append(e);var s=f("#pgRadio"+o);s.length&&(s[0].click(),r.scrollTop(0),r.scrollTop(f("#photoGroup"+o).offset().top),n.choicePhotoGroup(),n.editPhotoGroup(),n.setPageChange())}}t.unbind("click").bind("click",function(){var t,e=a.charAt(a.length-1),i=!1,o=2==s?"manage_v2":"manage";""!=e&&"/"!=e&&(i=!0),n.isSite?t=i?a+"/"+o+"/photoGroupEdit.jsp":""+a+o+"/photoGroupEdit.jsp":n.isMobi&&(t=i?a+"/"+o+"/photoGroupEdit.jsp?mobiSettingState=1&crossiframe="+Fai.encodeUrl(Mobi.getPreviewWindow().Mobi.getSiteMultiLanguageUrl()):""+a+o+"/photoGroupEdit.jsp?mobiSettingState=1&crossiframe="+Fai.encodeUrl(Mobi.getPreviewWindow().Mobi.getSiteMultiLanguageUrl())),1==s?Fai.popupWindow({title:"创建图册",frameSrcUrl:t,width:750,height:560,closeFunc:l}):2==s&&Fai.popupWindowVersionTwo.createPopupWindow({title:"创建图册",frameSrcUrl:t,width:860,height:682,closeFunc:l})})},choicePhotoGroup:function t(){var e=this;f("#photoGroupList").off("click.choicePhotoGroup").on("click.choicePhotoGroup",".photoGroup",function(t){0<f(this).length&&f(this).find("input")[0].click(),e.refreshHoverImageList(),t.target!=f(this).find("input")[0]&&t.target!=f(this).find(".editPhotoGroup")[0]&&(e.isSite?Site&&Site.logDog&&Site.logDog(200383,1):e.isMobi&&Mobi&&Mobi.logDog&&Mobi.logDog(200383,1))})},editPhotoGroup:function i(){var s=this,n=s.opts.backUrl,t=f("#photoGroupList"),r=(document.URL.split("/",4).pop(),s.opts.version||1);function l(t){if(t){var e=f.parseJSON(t),i=e.id,o=e.photoList;f("#groupName"+i).text(e.name),o.length&&s.refreshHoverImageList()}}t.off("click.editPhotoGroup").on("click.editPhotoGroup",".editPhotoGroup",function(){var t,e=f(this).attr("id").replace("editPhotoGroup",""),i=n.charAt(n.length-1),o=!1,a=2==r?"manage_v2":"manage";""!=i&&"/"!=i&&(o=!0),s.isSite?t=o?n+"/"+a+"/photoGroupEdit.jsp?id="+e+"&ram="+Math.random():""+n+a+"/photoGroupEdit.jsp?id="+e+"&ram="+Math.random():s.isMobi&&(t=o?n+"/"+a+"/photoGroupEdit.jsp?mobiSettingState=1&crossiframe="+Fai.encodeUrl(Mobi.getPreviewWindow().Mobi.getSiteMultiLanguageUrl())+"&id="+e+"&ram="+Math.random():""+n+a+"/photoGroupEdit.jsp?mobiSettingState=1&crossiframe="+Fai.encodeUrl(Mobi.getPreviewWindow().Mobi.getSiteMultiLanguageUrl())+"&id="+e+"&ram="+Math.random()),1==r?Fai.popupWindow({title:"编辑图册",frameSrcUrl:t,width:750,height:560,frameScrolling:"auto",closeFunc:l}):2==r&&Fai.popupWindowVersionTwo.createPopupWindow({title:"编辑图册",frameSrcUrl:t,width:860,height:682,frameScrolling:"auto",closeFunc:l}),s.isSite?Site&&Site.logDog&&Site.logDog(200383,2):s.isMobi&&Mobi&&Mobi.logDog&&Mobi.logDog(200383,2)})},editPhoto:function o(t){var e=this;e.opts.editPhotoCallback(t),e.photoIdList=[],f("#fk-imgContainer").find(".img-panel").each(function(){e.photoIdList.push(f(this).attr("id"))}),e.setPageChange()},deletePhoto:function a(t){var e=this;f("#"+t).remove();var i=e.photoCount();e.opts.fileUpload2_settings.maxChoiceList++,0==i&&f("#fk-add-photo").show(),f("#fk-photoNumber").text(i),e.photoIdList=[],f("#fk-imgContainer").find(".img-panel").each(function(){e.photoIdList.push(f(this).attr("id"))}),e.opts.deletePhotoCallback(t),e.setPageChange()},sortable:function s(){var t=this;f("#fk-imgContainer").sortable({items:"li",handle:".photoHover",distance:1,axis:"x",change:function e(){t.setPageChange()},stop:function i(){f(".tool4edit-container").remove(),f(".imgDiv table").removeClass("hoverTableClass"),f(".coverLayer").remove(),f(".J_imgPanel:last").hasClass("J_moreImgPanel")||f("#fk-imgContainer").sortable("cancel")},tolerance:"intersect",sort:function r(t,e){var i=f("#fk-imgContainer").parent().width()-50,o=f("#fk-imgContainer").parent(),a=e.offset.left,s=e.position.left,n=f("#fk-imgContainer").width();i<a&&s<n-90&&(o.scrollLeft(o.scrollLeft()+10),f("#fk-imgContainer").sortable("refreshPositions")),a<0&&0<s&&(o.scrollLeft(o.scrollLeft()-10),f("#fk-imgContainer").sortable("refreshPositions"))},placeholder:"photo-placeholder"})},movePhotoEvent:function n(){var t=this;f(".J_imgPanel").on("mousedown.imgSortable",function(){0==t.mouseInHandle&&(f(this).find("#sortableHandle").show(),f(this).find(".J_photoHandle").hide())}).on("mouseup.imgSortable",function(){f(this).find(".J_photoHandle").show(),f(this).find("#sortableHandle").hide()}),f(".J_photoHandle").on("mouseover.imgSortable",function(){t.mouseInHandle=1}).on("mouseout.imgSortable",function(){t.mouseInHandle=0})},fileUpload:function h(){var r=this,l=r.opts.fileUpload2_settings,d=r.opts.imagesLimit;function c(t){if(t){var e=f.parseJSON(t),i=e.data,o=e.data.length,a=[],s=[];if(r.photoCount()+o>d)return void Fai.ing("最大文件数为"+d+"个。",!0);for(var n=0;n<i.length;n++)r.isSite&&(i[n].skipMobiColId=0,i[n].mobiDetail=0),-1<f.inArray(i[n].fileId,r.photoIdList)?(l.maxChoiceList++,Fai.ing("重复的文件已自动覆盖。",!0)):(a.push(i[n].filePath),s.push(i[n].fileId));r.drawImgList(a,s),f("#fk-photoNumber").text(r.photoCount()),l.maxChoiceList=l.maxChoiceList-o,r.isSite?Site.fileUpload2(".fk-uploadButton",l,c):r.isMobi&&Mobi.fileUpload2(".fk-uploadButton",l,c),r.setPageChange()}}r.isSite?Site.fileUpload2(".fk-uploadButton",l,c):r.isMobi&&Mobi.fileUpload2(".fk-uploadButton",l,c)},drawImgList:function c(t,e,i){for(var o=this,a=o.opts.dataStructure,s=(a.length,0);s<t.length;s++){var n="<li id="+e[s]+" class='img-panel J_imgPanel' title=''><div class='photo-border'><div class='photoHover'><div class='sortableHandle' id='sortableHandle'></div><a class='editBut J_photoHandle' title='编辑图片'></a><a class='deleteBut J_photoHandle' title='删除图片'></a></div><table width='100%' height='100%' cellpadding='0' cellspacing='0'><tr><td valign='middle'><img style='display:none;margin:0 auto;' data-origkinal='"+this.opts._resRoot+"/image/template/preview/loadingTmpl.gif' src="+t[s]+"  class='Js_lazyloadimg' onload='Fai.Img.optimize(this, {width:90, height:76, display:0, mode:Fai.Img.MODE_SCALE_DEFLATE_FILL});'/></td></tr></table>   </div></li>";f("#fk-add-photo").before(n);for(var r=0;r<a.length;r++)0!=r&&(1==r?f("#"+e[s]).data(a[r],t[s]):2==r?f("#"+e[s]).data(a[r],i?i[s]:""):3==r?f("#"+e[s]).data(a[r],o.opts.linkType):f("#"+e[s]).data(a[r],""))}f.each(e,function(t,e){f("#"+e+" .editBut").unbind("click").bind("click",function(){o.editPhoto(e)}),f("#"+e+" .deleteBut").unbind("click").bind("click",function(){o.deletePhoto(e)}),f("#"+e).unbind("dblclick").bind("dblclick",function(){o.editPhoto(e)})});var l=o.photoCount();f("#fk-imgContainer").css({overflow:"hidden",width:100*(l+1),"max-width":100*(l+1)}),o.photoIdList=[],f("#fk-imgContainer").find(".img-panel").each(function(){o.photoIdList.push(f(this).attr("id"))}),o.refreshHoverImageList(),o.setPageChange()},refreshHoverImageList:function p(){this.opts.refreshHoverImageCallback()},refreshClickPhoto:function u(){this.opts.addPhotoWayCallback()},photoCount:function g(){return f("#fk-imgContainer").find(".img-panel").length},setPageChange:function v(){this.isSite?Site.setPageChange(!0,this.opts.popupID):this.isMobi&&Mobi.setPageChange(!0,this.opts.popupID)}}),f.fn.extend({faiImageAdd:function b(t){t=t||{};return f(this).each(function(){new r(f(this),t);var i=f(this);i.photoIdList=[],f.fn.faiImageAdd.deletePhoto=function(t){f("#"+t).remove();var e=f("#fk-imgContainer").find(".img-panel").length;0==e&&f("#add-photo").show(),f("#photoNumber").text(e),i.photoIdList=[],f("#fk-imgContainer").find(".img-panel").each(function(){i.photoIdList.push(f(this).attr("id"))})}})}})}(jQuery),function(t,e){"function"==typeof define&&define.amd?define(e):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e():t.Popper=e()}(this,function(){"use strict";var f=window,s={placement:"bottom",gpuAcceleration:!0,offset:0,boundariesElement:"viewport",boundariesPadding:5,preventOverflowOrder:["left","right","top","bottom"],flipBehavior:"flip",arrowElement:"[x-arrow]",modifiers:["shift","offset","preventOverflow","keepTogether","arrow","flip","applyStyle"],modifiersIgnored:[],forceAbsolute:!1,forceFixed:!1};function t(t,e,i){this._reference=t.jquery?t[0]:t,this.state={};var o=null==e,a=e&&"[object Object]"===Object.prototype.toString.call(e);return this._popper=o||a?this.parse(a?e:{}):e.jquery?e[0]:e,this._options=Object.assign({},s,i),this._options.modifiers=this._options.modifiers.map(function(t){if(-1===this._options.modifiersIgnored.indexOf(t))return"applyStyle"===t&&this._popper.setAttribute("x-placement",this._options.placement),this.modifiers[t]||t}.bind(this)),this.state.position=this._getPosition(this._popper,this._reference),n(this._popper,{position:this.state.position,top:0}),this.update(),this._setupEventListeners(),this}function u(t){var e=t.style.display,i=t.style.visibility;t.style.display="block",t.style.visibility="hidden";t.offsetWidth;var o=f.getComputedStyle(t),a=parseFloat(o.marginTop)+parseFloat(o.marginBottom),s=parseFloat(o.marginLeft)+parseFloat(o.marginRight),n={width:t.offsetWidth+s,height:t.offsetHeight+a};return t.style.display=e,t.style.visibility=i,n}function d(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function m(t){var e=Object.assign({},t);return e.right=e.left+e.width,e.bottom=e.top+e.height,e}function a(t,e){var i,o=0;for(i in t){if(t[i]===e)return o;o++}return null}function i(t,e){return f.getComputedStyle(t,null)[e]}function g(t){var e=t.offsetParent;return e!==f.document.body&&e?e:f.document.documentElement}function v(t){var e=t.parentNode;return e?e===f.document?f.document.body.scrollTop?f.document.body:f.document.documentElement:-1!==["scroll","auto"].indexOf(i(e,"overflow"))||-1!==["scroll","auto"].indexOf(i(e,"overflow-x"))||-1!==["scroll","auto"].indexOf(i(e,"overflow-y"))?e:v(t.parentNode):t}function o(t){return t!==f.document.body&&("fixed"===i(t,"position")||(t.parentNode?o(t.parentNode):t))}function n(i,o){function a(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}Object.keys(o).forEach(function(t){var e="";-1!==["width","height","top","right","bottom","left"].indexOf(t)&&a(o[t])&&(e="px"),i.style[t]=o[t]+e})}function r(t){return t&&"[object Function]"==={}.toString.call(t)}function b(t){var e={width:t.offsetWidth,height:t.offsetHeight,left:t.offsetLeft,top:t.offsetTop};return e.right=e.left+e.width,e.bottom=e.top+e.height,e}function l(t){var e=t.getBoundingClientRect(),i=-1!=navigator.userAgent.indexOf("MSIE")&&"HTML"===t.tagName?-t.scrollTop:e.top;return{left:e.left,top:i,right:e.right,bottom:e.bottom,width:e.right-e.left,height:e.bottom-i}}function c(t,e,i){var o=l(t),a=l(e);if(i){var s=v(e);a.top+=s.scrollTop,a.bottom+=s.scrollTop,a.left+=s.scrollLeft,a.right+=s.scrollLeft}return{top:o.top-a.top,left:o.left-a.left,bottom:o.top-a.top+o.height,right:o.left-a.left+o.width,width:o.width,height:o.height}}function h(t){for(var e=["","ms","webkit","moz","o"],i=0;i<e.length;i++){var o=e[i]?e[i]+t.charAt(0).toUpperCase()+t.slice(1):t;if("undefined"!=typeof f.document.body.style[o])return o}return null}return t.prototype.destroy=function(){return this._popper.removeAttribute("x-placement"),this._popper.style.left="",this._popper.style.position="",this._popper.style.top="",this._popper.style[h("transform")]="",this._removeEventListeners(),this._options.removeOnDestroy&&this._popper.remove(),this},t.prototype.update=function(){var t={instance:this,styles:{}};t.placement=this._options.placement,t._originalPlacement=this._options.placement,t.offsets=this._getOffsets(this._popper,this._reference,t.placement),t.boundaries=this._getBoundaries(t,this._options.boundariesPadding,this._options.boundariesElement),t=this.runModifiers(t,this._options.modifiers),"function"==typeof this.state.updateCallback&&this.state.updateCallback(t)},t.prototype.onCreate=function(t){return t(this),this},t.prototype.onUpdate=function(t){return this.state.updateCallback=t,this},t.prototype.parse=function(t){var e={tagName:"div",classNames:["popper"],attributes:[],parent:f.document.body,content:"",contentType:"text",arrowTagName:"div",arrowClassNames:["popper__arrow"],arrowAttributes:["x-arrow"]};t=Object.assign({},e,t);var i=f.document,o=i.createElement(t.tagName);if(n(o,t.classNames),r(o,t.attributes),"node"===t.contentType?o.appendChild(t.content.jquery?t.content[0]:t.content):"html"===t.contentType?o.innerHTML=t.content:o.textContent=t.content,t.arrowTagName){var a=i.createElement(t.arrowTagName);n(a,t.arrowClassNames),r(a,t.arrowAttributes),o.appendChild(a)}var s=t.parent.jquery?t.parent[0]:t.parent;if("string"==typeof s){if(1<(s=i.querySelectorAll(t.parent)).length&&console.warn("WARNING: the given `parent` query("+t.parent+") matched more than one element, the first one will be used"),0===s.length)throw"ERROR: the given `parent` doesn't exists!";s=s[0]}return 1<s.length&&s instanceof Element==!1&&(console.warn("WARNING: you have passed as parent a list of elements, the first one will be used"),s=s[0]),s.appendChild(o),o;function n(e,t){t.forEach(function(t){e.classList.add(t)})}function r(e,t){t.forEach(function(t){e.setAttribute(t.split(":")[0],t.split(":")[1]||"")})}},t.prototype._getPosition=function(t,e){var i=g(e);return this._options.forceAbsolute?"absolute":this._options.forceFixed?"fixed":o(e,i)?"fixed":"absolute"},t.prototype._getOffsets=function(t,e,i){i=i.split("-")[0];var o={};o.position=this.state.position;var a="fixed"===o.position,s=c(e,g(t),a),n=u(t);return-1!==["right","left"].indexOf(i)?(o.top=s.top+s.height/2-n.height/2,o.left="left"===i?s.left-n.width:s.right):(o.left=s.left+s.width/2-n.width/2,o.top="top"===i?s.top-n.height:s.bottom),o.width=n.width,o.height=n.height,{popper:o,reference:s}},t.prototype._setupEventListeners=function(){if(this.state.updateBound=this.update.bind(this),f.addEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement){var t=v(this._reference);t!==f.document.body&&t!==f.document.documentElement||(t=f),t.addEventListener("scroll",this.state.updateBound)}},t.prototype._removeEventListeners=function(){if(f.removeEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement){var t=v(this._reference);t!==f.document.body&&t!==f.document.documentElement||(t=f),t.removeEventListener("scroll",this.state.updateBound)}this.state.updateBound=null},t.prototype._getBoundaries=function(t,e,i){var o,a={};if("window"===i){var s=f.document.body,n=f.document.documentElement;o=Math.max(s.scrollHeight,s.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight),a={top:0,right:Math.max(s.scrollWidth,s.offsetWidth,n.clientWidth,n.scrollWidth,n.offsetWidth),bottom:o,left:0}}else if("viewport"===i){var r=g(this._popper),l=v(this._popper),d=b(r),c=function c(t){return t==document.body?Math.max(document.documentElement.scrollTop,document.body.scrollTop):t.scrollTop},h=function h(t){return t==document.body?Math.max(document.documentElement.scrollLeft,document.body.scrollLeft):t.scrollLeft},p="fixed"===t.offsets.popper.position?0:c(l),u="fixed"===t.offsets.popper.position?0:h(l);a={top:0-(d.top-p),right:f.document.documentElement.clientWidth-(d.left-u),bottom:f.document.documentElement.clientHeight-(d.top-p),left:0-(d.left-u)}}else a=g(this._popper)===i?{top:0,left:0,right:i.clientWidth,bottom:i.clientHeight}:b(i);return a.left+=e,a.right-=e,a.top=a.top+e,a.bottom=a.bottom-e,a},t.prototype.runModifiers=function(e,t,i){var o=t.slice();return i!==undefined&&(o=this._options.modifiers.slice(0,a(this._options.modifiers,i))),o.forEach(function(t){r(t)&&(e=t.call(this,e))}.bind(this)),e},t.prototype.isModifierRequired=function(t,e){var i=a(this._options.modifiers,t);return!!this._options.modifiers.slice(0,i).filter(function(t){return t===e}).length},t.prototype.modifiers={},t.prototype.modifiers.applyStyle=function(t){var e,i={position:t.offsets.popper.position},o=Math.round(t.offsets.popper.left),a=Math.round(t.offsets.popper.top);return this._options.gpuAcceleration&&(e=h("transform"))?(i[e]="translate3d("+o+"px, "+a+"px, 0)",i.top=0,i.left=0):(i.left=o,i.top=a),Object.assign(i,t.styles),n(this._popper,i),this._popper.setAttribute("x-placement",t.placement),this.isModifierRequired(this.modifiers.applyStyle,this.modifiers.arrow)&&t.offsets.arrow&&n(t.arrowElement,t.offsets.arrow),t},t.prototype.modifiers.shift=function(t){var e=t.placement,i=e.split("-")[0],o=e.split("-")[1];if(o){var a=t.offsets.reference,s=m(t.offsets.popper),n={y:{start:{top:a.top},end:{top:a.top+a.height-s.height}},x:{start:{left:a.left},end:{left:a.left+a.width-s.width}}},r=-1!==["bottom","top"].indexOf(i)?"x":"y";t.offsets.popper=Object.assign(s,n[r][o])}return t},t.prototype.modifiers.preventOverflow=function(e){var t=this._options.preventOverflowOrder,i=m(e.offsets.popper),o={left:function a(){var a=i.left;return i.left<e.boundaries.left&&(a=Math.max(i.left,e.boundaries.left)),{left:a}},right:function s(){var t=i.left;return i.right>e.boundaries.right&&(t=Math.min(i.left,e.boundaries.right-i.width)),{left:t}},top:function n(){var n=i.top;return i.top<e.boundaries.top&&(n=Math.max(i.top,e.boundaries.top)),{top:n}},bottom:function r(){var t=i.top;return i.bottom>e.boundaries.bottom&&(t=Math.min(i.top,e.boundaries.bottom-i.height)),{top:t}}};return t.forEach(function(t){e.offsets.popper=Object.assign(i,o[t]())}),e},t.prototype.modifiers.keepTogether=function(t){var e=m(t.offsets.popper),i=t.offsets.reference,o=Math.floor;return e.right<o(i.left)&&(t.offsets.popper.left=o(i.left)-e.width),e.left>o(i.right)&&(t.offsets.popper.left=o(i.right)),e.bottom<o(i.top)&&(t.offsets.popper.top=o(i.top)-e.height),e.top>o(i.bottom)&&(t.offsets.popper.top=o(i.bottom)),t},t.prototype.modifiers.flip=function(a){if(!this.isModifierRequired(this.modifiers.flip,this.modifiers.preventOverflow))return console.warn("WARNING: preventOverflow modifier is required by flip modifier in order to work, be sure to include it before flip!"),a;if(a.flipped&&a.placement===a._originalPlacement)return a;var s=a.placement.split("-")[0],n=d(s),r=a.placement.split("-")[1]||"",l=[];return(l="flip"===this._options.flipBehavior?[s,n]:this._options.flipBehavior).forEach(function(t,e){if(s===t&&l.length!==e+1){s=a.placement.split("-")[0],n=d(s);var i=m(a.offsets.popper),o=-1!==["right","bottom"].indexOf(s);(o&&Math.floor(a.offsets.reference[s])>Math.floor(i[n])||!o&&Math.floor(a.offsets.reference[s])<Math.floor(i[n]))&&(a.flipped=!0,a.placement=l[e+1],r&&(a.placement+="-"+r),a.offsets.popper=this._getOffsets(this._popper,this._reference,a.placement).popper,a=this.runModifiers(a,this._options.modifiers,this._flip))}}.bind(this)),a},t.prototype.modifiers.offset=function(t){var e=this._options.offset,i=t.offsets.popper;return-1!==t.placement.indexOf("left")?i.top-=e:-1!==t.placement.indexOf("right")?i.top+=e:-1!==t.placement.indexOf("top")?i.left-=e:-1!==t.placement.indexOf("bottom")&&(i.left+=e),t},t.prototype.modifiers.arrow=function(t){var e=this._options.arrowElement;if("string"==typeof e&&(e=this._popper.querySelector(e)),!e)return t;if(!this._popper.contains(e))return console.warn("WARNING: `arrowElement` must be child of its popper element!"),t;if(!this.isModifierRequired(this.modifiers.arrow,this.modifiers.keepTogether))return console.warn("WARNING: keepTogether modifier is required by arrow modifier in order to work, be sure to include it before arrow!"),t;var i={},o=t.placement.split("-")[0],a=m(t.offsets.popper),s=t.offsets.reference,n=-1!==["left","right"].indexOf(o),r=n?"height":"width",l=n?"top":"left",d=n?"left":"top",c=n?"bottom":"right",h=u(e)[r];s[c]-h<a[l]&&(t.offsets.popper[l]-=a[l]-(s[c]-h)),s[l]+h>a[c]&&(t.offsets.popper[l]+=s[l]+h-a[c]);var p=s[l]+s[r]/2-h/2-a[l];return p=Math.max(Math.min(a[r]-h-3,p),3),i[l]=p,i[d]="",t.offsets.arrow=i,t.arrowElement=e,t},Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function p(t){if(t===undefined||null===t)throw new TypeError("Cannot convert first argument to object");for(var e=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o!==undefined&&null!==o){o=Object(o);for(var a=Object.keys(o),s=0,n=a.length;s<n;s++){var r=a[s],l=Object.getOwnPropertyDescriptor(o,r);l!==undefined&&l.enumerable&&(e[r]=o[r])}}}return e}}),t}),function sortableModule(t){"use strict";"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=t():window.Sortable=t()}(function sortableFactory(){"use strict";if("undefined"==typeof window||!window.document)return function pt(){throw new Error("Sortable.js requires a window with a document")};var k,x,P,S,F,I,h,g,v,b,D,E,T,d,o,N,M,c,l,L,t,y={},a=/\s+/g,$=/left|right|inline/,O="Sortable"+(new Date).getTime(),_=window,p=_.document,s=_.parseInt,A=_.setTimeout,e=_.jQuery||_.Zepto,i=_.Polymer,n=!1,B=!1,r="draggable"in p.createElement("div"),u=!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)&&((t=p.createElement("x")).style.cssText="pointer-events:auto","auto"===t.style.pointerEvents),j=!1,w=Math.abs,f=Math.min,m=[],C=[],z=nt(function(t,e,i){if(i&&e.scroll){var o,a,s,n,r,l,d=i[O],c=e.scrollSensitivity,h=e.scrollSpeed,p=t.clientX,u=t.clientY,f=window.innerWidth,m=window.innerHeight;if(v!==i&&(g=e.scroll,v=i,b=e.scrollFn,!0===g)){g=i;do{if(g.offsetWidth<g.scrollWidth||g.offsetHeight<g.scrollHeight)break}while(g=g.parentNode)}g&&(a=(o=g).getBoundingClientRect(),s=(w(a.right-p)<=c)-(w(a.left-p)<=c),n=(w(a.bottom-u)<=c)-(w(a.top-u)<=c)),s||n||(n=(m-u<=c)-(u<=c),((s=(f-p<=c)-(p<=c))||n)&&(o=_)),y.vx===s&&y.vy===n&&y.el===o||(y.el=o,y.vx=s,y.vy=n,clearInterval(y.pid),o&&(y.pid=setInterval(function(){if(l=n?n*h:0,r=s?s*h:0,"function"==typeof b)return b.call(d,r,l,t);o===_?_.scrollTo(_.pageXOffset+r,_.pageYOffset+l):(o.scrollTop+=l,o.scrollLeft+=r)},24)))}},30),H=function H(t){function e(o,a){return void 0!==o&&!0!==o||(o=i.name),"function"==typeof o?o:function(t,e){var i=e.options.group.name;return a?o:o&&(o.join?-1<o.indexOf(i):i==o)}}var i={},o=t.group;o&&"object"==_typeof(o)||(o={name:o}),i.name=o.name,i.checkPull=e(o.pull,!0),i.checkPut=e(o.put),i.revertClone=o.revertClone,t.group=i};try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function ut(){n={capture:!(B=!0),passive:B}}}))}catch(ft){}function W(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(t);this.el=t,this.options=e=rt({},e),t[O]=this;var i={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function s(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==W.supportPointer};for(var o in i)o in e||(e[o]=i[o]);for(var a in H(e),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!e.forceFallback&&r,G(t,"mousedown",this._onTapStart),G(t,"touchstart",this._onTapStart),e.supportPointer&&G(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(G(t,"dragover",this),G(t,"dragenter",this)),C.push(this._onDragOver),e.store&&this.sort(e.store.get(this))}function Y(t,e){"clone"!==t.lastPullMode&&(e=!0),S&&S.state!==e&&(U(S,"display",e?"none":""),e||S.state&&(t.options.group.revertClone?(F.insertBefore(S,I),t._animate(k,S)):F.insertBefore(S,k)),S.state=e)}function R(t,e,i){if(t){i=i||p;do{if(">*"===e&&t.parentNode===i||st(t,e))return t}while(t=V(t))}return null}function V(t){var e=t.host;return e&&e.nodeType?e:t.parentNode}function X(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),B||t.preventDefault()}function G(t,e,i){t.addEventListener(e,i,n)}function K(t,e,i){t.removeEventListener(e,i,n)}function q(t,e,i){if(t)if(t.classList)t.classList[i?"add":"remove"](e);else{var o=(" "+t.className+" ").replace(a," ").replace(" "+e+" "," ");t.className=(o+(i?" "+e:"")).replace(a," ")}}function U(t,e,i){var o=t&&t.style;if(o){if(void 0===i)return p.defaultView&&p.defaultView.getComputedStyle?i=p.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),void 0===e?i:i[e];e in o||(e="-webkit-"+e),o[e]=i+("string"==typeof i?"":"px")}}function Q(t,e,i){if(t){var o=t.getElementsByTagName(e),a=0,s=o.length;if(i)for(;a<s;a++)i(o[a],a);return o}return[]}function J(t,e,i,o,a,s,n,r){t=t||e[O];var l=p.createEvent("Event"),d=t.options,c="on"+i.charAt(0).toUpperCase()+i.substr(1);l.initEvent(i,!0,!0),l.to=a||e,l.from=s||e,l.item=o||e,l.clone=S,l.oldIndex=n,l.newIndex=r,e.dispatchEvent(l),d[c]&&d[c].call(t,l)}function Z(t,e,i,o,a,s,n,r){var l,d,c=t[O],h=c.options.onMove;return(l=p.createEvent("Event")).initEvent("move",!0,!0),l.to=e,l.from=t,l.dragged=i,l.draggedRect=o,l.related=a||e,l.relatedRect=s||e.getBoundingClientRect(),l.willInsertAfter=r,t.dispatchEvent(l),h&&(d=h.call(c,l,n)),d}function tt(t){t.draggable=!1}function et(){j=!1}function it(t,e){var i=t.lastElementChild.getBoundingClientRect();return 5<e.clientY-(i.top+i.height)||5<e.clientX-(i.left+i.width)}function ot(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,o=0;i--;)o+=e.charCodeAt(i);return o.toString(36)}function at(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t&&t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||">*"!==e&&!st(t,e)||i++;return i}function st(t,e){if(t){var i=(e=e.split(".")).shift().toUpperCase(),o=new RegExp("\\s("+e.join("|")+")(?=\\s)","g");return!(""!==i&&t.nodeName.toUpperCase()!=i||e.length&&((" "+t.className+" ").match(o)||[]).length!=e.length)}return!1}function nt(t,e){var i,o;return function(){void 0===i&&(i=arguments,o=this,A(function(){1===i.length?t.call(o,i[0]):t.apply(o,i),i=void 0},e))}}function rt(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function lt(t){return i&&i.dom?i.dom(t).cloneNode(!0):e?e(t).clone(!0)[0]:t.cloneNode(!0)}function dt(t){for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var o=e[i];o.checked&&m.push(o)}}function ct(t){return A(t,0)}function ht(t){return clearTimeout(t)}return W.prototype={constructor:W,_onTapStart:function mt(t){var e,i=this,o=this.el,a=this.options,s=a.preventOnFilter,n=t.type,r=t.touches&&t.touches[0],l=(r||t).target,d=t.target.shadowRoot&&t.path&&t.path[0]||l,c=a.filter;if(dt(o),!k&&!(/mousedown|pointerdown/.test(n)&&0!==t.button||a.disabled)&&!d.isContentEditable&&(l=R(l,a.draggable,o))&&h!==l){if(e=at(l,a.draggable),"function"==typeof c){if(c.call(this,t,l,this))return J(i,d,"filter",l,o,o,e),void(s&&t.preventDefault())}else if(c=c&&c.split(",").some(function(t){if(t=R(d,t.trim(),o))return J(i,t,"filter",l,o,o,e),!0}))return void(s&&t.preventDefault());a.handle&&!R(d,a.handle,o)||this._prepareDragStart(t,r,l,e)}},_prepareDragStart:function gt(t,e,i,o){var a,s=this,n=s.el,r=s.options,l=n.ownerDocument;i&&!k&&i.parentNode===n&&(c=t,F=n,x=(k=i).parentNode,I=k.nextSibling,h=i,N=r.group,d=o,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,k.style["will-change"]="all",a=function a(){s._disableDelayedDrag(),k.draggable=s.nativeDraggable,q(k,r.chosenClass,!0),s._triggerDragStart(t,e),J(s,F,"choose",k,F,F,d)},r.ignore.split(",").forEach(function(t){Q(k,t.trim(),tt)}),G(l,"mouseup",s._onDrop),G(l,"touchend",s._onDrop),G(l,"touchcancel",s._onDrop),G(l,"selectstart",s),r.supportPointer&&G(l,"pointercancel",s._onDrop),r.delay?(G(l,"mouseup",s._disableDelayedDrag),G(l,"touchend",s._disableDelayedDrag),G(l,"touchcancel",s._disableDelayedDrag),G(l,"mousemove",s._disableDelayedDrag),G(l,"touchmove",s._disableDelayedDrag),r.supportPointer&&G(l,"pointermove",s._disableDelayedDrag),s._dragStartTimer=A(a,r.delay)):a())},_disableDelayedDrag:function vt(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),K(t,"mouseup",this._disableDelayedDrag),K(t,"touchend",this._disableDelayedDrag),K(t,"touchcancel",this._disableDelayedDrag),K(t,"mousemove",this._disableDelayedDrag),K(t,"touchmove",this._disableDelayedDrag),K(t,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function bt(t,e){(e=e||("touch"==t.pointerType?t:null))?(c={target:k,clientX:e.clientX,clientY:e.clientY},this._onDragStart(c,"touch")):this.nativeDraggable?(G(k,"dragend",this),G(F,"dragstart",this._onDragStart)):this._onDragStart(c,!0);try{p.selection?ct(function(){p.selection.empty()}):window.getSelection().removeAllRanges()}catch(ft){}},_dragStarted:function yt(){if(F&&k){var t=this.options;q(k,t.ghostClass,!0),q(k,t.dragClass,!1),J(W.active=this,F,"start",k,F,F,d)}else this._nulling()},_emulateDragOver:function _t(){if(l){if(this._lastX===l.clientX&&this._lastY===l.clientY)return;this._lastX=l.clientX,this._lastY=l.clientY,u||U(P,"display","none");var t=p.elementFromPoint(l.clientX,l.clientY),e=t,i=C.length;if(t&&t.shadowRoot&&(e=t=t.shadowRoot.elementFromPoint(l.clientX,l.clientY)),e)do{if(e[O]){for(;i--;)C[i]({clientX:l.clientX,clientY:l.clientY,target:t,rootEl:e});break}t=e}while(e=e.parentNode);u||U(P,"display","")}},_onTouchMove:function wt(t){if(c){var e=this.options,i=e.fallbackTolerance,o=e.fallbackOffset,a=t.touches?t.touches[0]:t,s=a.clientX-c.clientX+o.x,n=a.clientY-c.clientY+o.y,r=t.touches?"translate3d("+s+"px,"+n+"px,0)":"translate("+s+"px,"+n+"px)";if(!W.active){if(i&&f(w(a.clientX-this._lastX),w(a.clientY-this._lastY))<i)return;this._dragStarted()}this._appendGhost(),L=!0,l=a,U(P,"webkitTransform",r),U(P,"mozTransform",r),U(P,"msTransform",r),U(P,"transform",r)}},_appendGhost:function Ct(){if(!P){var t,e=k.getBoundingClientRect(),i=U(k),o=this.options;q(P=k.cloneNode(!0),o.ghostClass,!1),q(P,o.fallbackClass,!0),q(P,o.dragClass,!0),U(P,"top",e.top-s(i.marginTop,10)),U(P,"left",e.left-s(i.marginLeft,10)),U(P,"width",e.width),U(P,"height",e.height),U(P,"opacity","0.8"),U(P,"position","fixed"),U(P,"zIndex","100000"),U(P,"pointerEvents","none"),o.fallbackOnBody&&p.body.appendChild(P)||F.appendChild(P),t=P.getBoundingClientRect(),U(P,"width",2*e.width-t.width),U(P,"height",2*e.height-t.height)}},_onDragStart:function kt(t,e){var i=this,o=t.dataTransfer,a=i.options;i._offUpEvents(),N.checkPull(i,i,k,t)&&((S=lt(k)).draggable=!1,S.style["will-change"]="",U(S,"display","none"),q(S,i.options.chosenClass,!1),i._cloneId=ct(function(){F.insertBefore(S,k),J(i,F,"clone",k)})),q(k,a.dragClass,!0),e?("touch"===e?(G(p,"touchmove",i._onTouchMove),G(p,"touchend",i._onDrop),G(p,"touchcancel",i._onDrop),a.supportPointer&&(G(p,"pointermove",i._onTouchMove),G(p,"pointerup",i._onDrop))):(G(p,"mousemove",i._onTouchMove),G(p,"mouseup",i._onDrop)),i._loopId=setInterval(i._emulateDragOver,50)):(o&&(o.effectAllowed="move",a.setData&&a.setData.call(i,o,k)),G(p,"drop",i),i._dragStartId=ct(i._dragStarted))},_onDragOver:function xt(t){var e,i,o,a,s=this.el,n=this.options,r=n.group,l=W.active,d=N===r,c=!1,h=n.sort;if(void 0!==t.preventDefault&&(B||t.preventDefault(),n.dragoverBubble||t.stopPropagation()),!k.animated&&(L=!0,l&&!n.disabled&&(d?h||(a=!F.contains(k)):M===this||(l.lastPullMode=N.checkPull(this,l,k,t))&&r.checkPut(this,l,k,t))&&(void 0===t.rootEl||t.rootEl===this.el))){if(z(t,n,this.el),j)return;if(e=R(t.target,n.draggable,s),i=k.getBoundingClientRect(),M!==this&&(M=this,c=!0),a)return Y(l,!0),x=F,void(S||I?F.insertBefore(k,S||I):h||F.appendChild(k));if(0===s.children.length||s.children[0]===P||s===t.target&&it(s,t)){if(0!==s.children.length&&s.children[0]!==P&&s===t.target&&(e=s.lastElementChild),e){if(e.animated)return;o=e.getBoundingClientRect()}Y(l,d),!1!==Z(F,s,k,i,e,o,t)&&(k.contains(s)||(s.appendChild(k),x=s),this._animate(i,k),e&&this._animate(o,e))}else if(e&&!e.animated&&e!==k&&void 0!==e.parentNode[O]){D!==e&&(E=U(D=e),T=U(e.parentNode));var p=(o=e.getBoundingClientRect()).right-o.left,u=o.bottom-o.top,f=$.test(E.cssFloat+E.display)||"flex"==T.display&&0===T["flex-direction"].indexOf("row"),m=e.offsetWidth>k.offsetWidth,g=e.offsetHeight>k.offsetHeight,v=.5<(f?(t.clientX-o.left)/p:(t.clientY-o.top)/u),b=e.nextElementSibling,y=!1;if(f){var _=k.offsetTop,w=e.offsetTop;y=_===w?e.previousElementSibling===k&&!m||v&&m:e.previousElementSibling===k||k.previousElementSibling===e?.5<(t.clientY-o.top)/u:_<w}else c||(y=b!==k&&!g||v&&g);var C=Z(F,s,k,i,e,o,t,y);!1!==C&&(1!==C&&-1!==C||(y=1===C),j=!0,A(et,30),Y(l,d),k.contains(s)||(y&&!b?s.appendChild(k):e.parentNode.insertBefore(k,y?b:e)),x=k.parentNode,this._animate(i,k),this._animate(o,e))}}},_animate:function Pt(t,e){var i=this.options.animation;if(i){var o=e.getBoundingClientRect();1===t.nodeType&&(t=t.getBoundingClientRect()),U(e,"transition","none"),U(e,"transform","translate3d("+(t.left-o.left)+"px,"+(t.top-o.top)+"px,0)"),e.offsetWidth,U(e,"transition","all "+i+"ms"),U(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=A(function(){U(e,"transition",""),U(e,"transform",""),e.animated=!1},i)}},_offUpEvents:function St(){var t=this.el.ownerDocument;K(p,"touchmove",this._onTouchMove),K(p,"pointermove",this._onTouchMove),K(t,"mouseup",this._onDrop),K(t,"touchend",this._onDrop),K(t,"pointerup",this._onDrop),K(t,"touchcancel",this._onDrop),K(t,"pointercancel",this._onDrop),K(t,"selectstart",this)},_onDrop:function Ft(t){var e=this.el,i=this.options;clearInterval(this._loopId),clearInterval(y.pid),clearTimeout(this._dragStartTimer),ht(this._cloneId),ht(this._dragStartId),K(p,"mouseover",this),K(p,"mousemove",this._onTouchMove),this.nativeDraggable&&(K(p,"drop",this),K(e,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(L&&(B||t.preventDefault(),i.dropBubble||t.stopPropagation()),P&&P.parentNode&&P.parentNode.removeChild(P),F!==x&&"clone"===W.active.lastPullMode||S&&S.parentNode&&S.parentNode.removeChild(S),k&&(this.nativeDraggable&&K(k,"dragend",this),tt(k),k.style["will-change"]="",q(k,this.options.ghostClass,!1),q(k,this.options.chosenClass,!1),J(this,F,"unchoose",k,x,F,d),F!==x?0<=(o=at(k,i.draggable))&&(J(null,x,"add",k,x,F,d,o),J(this,F,"remove",k,x,F,d,o),J(null,x,"sort",k,x,F,d,o),J(this,F,"sort",k,x,F,d,o)):k.nextSibling!==I&&0<=(o=at(k,i.draggable))&&(J(this,F,"update",k,x,F,d,o),J(this,F,"sort",k,x,F,d,o)),W.active&&(null!=o&&-1!==o||(o=d),J(this,F,"end",k,x,F,d,o),this.save()))),this._nulling()},_nulling:function It(){F=k=x=P=I=S=h=g=v=c=l=L=o=D=E=M=N=W.active=null,m.forEach(function(t){t.checked=!0}),m.length=0},handleEvent:function Dt(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragover":case"dragenter":k&&(this._onDragOver(t),X(t));break;case"mouseover":this._onDrop(t);break;case"selectstart":t.preventDefault()}},toArray:function Et(){for(var t,e=[],i=this.el.children,o=0,a=i.length,s=this.options;o<a;o++)R(t=i[o],s.draggable,this.el)&&e.push(t.getAttribute(s.dataIdAttr)||ot(t));return e},sort:function Tt(t){var o={},a=this.el;this.toArray().forEach(function(t,e){var i=a.children[e];R(i,this.options.draggable,a)&&(o[t]=i)},this),t.forEach(function(t){o[t]&&(a.removeChild(o[t]),a.appendChild(o[t]))})},save:function Nt(){var t=this.options.store;t&&t.set(this)},closest:function Mt(t,e){return R(t,e||this.options.draggable,this.el)},option:function Lt(t,e){var i=this.options;if(void 0===e)return i[t];i[t]=e,"group"===t&&H(i)},destroy:function $t(){var t=this.el;t[O]=null,K(t,"mousedown",this._onTapStart),K(t,"touchstart",this._onTapStart),K(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(K(t,"dragover",this),K(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),C.splice(C.indexOf(this._onDragOver),1),this._onDrop(),this.el=t=null}},G(p,"touchmove",function(t){W.active&&t.preventDefault()}),W.utils={on:G,off:K,css:U,find:Q,is:function Ot(t,e){return!!R(t,e,t)},extend:rt,throttle:nt,closest:R,toggleClass:q,clone:lt,index:at,nextTick:ct,cancelNextTick:ht},W.create=function(t,e){return new W(t,e)},W.version="1.6.1",W}),function(t,e){"function"==typeof define&&define.amd?define(e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e():t.ResizeSensor=e()}("undefined"!=typeof window?window:this,function(){if("undefined"==typeof window)return null;var _=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)};function a(t,e){var i=Object.prototype.toString.call(t),o="[object Array]"===i||"[object NodeList]"===i||"[object HTMLCollection]"===i||"[object Object]"===i||"undefined"!=typeof jQuery&&t instanceof jQuery||"undefined"!=typeof Elements&&t instanceof Elements,a=0,s=t.length;if(o)for(;a<s;a++)e(t[a]);else e(t)}function w(t){if(!t.getBoundingClientRect)return{width:t.offsetWidth,height:t.offsetHeight};var e=t.getBoundingClientRect();return{width:Math.round(e.width),height:Math.round(e.height)}}var s=function s(e,i){function y(){var i,o,a=[];this.add=function(t){a.push(t)},this.call=function(){for(i=0,o=a.length;i<o;i++)a[i].call()},this.remove=function(t){var e=[];for(i=0,o=a.length;i<o;i++)a[i]!==t&&e.push(a[i]);a=e},this.length=function(){return a.length}}function o(o,t){if(o)if(o.resizedAttached)o.resizedAttached.add(t);else{o.resizedAttached=new y,o.resizedAttached.add(t),o.resizeSensor=document.createElement("div"),o.resizeSensor.dir="ltr",o.resizeSensor.className="resize-sensor";var e="position: absolute; left: -10px; top: -10px; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",i="position: absolute; left: 0; top: 0; transition: 0s;";o.resizeSensor.style.cssText=e,o.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+e+'"><div style="'+i+'"></div></div><div class="resize-sensor-shrink" style="'+e+'"><div style="'+i+' width: 200%; height: 200%"></div></div>',o.appendChild(o.resizeSensor);var a=window.getComputedStyle(o).getPropertyValue("position");"absolute"!==a&&"relative"!==a&&"fixed"!==a&&(o.style.position="relative");var s,n,r,l,d=o.resizeSensor.childNodes[0],c=d.childNodes[0],h=o.resizeSensor.childNodes[1],p=w(o),u=p.width,f=p.height,m=function m(){var t=0===o.offsetWidth&&0===o.offsetHeight;if(t){var e=o.style.display;o.style.display="block"}c.style.width="100000px",c.style.height="100000px",d.scrollLeft=1e5,d.scrollTop=1e5,h.scrollLeft=1e5,h.scrollTop=1e5,t&&(o.style.display=e)};o.resizeSensor.resetSensor=m;var g=function g(){n=0,s&&(u=r,f=l,o.resizedAttached&&o.resizedAttached.call())},v=function v(){var t=w(o),e=t.width,i=t.height;(s=e!=u||i!=f)&&!n&&(n=_(g)),m()},b=function b(t,e,i){t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener(e,i)};b(d,"scroll",v),b(h,"scroll",v),_(m)}}a(e,function(t){o(t,i)}),this.detach=function(t){s.detach(e,t)},this.reset=function(){e.resizeSensor.resetSensor()}};return s.reset=function(t,e){a(t,function(t){t.resizeSensor.resetSensor()})},s.detach=function(t,e){a(t,function(t){t&&(t.resizedAttached&&"function"==typeof e&&(t.resizedAttached.remove(e),t.resizedAttached.length())||t.resizeSensor&&(t.contains(t.resizeSensor)&&t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached))})},s}),function(h,g,p,r){var t="ontouchstart"in p,u=function(){var t=p.createElement("div"),e=p.documentElement;if(!("pointerEvents"in t.style))return!1;t.style.pointerEvents="auto",t.style.pointerEvents="x",e.appendChild(t);var i=g.getComputedStyle&&"auto"===g.getComputedStyle(t,"").pointerEvents;return e.removeChild(t),!!i}(),i={listNodeName:"ol",itemNodeName:"li",rootClass:"dd",listClass:"dd-list",itemClass:"dd-item",dragClass:"dd-dragel",handleClass:"dd-handle",collapsedClass:"dd-collapsed",placeClass:"dd-placeholder",noDragClass:"dd-nodrag",emptyClass:"dd-empty",dragDisableClass:"dd-drag-disabled",dropDisableClass:"dd-drop-disabled",expandBtnHTML:'<button class="dd-expand" data-action="expand" type="button">Expand</button>',collapseBtnHTML:'<button class="dd-collapse" data-action="collapse" type="button">Collapse</button>',group:0,maxDepth:5,threshold:20,dragSortable:!0},v={};function o(t,e){this.w=h(p),this.el=h(t),this.options=h.extend({},i,e),this.init()}function e(t,e){var i,o;return function(){void 0===i&&(i=arguments,o=this,setTimeout(function(){1===i.length?t.call(o,i[0]):t.apply(o,i),i=void 0},e))}}_autoScroll=e(function(t,e,i){if(i){var o,a,s,n,r,l,d,c=30,h=3,p=t.clientX,u=t.clientY,f=g.innerWidth,m=g.innerHeight;if(!(d=(o=i).parentsUntil(".jz-table",".scrollbar-wrap")).length)return;a=d[0].getBoundingClientRect(),s=(Math.abs(a.right-p)<=c)-(Math.abs(a.left-p)<=c),n=(Math.abs(a.bottom-u)<=c)-(Math.abs(a.top-u)<=c),s||n||(n=(m-u<=c)-(u<=c),((s=(f-p<=c)-(p<=c))||n)&&(o=g)),v.vx===s&&v.vy===n&&v.el===o||(v.el=o,v.vx=s,v.vy=n,clearInterval(v.pid),o&&(v.pid=setInterval(function(){l=n?n*h:0,r=s?s*h:0,o===g?g.scrollTo(g.pageXOffset+r,g.pageYOffset+l):(d[0].scrollTop+=l,d[0].scrollLeft+=r)},24)))}},30),o.prototype={init:function s(){var a=this;a.reset(),a.el.data("nestable-group",this.options.group),a.placeEl=h('<div class="'+a.options.placeClass+'"/>'),a.el.on("click","button",function(t){if(!a.dragEl){var e=h(t.currentTarget),i=e.data("action"),o=e.parent(a.options.itemNodeName);"collapse"===i&&a.collapseItem(o),"expand"===i&&a.expandItem(o)}});var o=function o(t){var e=h(t.target),i=e.attr("class");if(void 0!==i&&!(-1<i.indexOf("jz-sort")||-1<i.indexOf("jz-checkbox")||-1<i.indexOf("jz-radio")||-1<i.indexOf("jz-input")||-1<i.indexOf("jz-table-event-initial")||-1<i.indexOf("jz-select")||-1<i.indexOf("tag-delete"))){if(!e.hasClass(a.options.handleClass)){if(e.closest("."+a.options.noDragClass).length)return;e=e.closest("."+a.options.handleClass)}e.length&&!a.dragEl&&(e.parent("."+a.options.itemClass).hasClass(a.options.dragDisableClass)||(a.isTouch=/^touch/.test(t.type),a.isTouch&&1!==t.touches.length||(t.preventDefault(),a.dragStart(t.touches?t.touches[0]:t))))}},e=function e(t){a.dragEl&&(t.preventDefault(),a.dragMove(t.touches?t.touches[0]:t))},i=function i(t){a.dragEl&&(t.preventDefault(),a.dragStop(t.touches?t.touches[0]:t))};a.options.dragSortable&&(t&&(a.el[0].addEventListener("touchstart",o,!1),g.addEventListener("touchmove",e,!1),g.addEventListener("touchend",i,!1),g.addEventListener("touchcancel",i,!1)),a.el.off("mousedown.nestable-d").on("mousedown.nestable-d",o),a.w.off("mousedown.nestable-m").on("mousemove.nestable-m",e),a.w.off("mousedown.nestable-u").on("mouseup.nestable-u",i))},serialize:function a(){var i,t=0,s=this;function e(t,e){return i.apply(this,arguments)}return step=(i=function(t,o){var a=[];return t.children(s.options.itemNodeName+":not(.J-expand-row)").each(function(){var t=h(this),e=h.extend({},JSON.parse(t.attr("data-id"))),i=t.children(s.options.listNodeName);i.length&&(e.children=step(i,o+1)),a.push(e)}),a},e.toString=function(){return i.toString()},e),step(s.el.find(s.options.listNodeName).first(),t)},serialise:function n(){return this.serialize()},reset:function l(){this.mouse={offsetX:0,offsetY:0,startX:0,startY:0,lastX:0,lastY:0,nowX:0,nowY:0,distX:0,distY:0,dirAx:0,dirX:0,dirY:0,lastDirX:0,lastDirY:0,distAxX:0,distAxY:0},this.isTouch=!1,this.moving=!1,this.dragEl=null,this.dragRootEl=null,this.dragDepth=0,this.hasNewRoot=!1,this.pointEl=null,this._collapsed=!1,clearInterval(v.pid)},expandItem:function d(t){t.removeClass(this.options.collapsedClass),t.children('[data-action="expand"]').hide(),t.children('[data-action="collapse"]').show(),t.children(this.options.listNodeName).show()},collapseItem:function c(t){t.children(this.options.listNodeName).length&&(t.addClass(this.options.collapsedClass),t.children('[data-action="collapse"]').hide(),t.children('[data-action="expand"]').show(),t.children(this.options.listNodeName).hide())},expandAll:function f(){var t=this;t.el.find(t.options.itemNodeName).each(function(){t.expandItem(h(this))})},collapseAll:function m(){var t=this;t.el.find(t.options.itemNodeName).each(function(){t.collapseItem(h(this))})},setParent:function b(t){!t.children(this.options.listNodeName).length||t.children(".dd-expand").length||t.children(".dd-collapse").length||(t.prepend(h(this.options.expandBtnHTML)),t.prepend(h(this.options.collapseBtnHTML))),t.children('[data-action="expand"]').hide()},unsetParent:function y(t){t.removeClass(this.options.collapsedClass),t.children("[data-action]").remove(),t.children(this.options.listNodeName).remove()},dragStart:function _(t){var e=this.mouse,i=h(t.target),o=i.closest(this.options.itemNodeName);o.find(".dd-collapse").is(":hidden")&&(this._collapsed=!0),this.collapseItem(o),this.placeEl.css("height",o.height()),e.offsetX=t.offsetX!==r?t.offsetX:t.pageX-i.offset().left,e.offsetY=t.offsetY!==r?t.offsetY:t.pageY-i.offset().top,e.startX=e.lastX=t.pageX,e.startY=e.lastY=t.pageY,this.dragRootEl=this.el,this.dragEl=h(p.createElement(this.options.listNodeName)).addClass(this.options.listClass+" "+this.options.dragClass),this.dragEl.css("width",o.width()),o.after(this.placeEl),o[0].parentNode.removeChild(o[0]),o.appendTo(this.dragEl),h(p.body).append(this.dragEl),this.dragEl.css({left:t.pageX-e.offsetX,top:t.pageY-e.offsetY});var a,s,n=this.dragEl.find(this.options.itemNodeName);for(a=0;a<n.length;a++)(s=h(n[a]).parents(this.options.listNodeName).length)>this.dragDepth&&(this.dragDepth=s);1<s&&this.dragEl.addClass("dd-multiShadow")},dragStop:function w(t){var e=this.dragEl.children(this.options.itemNodeName).first();e[0].parentNode.removeChild(e[0]),this.placeEl.replaceWith(e),this.dragEl.remove(),this.el.trigger("drag-change"),this.hasNewRoot&&this.dragRootEl.trigger("drag-change"),this._collapsed||this.expandItem(e),this.reset(),e.removeClass("dd-multiShadow")},dragMove:function C(t){var e,i,o,a=this.options,s=this.mouse;this.dragEl.css({left:t.pageX-s.offsetX,top:t.pageY-s.offsetY}),s.lastX=s.nowX,s.lastY=s.nowY,s.nowX=t.pageX,s.nowY=t.pageY,s.distX=s.nowX-s.lastX,s.distY=s.nowY-s.lastY,s.lastDirX=s.dirX,s.lastDirY=s.dirY,s.dirX=0===s.distX?0:0<s.distX?1:-1,s.dirY=0===s.distY?0:0<s.distY?1:-1;var n=Math.abs(s.distX)>Math.abs(s.distY)?1:0;if(!s.moving)return s.dirAx=n,void(s.moving=!0);_autoScroll(t,a,this.el),s.dirAx!==n?(s.distAxX=0,s.distAxY=0):(s.distAxX+=Math.abs(s.distX),0!==s.dirX&&s.dirX!==s.lastDirX&&(s.distAxX=0),s.distAxY+=Math.abs(s.distY),0!==s.dirY&&s.dirY!==s.lastDirY&&(s.distAxY=0)),s.dirAx=n,s.dirAx&&s.distAxX>=a.threshold&&(s.distAxX=0,o=this.placeEl.prev(a.itemNodeName),0<s.distX&&o.length&&!o.hasClass(a.collapsedClass)&&(e=o.find(a.listNodeName).last(),this.placeEl.parents(a.listNodeName).length+this.dragDepth<=a.maxDepth&&(e.length?(e=o.children(a.listNodeName).last()).append(this.placeEl):((e=h("<"+a.listNodeName+"/>").addClass(a.listClass)).append(this.placeEl),o.append(e),this.setParent(o)))),s.distX<0&&(this.placeEl.next(a.itemNodeName),i=this.placeEl.parent(),this.placeEl.closest(a.itemNodeName).after(this.placeEl),i.children().length||this.unsetParent(i.parent())));var r=!1;if(u||(this.dragEl[0].style.visibility="hidden"),this.pointEl=h(p.elementFromPoint(t.pageX-p.body.scrollLeft,t.pageY-(g.pageYOffset||p.documentElement.scrollTop))),u||(this.dragEl[0].style.visibility="visible"),this.pointEl.hasClass(a.handleClass)&&(this.pointEl=this.pointEl.parent(a.itemNodeName)),this.pointEl.hasClass(a.emptyClass))r=!0;else if(!this.pointEl.length||!this.pointEl.hasClass(a.itemClass))return;var l=this.pointEl.closest("."+a.rootClass),d=this.dragRootEl.data("nestable-id")!==l.data("nestable-id");if(!s.dirAx||d||r){if(d&&a.group!==l.data("nestable-group"))return;if(this.pointEl.hasClass(a.dropDisableClass))return;if(this.dragDepth-1+this.pointEl.parents(a.listNodeName).length>a.maxDepth)return;var c=t.pageY<this.pointEl.offset().top+this.pointEl.height()/2;i=this.placeEl.parent(),r?((e=h(p.createElement(a.listNodeName)).addClass(a.listClass)).append(this.placeEl),this.pointEl.replaceWith(e)):c?this.pointEl.before(this.placeEl):this.pointEl.after(this.placeEl),i.children().length||this.unsetParent(i.parent()),this.dragRootEl.find(a.itemNodeName).length||this.dragRootEl.append('<div class="'+a.emptyClass+'"/>'),d&&(this.dragRootEl=l,this.hasNewRoot=this.el[0]!==this.dragRootEl[0])}}},h.fn.nestable=function(e){var t=this,i=this;return t.each(function(){var t=h(this).data("nestable");t?"string"==typeof e&&"function"==typeof t[e]&&(i=t[e]()):(h(this).data("nestable",new o(this,e)),h(this).data("nestable-id",(new Date).getTime()))}),i||t}}(window.jQuery,window,document);