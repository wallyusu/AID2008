!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("__webpack_no_use_variable",[],t):"object"==typeof exports?exports.__webpack_no_use_variable=t():e.__webpack_no_use_variable=t()}(this,(function(){return function(e){var t={};function o(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2041)}({2041:function(e,t,o){"use strict";o.r(t);o(211),o(212),o(213),o(214),o(215),o(216),o(217)},211:function(e,t){!function(e,t){function o(e){e.draggable("destroy").draggable({containment:"parent",cursor:"move",axis:"x,y",scroll:!1,distance:3,tolerance:2,smartguides:".form, .elemZoneCell",cancel:".elmeZoneCellNoDrag",start:function(){},stop:function(){}})}t.dragAllZoneCell=function(){e(".elemZoneCell").each((function(t,a){o(e(a))}))},t.dragOneZoneCell=function(e){var t=e.find(".elemZoneCell");t.length>0&&o(t)},t.destroyDragOneZoneCell=function(e){var t=e.find(".elemZoneCell");t.length>0&&t.draggable("destroy")},t.dragZoneOneCell=function(e){e.length>0&&o(e)}}($,Fai.top._elemZone||(Fai.top._elemZone={}))},212:function(e,t){!function(e,t){function o(t){var o;t.resizable("destroy"),t.resizable({helper:"ui-resizable-helper",handles:"n, e, s, w, se, sw, ne, nw",autoHide:!0,smartguides:".form, .elemZoneCell",create:function(){Site.addResizableExtHandles(e(this)),Site.refreshResizableHandles(e(this)),e(this).off("mouseenter.zoneLine").on("mouseenter.zoneLine",".ui-resizable-handle",(function(){e(this).addClass("f-handleHover").siblings(".ui-resizable-handle").addClass("f-handleHover")})),e(this).off("mouseleave.zoneLine").on("mouseleave.zoneLine",".ui-resizable-handle",(function(){e(this).removeClass("f-handleHover").siblings(".ui-resizable-handle").removeClass("f-handleHover")}))},start:function(){Site.disableEditLayer(),Fai.top.$("body").disableSelection(),o=e("#dockTip").show()},resize:function(t){var a=e(".ui-resizable-helper");o.html("高度:"+a.height()+"<br/>宽度:"+a.width()).css({left:t.pageX-28,top:t.pageY+18})},stop:function(){Site.protectZoneElemView(e(this)),Site.refreshResizableHandles(e(this)),Site.enableEditLayer(),Fai.top.$("body").enableSelection(),o.hide(),Fai.top.$("#absAlignTop, #absAlignRight, #absAlignBottom,#absAlignLeft").hide(),Site.styleChanged()}})}t.resizeAllZoneCell=function(){e(".elemZone").find(".elemZoneCellResize").each((function(t,a){o(e(a))}))},t.resizeOneZoneCell=function(e){var t=e.find(".elemZoneCellResize");t.length>0&&o(t)},t.destroyResizeOneZoneCell=function(e){var t=e.find(".elemZoneCellResize");t.length>0&&(t.resizable("destroy"),t.children(".ui-resizable-cancelTip").remove())},t.resizeZoneOneCell=function(e){e.length>0&&o(e)}}($,Fai.top._elemZone||(Fai.top._elemZone={}))},213:function(e,t){!function(e,t){function o(e){e.off("mousedown.copyable").on("mousedown.copyable",">.form",i),e.off("mousedown.copyable_selectable").on("mousedown.copyable_selectable",">.J_selectedAreaWrap .J_selectedArea",d),Fai.top.$(document).off("keydown.copyable").on("keydown.copyable",a)}function a(e){if(e.ctrlKey){var t=Fai.top.$("body");t.data("_copyable_keydowned")||(t.data("_copyable_keydowned",!0),t.addClass("f_copyable_ing"),Fai.top.$(document).off("keyup.copyable").on("keyup.copyable",n))}}function n(){var e=Fai.top.$("body");e.data("_copyable_keydowned")&&(e.removeData("_copyable_keydowned"),e.removeClass("f_copyable_ing"),Fai.top.$(document).off("keyup.copyable"))}function i(t){if(i.mousePosition={x:t.clientX,y:t.clientY},t.ctrlKey){t.preventDefault();var o=e(this);Fai.top.$(document).off("mousemove.copyable").on("mousemove.copyable",l(r,o)),Fai.top.$(document).off("mouseup.copyable").on("mouseup.copyable",l(s,o)),Site.disableEditLayer()}}function l(e){var t=Array.prototype.slice,o=t.call(arguments);return o=o.slice(1),function(){var a=t.call(arguments);return e.apply(this,o.concat(a))}}function r(t,o){var a=e.data(t[0],"_$cloneForm")||function(t,o){var a=t.clone().appendTo(t.parent()).css({opacity:.8}).draggable("destroy").draggable({cursor:"move",axis:"x,y",scroll:!1,distance:3,tolerance:2,smartguides:".form",ctrlKey:!0});return a.data("draggable")._mouseDown(o),a.data("draggable")._mouseDownEvent=o,e.data(a[0],"_originPosition",a.position()),e.data(a[0],"_originEventClientX",o.clientX),e.data(a[0],"_originEventClientY",o.clientY),e.data(t[0],"_$cloneForm",a),a}(t,o),n=e.data(a[0],"_originPosition"),i=e.data(a[0],"_originEventClientX"),l=e.data(a[0],"_originEventClientY"),r=n.left+(o.clientX-i),s=n.top+(o.clientY-l);a.css({left:r+"px",top:s+"px"}),a.data("draggable")._mouseMove(o)}function s(t,o){Fai.top.$(document).off("mousemove.copyable"),Fai.top.$(document).off("mouseup.copyable"),Site.enableEditLayer();var a=e.data(t[0],"_$cloneForm");if(a){var n=a.position();Site.copyModule(t.attr("_moduleid"),undefined,n),function(t,o){var a=e.data(t[0],"_$cloneForm");a&&(a.data("draggable")._mouseUp(o),a.remove(),e.removeData(t[0],"_$cloneForm"))}(t,o)}}function d(t){if(t.ctrlKey){t.preventDefault();var o=e(t.delegateTarget),a=e(this),n=function(e){var t=e.data("info");return t&&t.mat?t.mat.map((function(e){return e.$elem})):[]}(o).map((function(e){var t=e.clone().appendTo(e.parent()).css({opacity:.8});return{$cloneForm:t,originPosition:t.position()}}));e.data(o[0],"_cloneFormInfoList",n),e.data(o[0],"_originEventClientX",t.clientX),e.data(o[0],"_originEventClientY",t.clientY),Fai.top.$(document).off("mousemove.copyable_selectable").on("mousemove.copyable_selectable",l(c,o,a)),Fai.top.$(document).off("mouseup.copyable_selectable").on("mouseup.copyable_selectable",l(p,o,a))}}function c(t,o,a){a.ctrlKey&&Fai.top.$(document).trigger("exitEditMode.selectable");var n=e.data(t[0],"_cloneFormInfoList");if(n&&!(n.length<1)){var i=e.data(t[0],"_originEventClientX"),l=e.data(t[0],"_originEventClientY");n.forEach((function(e){var t=e.$cloneForm,o=e.originPosition,n=o.left+(a.clientX-i),r=o.top+(a.clientY-l);t.css({left:n+"px",top:r+"px"})}))}}function p(t,o,a){var n=e.data(t[0],"_originEventClientX"),i=e.data(t[0],"_originEventClientY"),l=e.data(t[0],"_cloneFormInfoList");if(e.removeData(t[0],"_cloneFormList"),e.removeData(t[0],"_originEventClientX"),e.removeData(t[0],"_originEventClientY"),Fai.top.$(document).off("mousemove.copyable_selectable"),Fai.top.$(document).off("mouseup.copyable_selectable"),l&&!(l.length<1)){var r=[],s=[];l.forEach((function(e){r.push(parseInt(e.$cloneForm.attr("_moduleid"))),s.push(e.$cloneForm.position()),e.$cloneForm.remove()})),a.clientX==n&&a.clientY==i||Site.copyAllModule(r,undefined,undefined,undefined,undefined,s)}}t.copyAllZoneModule=function(){Fai.top.$(".elemZoneModule").each((function(){o(e(this))}))},t.copyOneZoneModule=function(e){o(e.hasClass("elemZoneModule")?e:e.find(".elemZoneModule"))},t.destroyOneZoneModule=function(e){!function(e){e.off("mousedown.copyable"),e.off("mousedown.copyable_selectable")}(e.hasClass("elemZoneModule")?e:e.find(".elemZoneModule"))}}(jQuery,Fai.top._elemZone||(Fai.top._elemZone={}))},214:function(e,t){!function(e,t){function o(e){Site.resizeModule.init(e)}t.resizeAllZoneModule=function(){Site.resizeModule.prepare(Fai.top.$(".elemZoneModule").children(".form"))},t.resizeOneZoneModule=function(t){(t.hasClass("elemZoneModule")?t.children(".form"):t.find(".elemZoneModule").children(".form")).each((function(t,a){o(e(a))}))},t.resizeModuleZone=function(){for(var e=Fai.top.$("#fk-webHeaderZone, #fk-webBannerZone, #fk-webFooterZone, .fk-inBannerListZone").children(".form"),t=e.length;t;)t-=1,o(e.eq(t))},t.resizeZoneOneModule=function(e){o(e)},t.destroyResizeOneZoneModule=function(t){(t.hasClass("elemZoneModule")?t.children(".form"):t.find(".elemZoneModule").children(".form")).each((function(t,o){e(o).resizable("destroy"),e(o).children(".ui-resizable-cancelTip").remove()}))},t.disableResizeOneZoneModule=function(t){t.children(".form").each((function(t,o){e(o).resizable("destroy"),e(o).children(".ui-resizable-cancelTip").remove()}))},t.packChildrenDisableResizable=function(t){(t.hasClass("elemZoneModule")?t.children(".form"):t.find(".J_packContent").children(".form")).each((function(t,o){e(o).resizable("destroy"),e(o).children(".ui-resizable-cancelTip").remove()}))},t.isZoneDisableModule=function(t,o){if(o.hasClass("J_fullmeasurePackContent"))return!1;if(Site.isModule(t,[110])||t.hasClass("panelModuleIcon_tabPackHorizonal")||t.hasClass("panelModuleIcon_tabPackVertical")||t.hasClass("panelModuleIcon_tabPackFold")){if(o.hasClass("J_packContent")){var a=e("#module"+o.attr("id").replace("fk-packContent",""));return!!Site.checkNestModule(a).inTab}return!0}if((Site.isModule(t,[87])||t.hasClass("panelModuleIcon_pack"))&&o.hasClass("J_tabPackContent"))return!0;return!!(Site.isModule(t,[80,109,87,29,35,117])||t.hasClass("panelModuleIcon_pack")||t.hasClass("panelModuleIcon_tabHorizonal")||t.hasClass("panelModuleIcon_tabVertical")||t.hasClass("panelModuleIcon_tabPackPicture")||t.hasClass("panelModuleIcon_mulModuleCol")||t.hasClass("panelModuleIcon_fullmeasaure")||t.hasClass("panelModuleIcon_fullmeasurePack")||t.hasClass("panelModuleIcon_accordionPack"))}}(jQuery,Fai.top._elemZone||(Fai.top._elemZone={})),function(e,t){var o;function a(e){return Site.getModuleAutoHeight(e)}function n(t){var a,n=t.elem,r=t.helper,s=t.notElem,d=t.directionArr,c=r[0].getBoundingClientRect(),p=(t.callback||e.noop,e(window)),f=p.height(),u=p.width();a=Fai.top.$(".form, body").filter((function(){var t=e(this).offset(),o=this.getBoundingClientRect(),a=o.height,n=o.width,i=t.top,l=i+a,d=t.left;return this!==r&&(!(i>=f||l<=0||d>=u||n+d<=0)&&!(e.inArray(e(this).attr("id"),s)>-1))})),c.level=(c.bottom+c.top)/2,c.vertical=(c.right+c.left)/2,Fai.top.$("#absAlignTop, #absAlignRight, #absAlignBottom, #absAlignLeft, #absAlignLevel, #absAlignVertical").hide(),o.init&&(o.compareData=function(t){var o={},a=Fai.top.$(window).height();return t.each((function(){var t,n=e(this),i=n.attr("id");if(i&&((t=n[0].getBoundingClientRect()).level=(t.bottom+t.top)/2,t.vertical=(t.right+t.left)/2,o[i]=t,t.top>=a||t.bottom<=0))return!0})),o}(a)),function(t,a,n,r,s){Fai.top.$("#absAlignTop, #absAlignRight, #absAlignBottom, #absAlignLeft, #absAlignLevelLine, #absAlignVerticalLine").css("opacity",1);var d=0,c=0,p=0,f=0,u=0,h=0,m=0,g=0,b=0,v=0,_=0,C=0,S=[t.left,t.right],y=[t.top,t.bottom],F=[t.left,t.right],M=[t.top,t.bottom],k=[t.left,t.right],w=[t.top,t.bottom];for(var T in a){var Z=a[T];d=t.top-Z.top,c=t.right-Z.right,p=t.bottom-Z.bottom,f=t.left-Z.left,u=t.level-Z.level,h=t.vertical-Z.vertical,-1!=e.inArray("top",s)&&Math.abs(d)<o.showGap&&(m=Z.top,S.push(Z.left,Z.right),o.inTopLine=!0),-1!=e.inArray("right",s)&&Math.abs(c)<o.showGap&&(g=Z.right,y.push(Z.top,Z.bottom),o.inRightLine=!0),-1!=e.inArray("bottom",s)&&Math.abs(p)<o.showGap&&(b=Z.bottom,F.push(Z.left,Z.right),o.inBottomLine=!0),-1!=e.inArray("left",s)&&Math.abs(f)<o.showGap&&(v=Z.left,M.push(Z.top,Z.bottom),o.inLeftLine=!0),-1!=e.inArray("level",s)&&Math.abs(u)<o.showGap&&(_=Z.level,k.push(Z.left,Z.right),o.initLevelLine=!0),-1!=e.inArray("vertical",s)&&Math.abs(h)<o.showGap&&(C=Z.vertical,w.push(Z.top,Z.bottom),o.initVerticalLine=!0)}(r.hasClass("formStyle81")||r.hasClass("formStyle79"))&&!0;o.inTopLine&&(i("top",S),l("Top",m),o.inTopLine=!1);o.inRightLine&&(i("right",y),l("Right",g),o.inRightLine=!1);o.inBottomLine&&(i("bottom",F),l("Bottom",b),o.inBottomLine=!1);o.inLeftLine&&(i("left",M),l("Left",v),o.inLeftLine=!1);o.initLevelLine&&(i("level",k),l("Level",_),o.initLevelLine=!1);o.initVerticalLine&&(i("vertical",w),l("Vertical",C),o.initVerticalLine=!1)}(c,o.compareData,0,n,d),o.init=!1}function i(e,t){var o=Math.min.apply(null,t),a=Math.max.apply(null,t);switch(e){case"top":Fai.top.$("#absAlignTop").css({left:o-15+"px",width:a-o+30+"px"});break;case"right":Fai.top.$("#absAlignRight").css({top:o-15+"px",height:a-o+30+"px"});break;case"bottom":Fai.top.$("#absAlignBottom").css({left:o-15+"px",width:a-o+30+"px"});break;case"left":Fai.top.$("#absAlignLeft").css({top:o-15+"px",height:a-o+30+"px"});break;case"level":Fai.top.$("#absAlignLevel").css({left:o-15+"px",width:a-o+30+"px"});break;case"vertical":Fai.top.$("#absAlignVertical").css({top:o-15+"px",height:a-o+30+"px"})}}function l(e,t){var o=Fai.top.$("body");if(o.find(".absAlign"+e).length<1){var a="<div id='absAlign"+e+"' class='absAlign"+e+"' ";switch(e){case"Top":case"Bottom":case"level":a+="style='top:"+t+"px;' ";break;case"Left":case"Right":case"vertical":a+="style='left:"+t+"px;' "}a+="></div>",o.append(a)}else switch(e){case"Top":o.find(".absAlign"+e).css({top:t+"px",display:"block"});break;case"Bottom":o.find(".absAlign"+e).css({top:t-1+"px",display:"block"});break;case"Left":o.find(".absAlign"+e).css({left:t+"px",display:"block"});break;case"Right":o.find(".absAlign"+e).css({left:t-1+"px",display:"block"});break;case"Level":o.find(".absAlign"+e).css({top:t+"px",display:"block"});break;case"Vertical":o.find(".absAlign"+e).css({left:t+"px",display:"block"})}}t.initAlignLine=function(t){if(null==(o=e.extend({},{showGap:2,inTopLine:!1,inRightLine:!1,inBottomLine:!1,inLeftLine:!1,initLevelLine:!1,initVerticalLine:!1,init:!0,elem:null,helper:null,notElem:null,directionArr:["left","top","right","bottom","level","vertical"]},t)).helper||null==o.elem)throw new Error("alignLine 参数错误");n(o)},t.refreshAlignLine=function(){if(void 0===o||null==o)throw new Error("alignLine 未初始化");n(o)},t.resetAlignLine=function(){o=null,Fai.top.$("#absAlignTop, #absAlignRight, #absAlignBottom, #absAlignLeft, #absAlignLevel, #absAlignVertical").hide()},t.getModuleAutoHeight=function(e){return a(e)},t.addModuleResizeHandle=function(e){!function(e){var t=Fai.top.$("#module"+e),o=t.height(),n=a(t),i=!0;if(o>=n)return;if(t.children(".J_resizableTip").length>0)return;1!=Site.getModuleStatus(e)&&(i=!1);i?t.append("<a href='javascript:;' class='J_resizableTip ui-resizable-cancelTip fk-resizable-cancelTip ui-resizable-cancelTip2 fk-resizable-cancelTip2' _faiscoTip='还原模块高度' onclick='Site.dockModuleAutoHeight("+e+");Site.changeParentModuleHeightToAuto("+e+");return false;'></a>"):t.append("<a href='javascript:;' class='J_resizableTip ui-resizable-cancelTip fk-resizable-cancelTip ui-resizable-cancelTip2 fk-resizable-cancelTip2' parentid='module"+e+"' _faiscoTip='还原模块默认高度' onclick='Site.absModuleAutoHeightDo("+e+");return false;'></a>")}(e)}}(jQuery,Fai.top._elemZone||(Fai.top._elemZone={}))},215:function(e,t){function o(e,t,o,a,n,i,l){try{var r=e[i](l),s=r.value}catch(d){return void o(d)}r.done?t(s):Promise.resolve(s).then(a,n)}function a(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var l=e.apply(t,a);function r(e){o(l,n,i,r,s,"next",e)}function s(e){o(l,n,i,r,s,"throw",e)}r(undefined)}))}}!function(e,t,o,n,i){function l(o){var l,r=".elemZoneModule:visible:not(.J_popupZoneContent):not(.jz_elem_zone_no_connect), .J_moduleZone:visible, .column:visible, .J_packContent:visible, .formTabButtonList,.formTabButtonYList,.formStyle29 .formTabContent, .m_foldtab, .fullmeasureContent:visible,.J_placeholderStyle",s=".form:not(.moduleSortableHelper, .tmpForm):visible, #fk-webHeaderZone, #localer, #corpTitle, #nav2, .J_tabPackContent, .auxilibary-ruler-wrap .line",p=!1,f=o.hasClass("jz_elem_zone_no_connect");(f||o.hasClass("J_popupZoneContent")||o.hasClass("J_subNavPack"))&&(r=!1),o.sortable("destroy"),o.sortable({items:'.form:not(".fk_form_unsortable"), .J_tmp_form',cancel:'.formLockEdit, input, textarea, select, .fk_form_unsortable, embed[type="application/x-shockwave-flash"], object[type="application/x-shockwave-flash"], .addNewModule, .siteFormMiddle, .msgPanel_N, .msgAddText_N, .msgCaptcha_N, .msgAddButton_N, .J_panoramaViewer',connectWith:r,distance:3,tolerance:"pointer",dropOnEmpty:!0,scrollSensitivity:5,placeholder:"J_placeholder",zIndex:0,scroll:!f,smartguides:s,containment:i,create:function(){},beforeStart:function(a,n){o.sortable("option","smartguides",s),"drag"==t.getFrom()?function(t,o){e(o.item).addClass("J_floatDragModuleHelper")}(0,n):Fai.top.dragToAddModule?(o.sortable("option","smartguides",""),function(o,a){var n=e(a.item);Fai.top.$("body").find(".J_placeholder").remove(),Site.disableEditLayer(),Fai.stopInterval(null),Fai.top.$("body").disableSelection(),Fai.top.dragInSortable=!0,t.setOriginalParent(n)}(0,n)):function(o,a,n){var i=e(a.item),l=Site.checkNestModule(i),r=e(n),s=r.attr("id");i.append("<div class='J_moduleOverlay fk-moduleOverlay'></div>"),Site.disableEditLayer(),Fai.stopInterval(null),Fai.top.$("body").disableSelection(),Fai.top.$("body").find(".J_placeholder").remove(),Fai.top.$(".fillContentRelative").css("z-index","10"),i.hasClass("formStyle32")&&i.attr("_width",i.width());e(".formTabCntId").sortable("option","disabled",!0),e(".formTabCntId").children(".form").addClass("fk_form_unsortable"),e(".formTab").sortable("option","disabled",!0),(a.item.hasClass("formStyle29")||a.item.hasClass("formStyle110"))&&(e(".formTabButtonList").sortable("option","disabled",!0),e(".formTabButtonYList").sortable("option","disabled",!0),e(".formTabContent").sortable("option","disabled",!0),e(".formTab").sortable("option","disabled",!0));e(".column .form, .floatForms .form, .absForms .form").each((function(){e(this).hasClass("formStyle35")&&e(this).find(".form .formTab").removeClass("column")})),l.parentId>0&&Site.setModuleAttrDataChange(l.parentId);t.setOriginalParentId(s),t.setOriginalParent(r),t.setCloneHelper(Site.sortableHelper.cloneHelper(a,o)),t.setReceiveId(s),t.setReceiveParent(r),t.setOverParentId(s),t.setOverParent(r),t.setPrevModule(i.prevAll(".form").first()),t.setFrom("elemZone"),t.setWidth(i.width()),t.setHeight(i.height());var d="<div class='jz_placeholder_stay_at_home J_placeholder_stay_at_home' style = 'width:100%;height:100%;'></div>";i.parent().append(d),r.addClass("jz_placeholder_wrap_original")}(a,n,this),p=!0,l=Site.undoGetElemInfo(e(n.item),"sort")},start:function(a,n){e(n.item).hasClass("formStyle97")||Site.isCartModule(e(n.item))?e(n.item).hasClass("formStyle97")?o.sortable("option","connectWith",".J_moduleZone:visible:not(.fk-inBannerListZone), .J_packContent:visible, .elemZone:visible:not(.fk-inBannerListZone)"):o.sortable("option","connectWith",".J_moduleZone:visible, .J_packContent:visible, .elemZone:visible"):o.sortable("option","connectWith",r),"drag"!=t.getFrom()&&(Fai.top.dragToAddModule?function(e,t,o){u("over",o,t.item)}(0,n,this):function(o,a,n){var i;t.getOriginalParentId()==e(n).attr("id")?(e(a.helper).show(),t.getCloneHelper().hide()):(e(a.helper).hide(),t.getCloneHelper().show());e(n).sortable("refresh"),e(a.item).hasClass("formStyle79")&&!!Site.removeHoverEftDialog&&(i=e(a.item).attr("id"))&&Site.removeHoverEftDialog(i.replace("module",""))}(0,n,this)),f&&e(n.item).hasClass("form")&&Site.boundary.init(e(n.item))},over:function(o,a){"drag"!=t.getFrom()&&(Fai.top.dragToAddModule?function(t,o,a){e(a).hasClass("J_bottomFloatLayerContent")&&h(".J_bottomFloatLayerContent");e(a).hasClass("J_topAdvContent")&&h(".J_topAdvContent");u("over",a,o.item);var n=e(a);if(n.hasClass("J_packContent")){var i=e("#module"+n.attr("id").replace("fk-packContent",""));i.parent().hasClass("column")&&i.parent().children(".form").last().is(i)&&(e(".J_tmp_form").remove(),i.after(e('<div class="f_tmp_form J_tmp_form"></div>')))}}(0,a,this):function(o,a,n){var i=e(n),l=i.attr("id");if(t.setOverParentId(l),t.setOverParent(i),u("over",n,a.item),(i=e(n)).hasClass("J_packContent")){var r=e("#module"+i.attr("id").replace("fk-packContent",""));r.parent().hasClass("column")&&r.parent().children(".form").last().is(r)&&(e(".J_tmp_form").remove(),r.after(e('<div class="f_tmp_form J_tmp_form"></div>')))}}(0,a,this))},out:function(o,a){"drag"==t.getFrom()?function(t,o,a){u("out",a),e(o.helper).removeClass("fk-dragInZone"),Site.floatData.reset()}(0,a,this):Fai.top.dragToAddModule?function(t,o,a){e(a).hasClass("J_bottomFloatLayerContent")&&m();e(a).hasClass("J_topAdvContent")&&m();u("out",a);var n=e(a);if(n.hasClass("J_packContent")){var i=e("#module"+n.attr("id").replace("fk-packContent",""));i.parent().hasClass("column")&&i.parent().children(".form").last().is(i)&&e(".J_tmp_form").remove()}}(0,0,this):function(o,a,n){u("out",n),d(n),t.getOriginalParentId()!=e(n).attr("id")?(e(a.helper).hide(),t.getCloneHelper()&&t.getCloneHelper().show(),u("originZoneOut",n)):(e(a.helper).show(),t.getCloneHelper()&&t.getCloneHelper().hide());var i=e(n);if(i.hasClass("J_packContent")){var l=e("#module"+i.attr("id").replace("fk-packContent",""));l.parent().hasClass("column")&&l.parent().children(".form").last().is(l)&&e(".J_tmp_form").remove()}}(0,a,this)},sort:function(o,a){"drag"==t.getFrom()?function(t,o,a){var n=e(o.item);if(n.hasClass("formStyle87")||n.hasClass("formStyle35")||n.hasClass("formStyle29")||n.hasClass("formStyle110")||n.hasClass("formStyle80"))return;u("over",a,o.item),e(o.helper).addClass("fk-dragInZone"),Site.floatData.setDragIn("elemZone")}(0,a,this):Fai.top.dragToAddModule?function(t,o,a){u("sort",a,o.item),e(o.placeholder).show()}(0,a,this):function(o,a,n){e(".moduleSortableHelperWrap").show(),Site.sortableHelper.cloneHelperMove(a);var i=e(a.placeholder).show();if(e(".J_placeholder_wrap").removeClass("J_placeholder_wrap jz_placeholder_wrap"),i.parent().addClass("J_placeholder_wrap jz_placeholder_wrap"),e(".J_placeholder").removeClass("jz_placeholder jz_placeholder_disabled"),i.addClass("jz_placeholder"),Site.resizeModule.showHandles(e(a.item)),e(a.helper).hasClass("formStyle97")||Site.isCartModule(e(a.helper))){var l=e(a.item),r=l.width(),s=l.height(),d=t.getOriginalParent(),c=d.width(),p=d.height(),f=d.offset().left,h=d.offset().top,m=a.offset.left,g=a.offset.top,b=Site.checkNestModule(l);if(t.getOriginalParentId()==t.getOverParentId()){if(m+r<f||m>f+c||g+s<h||g>h+p)return t.getCloneHelper()&&t.getCloneHelper().show(),void(b.inPopupZone||u("originZoneOut",n));e(a.helper).show(),t.getCloneHelper()&&t.getCloneHelper().hide()}else e(a.helper).hide(),t.getCloneHelper()&&t.getCloneHelper().show(),u("originZoneOut",n)}else t.getOriginalParentId()==t.getOverParentId()?(e(a.helper).show(),t.getCloneHelper()&&t.getCloneHelper().hide()):(e(a.helper).hide(),t.getCloneHelper()&&t.getCloneHelper().show(),u("originZoneOut",n));u("sort",a.placeholder.parentsUntil(".form"),a.item),_(a);var v=window.container||"";function _(t){var o=null,a=null;e(t.placeholder).parent().hasClass("formTabButtonList")||e(t.placeholder).parent().hasClass("formTabButtonYList")?e("#module"+e(t.placeholder).parents(".form").attr("_moduleid")).hasClass("formStyle110")||(o=(o=e("#formTabContent"+e(t.placeholder).parents(".form").attr("_moduleid"))).find(".jz_placeholder_stay_at_home").length>0?o.find(".jz_placeholder_stay_at_home"):o):e(t.placeholder).parent().hasClass("formTabContent")&&(o=e("#formTabButtonList"+e(t.placeholder).parents(".form").attr("_moduleid")));o?(o.addClass("J_placeholder_wrap jz_placeholder_wrap"),(a=o.children(".J_placeholder__clone")).length||(e(".J_placeholder__clone").remove(),a=e(t.placeholder).clone().addClass("J_placeholder__clone").appendTo(o)),a.addClass("jz_placeholder")):e(".J_placeholder__clone").length&&(e(".J_placeholder__clone").parent().removeClass("J_placeholder_wrap jz_placeholder_wrap"),e(".J_placeholder__clone").remove())}e(v).sortable("refreshPositions"),Site.move_formStyle97(e(a.helper),!1),e(a.item).find(".ui-resizable-handle").show(),Fai.top.$(".J_fkEditor_tool").hide()}(0,a,this),f&&e(a.item).hasClass("form")&&Site.boundary.refresh(e(a.item))},receive:function(o,a){if(n.isZoneDisableModule(a.item,e(this)))return Fai.top.dragToAddModule?(g(o,a,this),Fai.ing("添加失败，容器内无法添加排版模块，请移动到其他位置",200)):Fai.ing("移动失败，容器内无法添加排版模块，请移动到其他位置",200),a.sender.sortable("cancel"),d(this),void(Fai.top._cancelAdd=!0);Fai.top._cancelAdd=!1;var i,l,r=e(this).hasClass("fk-inBannerListZone"),s=e(this).hasClass("J_fullmeasurePackContent"),c=s?e(this).attr("moduleid"):0,p=r&&Site.manageParallax.webBanner&&Site.manageParallax.webBanner.isReadyPlay,f=s&&Site.manageParallax["module".concat(c)]&&Site.manageParallax["module".concat(c)].isReadyPlay,u=p||f;if(e(this).find(".J_parallax_dom").length>0||u)return g(o,a,this),Site.Message.warning({message:"请点击退出演示状态再操作。",duration:2e3}),a.sender.sortable("cancel"),d(this),void(Fai.top._cancelAdd=!0);if("drag"==t.getFrom())i=e(this),l=i.attr("id"),t.setReceiveId(l),t.setReceiveParent(i),t.setReceive("elemZone"),i.hasClass("J_moduleZone")?t.setReceiveDetail("moduleZone"):i.hasClass("J_packContent")&&t.setReceiveDetail("pack");else{if(!a.placeholder)return;Fai.top.dragToAddModule?g(o,a,this):function(o,a,n){var i=e(n),l=i.attr("id");t.setReceiveId(l),t.setReceiveParent(i),t.setReceive("elemZone"),i.hasClass("J_moduleZone")?t.setReceiveDetail("moduleZone"):i.hasClass("J_packContent")&&t.setReceiveDetail("pack");var r=t.getOriginalParent(),s=r.hasClass("J_packContent"),d=r.hasClass("J_moduleZone"),c=r.hasClass("elemZone"),p=i.hasClass("J_fullmeasurePackContent"),f=i.hasClass("J_packContent"),u=e(a.item);if(s||d||c||p||f&&u.hasClass("formStyle110"));else{var h=u.attr("_modulestyle"),m=Site.dragToAddModuleData.getWidth(h);t.setWidth(m)}}(0,a,this)}},update:function(e,o){if("drag"==t.getFrom());else if(!o.placeholder)return},beforeStop:function(o,a){"drag"==t.getFrom()||(Fai.top.dragToAddModule?function(e,o){t.setStopOffset(o.offset)}(0,a):function(e,o){var a=t.getCloneHelper();t.setStopOffset(a.offset()),Site.sortableHelper.resetSortableHelper(o)}(0,a)),e(".J_placeholder_stay_at_home").remove()},stop:function(n,r){var s=r.item;if(s.parents(".form").hasClass("formStyle110")&&s.hasClass("formStyle87"))return Fai.ing("自由容器模块不能插入标签模块之中",!0),t.reset(),!1;var d=Fai.top.$(".J_zoneEditTip:visible");if(d.length>0&&!d.parent().is(e(this)))return!1;var u=e("#bottomFloatLayerForms");if(!u.find(".J_zoneEditTip:visible").length||u.is(e(this))){var h=e("#topAdvForms");h.find(".J_zoneEditTip:visible").length&&!h.is(e(this))||a(regeneratorRuntime.mark((function s(){var o,a,d,u,h,m,g;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(o=t.getOriginalParent(),u=!1,"drag"!=t.getFrom()){s.next=5;break}v(n,r,this),s.next=17;break;case 5:if(r.placeholder){s.next=7;break}return s.abrupt("return");case 7:if(!Fai.top.dragToAddModule){s.next=11;break}return s.abrupt("return",b(n,r,this));case 11:return u=!0,Site.logDog(200084,1),o.hasClass("J_packContent")?Site.logDog(200084,4):o.hasClass("J_fullmeasurePackContent")?Site.logDog(200084,5):o.hasClass("J_tabPackContent")?Site.logDog(200084,6):o.hasClass("fk-webHeaderZone")||o.hasClass("fk-webFooterZone")?Site.logDog(200084,7):o.hasClass("J_topAdvContent")||o.hasClass("J_bottomFloatLayerContent")?Site.logDog(200084,8):o.hasClass("fk-inBannerListZone")&&Site.logDog(200084,9),s.next=16,c(n,r,this);case 16:h=s.sent;case 17:return p&&(g=Fai.top.sortSysModuleFail,Fai.top.sortSysModuleFail=!1),p&&u&&!1!==h&&(a=e.extend({},l),d=Site.undoGetElemInfo(e(r.item),"sort"),m=Site.checkNestModule(e(r.item)),d&&l&&(m.inTab&&d.parent&&(d.parent.hasClass("formTabButtonList")||d.parent.hasClass("formTabCntId"))&&(d.parent=d.parent.parent()),d.parent.hasClass("formTabCntId")&&(d.parent=d.parent.parent()),a.removeWrapPack="needNewWrapPack"==h,g||Site.undoRun((function(){}),{type:"module",detail:"elemZoneSortStop",id:parseInt(e(r.item).attr("_moduleid")),undoSame:!1,redoSame:!1,undoFn:Fai.top._undo.moduleSortStopUndo,redoFn:Fai.top._undo.moduleSortStopUndo,undoArgs:[a],redoArgs:[d]}))),"needNewWrapPack"==h&&(h=i),p=!1,f&&e(r.item).hasClass("form")&&Site.boundary.reset(e(r.item)),s.abrupt("return",h);case 23:case"end":return s.stop()}}),s,this)}))).bind(this)().then((function(e){!1===e&&o.sortable("cancel")}))}}})}function r(t){e(t).find(".J_packContent").length>0||e(t).hasClass("J_packContent")||e(t).find(".J_fullmeasurePackContent").length>0||e(t).hasClass("J_fullmeasurePackContent")?s(t):e(t).find(".J_popupZoneContent").length>0||e(t).hasClass("J_popupZoneContent")?function(t){var o="",a=e(t).hasClass("elemZoneModule")?e(t):e(t).find(".elemZoneModule"),n="";if(a.children(".J_zoneEditBtn").length>0)return void d(t);a.find(".form:visible").length>0&&(n="style='display:none;'");o+="<div class='J_zoneEditBtn f-zoneEditBtn' "+n+">",o+="<div class='J_addContent f-addContent'>",o+="<span>拖动模块到这里<span>",o+="</div>",o+="</div>",a.append(o)}(t):e(t).find(".J_bottomFloatLayerContent").length>0||e(t).hasClass("J_bottomFloatLayerContent")?function(t){var o=e(t).hasClass("J_bottomFloatLayerContent")?e(t):e(t).find(".J_bottomFloatLayerContent");if(o.length<1)return;Site.EmptyOper.refresh(o)}(t):(e(t).find(".J_topAdvContent").length>0||e(t).hasClass("J_topAdvContent"))&&function(t){var o=e(t).hasClass("J_topAdvContent")?e(t):e(t).find(".J_topAdvContent");if(o.length<1)return;Site.EmptyOper.refresh(o)}(t)}function s(t){var o=e(t).hasClass("elemZoneModule")?e(t):e(t).find(".elemZoneModule");if(!(o.length<1)){var a=o.attr("id").replace("elemZone","").replace("fk-packContent",""),n=e("#module"+a);n.length<1||Site.EmptyOper.refresh(n)}}function d(t){var o=e(t).hasClass("elemZoneModule")?e(t):e(t).find(".J_packContent, .J_fullmeasurePackContent, .elemZoneModule, .J_bottomFloatLayerContent, .J_topAdvContent");o.children(".J_zoneEditBtn").length<1&&s(t),o.children(".form:not('.J_floatDragModuleHelper'), .moduleAloneArea").length>0?o.children(".J_zoneEditBtn").hide():o.children(".J_zoneEditBtn").show(),Site.EmptyOper.refresh(o)}function c(e,t,o){return p.apply(this,arguments)}function p(){return(p=a(regeneratorRuntime.mark((function o(a,l,r){var s,c,p,f,h,m,g,b,v,_,C,S,y,F,M,k,w,T,Z,A,J,z,I,x,L,P,$,H,R,B,E,D,O,W,j,N,V,Y,G,X,U,q,K,Q,ee,te,oe,ae,ne,ie,le,re,se,de,ce,pe,fe,ue,he,me,ge;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(s=e(l.item),c=s.parent(),p=parseInt(s.attr("id").replace("module","")),f=parseInt(s.attr("id").replace("module","")),h=Site.checkNestModule(s),m=0,g=0,S=s.width(),y=s.height(),F=t.getOriginalParent(),M=F.width(),k=F.height(),w=F.offset().left,T=F.offset().top,Z=t.getReceiveParent(),A=t.getOriginalParentId(),J=t.getReceiveId(),z=t.getPrevModule(),!1,I="formTabButtonList",$=Site.checkNestModule(s),H=l.offset,s.children(".J_moduleOverlay").remove(),e(".J_placeholderContainer").removeClass("fk_placeholderContainer J_placeholderContainer"),e(".J_placeholder_wrap").removeClass("J_placeholder_wrap jz_placeholder_wrap"),e(".jz_placeholder_wrap_original").removeClass("jz_placeholder_wrap_original"),Fai.removeAllIng(),!Site.isModule(s,[97,82])){o.next=32;break}if(t.getOriginalParentId()!=t.getOverParentId()){o.next=32;break}if(L=t.getStopOffset().left||H.left,P=t.getStopOffset().top||H.top,!(L+S<w||L>w+M||P+y<T||P>T+k)){o.next=32;break}return s.attr("id")&&Site.floatOut2(s.attr("id"),{dragBtn:i,notScroll:!0}),s.offset(t.getStopOffset()),s.children(".J_moduleOverlay").remove(),t.setOriginalParentId(),u("reset",r),Site.move_formStyle97(s),Site.enableEditLayer(),Fai.top.$("body").enableSelection(),Fai.startInterval(null),Site.refreshForms(),e(".mulMColList").sortable("option","disabled",!1),e(".mulMColList").addClass("column"),e(".formTabCntId").sortable("option","disabled",!1),e(".form").removeClass("fk_form_unsortable"),e(".formTabButtonList").sortable("option","disabled",!1),e(".formTabButtonYList").sortable("option","disabled",!1),e(".formTabContent").sortable("option","disabled",!1),e(".formTab").sortable("option","disabled",!1),Fai.top.$(".fillContentRelative").css("z-index","-1"),$.inPopupZone&&Site.protectZoneElemView(s),o.abrupt("return");case 32:if(e(".fullmeasureContent").each((function(t,o){e(o).find(".tmpForm").remove()})),u("reset",r),Site.enableEditLayer(),Fai.top.$("body").enableSelection(),Fai.startInterval(null),"moduleZone"!=t.getReceiveDetail()||!Site.isSystemModule(s)){o.next=43;break}return Fai.top.sortSysModuleFail=!0,Fai.ing("系统模块不能拖入当前区域",!0),s.show(),t.reset(),o.abrupt("return",!1);case 43:if("true"!=s.attr("_global")){o.next=61;break}if(!t.getReceiveParent().hasClass("fk-inBannerListZone")){o.next=61;break}return Fai.top.sortSysModuleFail=!0,Fai.ing("全站模块不支持拖进独立横幅内，可右键取消模块的全站设置后，再拖进横幅内。",!0),s.show(),t.reset(),e(".mulMColList").sortable("option","disabled",!1),e(".mulMColList").addClass("column"),e(".formTabCntId").sortable("option","disabled",!1),e(".form").removeClass("fk_form_unsortable"),e(".formTabButtonList").sortable("option","disabled",!1),e(".formTabButtonYList").sortable("option","disabled",!1),e(".formTabContent").sortable("option","disabled",!1),e(".formTab").sortable("option","disabled",!1),Fai.top.$(".fillContentRelative").css("z-index","-1"),e(".elemZoneModule").sortable("option","disabled",!1),o.abrupt("return",!1);case 61:if("pack"==t.getReceiveDetail()&&d(Z),"elemZone"==t.getFrom()&&d(F),"moduleZone"==t.getReceiveDetail()&&Z.append(s),c.hasClass("formTabButtonYList")&&(I="formTabButtonYList",!0),Site.refreshForms(),_=Site.checkNestModule(s),C=Fai.top.$("#module"+_.parentId),R=l.item,(B=R.parents(".form")).length>0&&(B=B.eq(0)),!B.hasClass("formStyle29")||!_.inTab&&!c.hasClass(I)||c.hasClass("formTabContent")){o.next=85;break}return Site.logDog(200691,1),t.setReceive("column"),E=s.index(),D=c.children(".formTabButton").length,E>D&&(E=D-1),c.hasClass(I)&&(x=parseInt(c.attr("id").replace("formTabButtonList",""))||x,s.attr("_intab",x),s.attr("_inmulmcol",0),s.attr("_infullmeasure",0),s.attr("_infullmeasurePack",0),s.attr("_inpack",0),E>0?Fai.top.$("#formTabContent"+x).children().eq(E-1).after(s):Fai.top.$("#formTabContent"+x).prepend(s)),O=200,(W=top.$("#formTabContent"+f).children(".formTabCntId")).length>0&&(O=W.first().height()),o.next=83,Fai.top.jzModule.TabManageModule.find(x).addTabItem(Fai.top.$("#module"+f),O);case 83:_=Site.checkNestModule(s),C=Fai.top.$("#module"+_.parentId);case 85:if(j=!0,N=!1,!B.hasClass("formStyle110")||!(_.inTabPack>0||e(l.item).parent().hasClass(I)||e(l.item).parent().hasClass("m_foldtab"))||e(l.item).parent().hasClass("J_tabPackContent")){o.next=103;break}return V=window,Y=V.jzModule,N=!0,G=e("#module"+f).prevAll(".formTabButton, .tab_item").length,X=e(l.item).find(".mainTitle").eq(0).text(),U=B.attr("_moduleid"),q=Y.TabPackManageModule.find(U),o.next=96,q.addTabItem({index:G},X);case 96:o.sent.append(R),R.css({position:"absolute",left:0,top:0}),j=!1,Site.refreshFormIndexClassInTabPack(B),Site.triggerGobalEvent("changeParentModuleHeightToAuto",{id:f}),_=Site.checkNestModule(s);case 103:if(_.inTab&&(K=Site.isVueStyleGrayTest(f)?Site.getModuleAttrPattern(f).d:Site.getModuleAttrPattern(f).border)&&(K.y=1,Site.hideModuleBorder(f)),t.getOriginalParentId()==t.getReceiveId()?(m=l.position.top,g=l.position.left):(b=t.getStopOffset(),v=t.getReceiveParent().offset(),m=b.top-v.top,g=b.left-v.left),"column"!=t.getReceive()&&"fullmeasure"!=t.getReceive()){o.next=142;break}if(j&&s.removeAttr("style"),Site.dockModuleResize(s),s.attr("_autoheight")>0&&Site.autoModuleHeight(p),_.inTab?(s.removeClass("formInMulMCol formInZone").addClass("formInTab"),Site.dockModuleResize(C)):_.inCol?(s.removeClass("formInTab formInZone").addClass("formInMulMCol"),Site.dockModuleResize(C)):_.inFullmeasure?(s.removeClass("formInTab formInMulMCol formInZone"),Site.inFullmeasueAnimation.refFillRelativeDivHeight(_.parentId)):_.inPack&&s.removeClass("formInTab formInMulMCol formInZone"),R=l.item,(B=R.parents(".form")).length>0&&(B=B.eq(0)),B.attr("id"),!B.hasClass("formStyle35")){o.next=119;break}if(!R.hasClass("formStyle35")){o.next=119;break}return Fai.ing("多列排版模块不能插入多列排版模块之中",!0),t.reset(),o.abrupt("return",!1);case 119:if(!B.hasClass("formStyle29")&&!B.hasClass("formStyle110")){o.next=128;break}if(!R.hasClass("formStyle35")){o.next=124;break}return Fai.ing("多列排版模块不能插入标签模块之中",!0),t.reset(),o.abrupt("return",!1);case 124:if(!R.hasClass("formStyle29")&&!R.hasClass("formStyle110")){o.next=128;break}return Fai.ing("标签模块不能插入标签模块之中",!0),t.reset(),o.abrupt("return",!1);case 128:if(R.hasClass("formStyle86")&&Site.refreshSimpleEditor(R,R),R.hasClass("formStyle32")&&R.width()!=parseInt(R.attr("_width"))&&(R.find(".resize").each((function(){e(this).css({width:""}),e(this).removeAttr("_width")})),Site.getModuleAttr(f).data.changed=!0,Site.styleChanged()),R.hasClass("formStyle75")&&Site.fixMsgSubmitStyle(f),R.hasClass("formStyle50")&&Site.fixMsgBoardStyle(f),R.hasClass("formStyle32")&&Site.fixSiteFormDateRangeStyle(f),!e(l.item).parent().hasClass("formTabContent")){o.next=139;break}return Q=e(l.item).parent().attr("id"),ee=parseInt(Q.replace("formTabContent","")),Site.getModuleAttrData(ee).changed=!0,te=window,oe=te.jzModule,o.next=139,oe.TabManageModule.addModuleCallBackForTab(f,1,null,Q,[],0,200);case 139:_.inTab&&Fai.top.$("#module"+_.parentId).attr("_autoHeight")>0&&Site.autoModuleHeight(_.parentId),o.next=143;break;case 142:"moduleZone"==t.getReceiveDetail()?(ae=t.getStopOffset(),ne=t.getReceiveParent().offset(),ie=ae.top-ne.top,le=ae.left-ne.left,re=t.getWidth(),se=t.getHeight(),Site.commPack.topModuleIndex(s),u("reset",t.getReceiveParent()),s.removeAttr("style"),s.css({position:"absolute",top:ie+"px",left:le+"px",width:re+"px",height:se+"px"}),Site.protectZoneElemView(s),81==s.attr("_modulestyle")&&Site.adjustFlBtnPos(p),n.resizeZoneOneModule(s),s.attr("_autoheight")>0&&Site.autoModuleHeight(p),_.inZone&&s.removeClass("formInTab formInMulMCol").addClass("formInZone"),h.parentId>0&&Site.setModuleAttrDataChange(h.parentId),s.hasClass("formStyle97")&&s.find(".mallHead").click()):N||(s.css({top:m+"px",left:g+"px"}),Z.scrollTop()+Z.height()<m&&Z.scrollTop(m),A!=J?Site.commPack.topModuleIndex(s):z&&z.length>0?z.after(s):Z.children(".J_zoneContentBg").after(s),s.hasClass("formStyle97")&&(de=s.attr("id").substring(6),e(".styleMall"+de).show(),s.find(".mallHead").click().click()),_.inTabPack&&h.parentId!==_.parentId&&(Site.isModule(s,[79,81,86,115])||(ce=_.parentId,pe=s.parents(".tab_item").index(),fe=Fai.top.$(".mainTitle"+f).eq(0).text(),Fai.top.jzModule.TabPackManageModule.find(ce).editItemName(pe,fe))),s.removeClass("formInTab formInMulMCol").addClass("formInZone"),setTimeout((function(){Site.triggerGobalEvent("changeParentModuleHeightToAuto",{id:f})}),0),Site.protectZoneElemView(s));case 143:return ue=!h.inFullmeasurePack&&_.inFullmeasurePack,he=!h.inTabPack&&_.inTabPack,ue?(Site.shouldSetFullWidthModule(s)&&Fai.top.Site.dragToAddModuleData.setWidth(B.find(".J_fullmeasurePackContent:visible").width()),Fai.top.Site.commPack.setNewModuleStyle(s),Site.shouldSetFullWidthModule(s)&&s.css({left:0})):he&&(Site.shouldSetFullWidthModule(s)?Fai.top.Site.dragToAddModuleData.setWidth(B.find(".J_tabPackContent:visible").width()):(Fai.top.Site.dragToAddModuleData.setWidth(s.width()),Fai.top.Site.dragToAddModuleData.setHeight(s.height())),Fai.top.Site.commPack.setNewModuleStyle(s),Site.shouldSetFullWidthModule(s)&&s.css({left:0})),me=!1,(e.inArray(s.attr("_modulestyle"),["39","45","62","65","66"])>-1&&e.inArray(t.getReceive(),["moduleZone","pack"])>-1||he)&&(me=!0),me&&(Site.oneKeySetModuleTB(f,!0),t.setHeight(s.height())),h.inPack?(Site.disableEditLayer(),Site.commPack.resetPackModuleHeight(h.parentId),Site.enableEditLayer()):(h.inFullmeasurePack||h.inTabPack)&&"1"==e("#module"+h.parentId).attr("_autoheight")&&Site.dockModuleAutoHeight(h.parentId),e(".mulMColList").sortable("option","disabled",!1),e(".mulMColList").addClass("column"),e(".formTabCntId").sortable("option","disabled",!1),e(".form").removeClass("fk_form_unsortable"),e(".formTabButtonList").sortable("option","disabled",!1),e(".formTabButtonYList").sortable("option","disabled",!1),e(".formTabContent").sortable("option","disabled",!1),e(".formTab").sortable("option","disabled",!1),Fai.top.$(".fillContentRelative").css("z-index","-1"),e(".elemZoneModule").sortable("option","disabled",!1),s.show(),h.parentId>0&&Site.setModuleAttrDataChange(h.parentId),_.parentId>0&&Site.setModuleAttrDataChange(_.parentId),"fullmeasure"==t.getReceive()&&(Site.inFullmeasueModuleEdit.autoResetFullmeasureHeight(t.getReceiveParent().attr("moduleid")),Site.inFullmeasueModuleEdit.checkContentBgPlace(s)),"fullmeasure"==t.getFrom()&&Site.inFullmeasueModuleEdit.autoResetFullmeasureHeight(t.getOriginalParent().attr("moduleid")),"fk-webFooterZone"==t.getReceiveId()&&n.refreshFooterHeightForManage(s),Fai.top._moduleMoved++,Site.styleChanged(),Site.moduleSizeChange(s.attr("id")),Fai.top.originSortable="",t.reset(),ge=Site.moveSpecialModuleInNewPack(p,!0),Site.moduleChangeParentCallback(),Site.displayAddModule(),o.abrupt("return",ge?"needNewWrapPack":i);case 175:case"end":return o.stop()}}),o)})))).apply(this,arguments)}function f(e){return e.hasClass("J_packContent")?"自由容器":e.hasClass("J_tabPackContent")?"标签模块":e.hasClass("J_fullmeasurePackContent")?"通栏排版":""}function u(t,o,a){var i,l=e(o);if(!(l.length<1))if("over"==t)l.children(".J_zoneEditBtn").hide(),i=l.children(".J_placeholder");else if("sort"==t){(a.hasClass("formStyle110")||a.hasClass("formStyle87"))&&a.find(".J_placeholder").remove(),i=l.children(".J_placeholder");var r=e(".jz_placeholder_wrap_original");i.length&&(e(".J_placeholder_wrap").removeClass("J_placeholder_wrap jz_placeholder_wrap"),i.parent().addClass("J_placeholder_wrap jz_placeholder_wrap"),e(".J_placeholder").removeClass("jz_placeholder jz_placeholder_disabled"),i.addClass("jz_placeholder"),n.isZoneDisableModule(e(a),e(o))||Site.isSystemModule(e(a))&&e(o).hasClass("J_moduleZone")?i.addClass("jz_placeholder_disabled"):(e(".J_placeholderWrapAllHidden").removeClass("jz_placeholder_wrap--all_hidden J_placeholderWrapAllHidden"),r.is(i.parent())?Fai.removeAllIng():r.find(i.parent()).length>0?(f(r)&&f(i.parent())?Fai.ing("模块将拖出"+f(r)+"，拖入"+f(i.parent())+"中。"):Fai.removeAllIng(),r.addClass("jz_placeholder_wrap--all_hidden J_placeholderWrapAllHidden")):i.parent().find(r).length>0?(f(i.parent())?Fai.ing("模块将拖入到"+f(i.parent())+"中。"):Fai.removeAllIng(),i.parent().addClass("jz_placeholder_wrap--all_hidden J_placeholderWrapAllHidden")):Fai.removeAllIng()))}else("out"==t||"reset"==t)&&d(o)}function h(t){Fai.top._addModuleIcon&&Fai.top._addModuleIcon.draggable("option","connectToSortable",t),Fai.top._addModuleIcon&&Fai.top._addModuleIcon.draggable("refreshConnectToSortable"),Fai.top.$(".elemZone:not("+t+")").each((function(){n.refreshZoneEditBtn(e(this))}))}function m(){Fai.top._addModuleIcon&&Fai.top._addModuleIcon.draggable("option","connectToSortable",".J_moduleZone:visible, .column:visible, .fullmeasureContent:visible, .J_packContent:visible, .formTabButtonList:visible, .formTabButtonYList:visible, .elemZoneModule:visible"),Fai.top._addModuleIcon&&Fai.top._addModuleIcon.draggable("refreshConnectToSortable")}function g(o,a,n){var i=e(n),l=i.attr("id");if(t.setReceiveId(l),t.setReceiveParent(i),t.setReceive("elemZone"),i.hasClass("J_moduleZone")?t.setReceiveDetail("moduleZone"):i.hasClass("J_packContent")&&t.setReceiveDetail("pack"),Fai.top.dragToAddModule&&e.inArray("column",Fai.top.inSortableList)>-1)for(var r=0,s=Fai.top.inSortableList.length;r<s;r++)if("column"==Fai.top.inSortableList[r]){Fai.top.inSortableList.splice(r,1);break}}function b(a,n,i){var l,r,s;if(u("reset",i),n.placeholder&&(e(".fullmeasureContent").each((function(t,o){l=e(o),r=l.data("_sortabletmpForm"),s=l.data("_sortabletmpForm2"),r&&r.remove(),s&&s.remove()})),Site.enableEditLayer(),Fai.top.$("body").enableSelection(),Fai.startInterval(null),e(".elemZoneModule").sortable("option","disabled",!1),"elemZone"==t.getReceive())){Fai.top.addModule_insertBefore=!1,Fai.top._appendModule=-1,Fai.top._cancelAdd?Fai.top._appendArea="":Fai.top._appendArea=e(i).attr("id"),Fai.top.draggableDiv_enable=!1;var d=t.getStopOffset(),c=t.getReceiveParent().offset(),p=t.getReceiveParent().scrollTop(),f=d.top-c.top+p,h=d.left-c.left;o.setPosition({top:f,left:h}),t.reset()}}function v(t,o,a){u("reset",a),e(o.item).remove(),Site.moduleChangeParentCallback()}function _(){var e,t,o=0,a=Fai.top.$("#fk-webFooterZone").children(".form"),n=a.length,i=Fai.top.$("#webFooter"),l=i.find(".footerContent"),r=i.height(),s=parseInt(l.css("paddingBottom").replace("px")),d=l.offset().top-i.offset().top,c=0,p=Fai.top.Site.getFooterStyleData();if(1!=p.f.t){if(n<1)return p.f.d=0,Fai.top.Site.saveFooterStyleData(p),Fai.top._footerStyleChanged++,Site.styleChanged(),Site.setRefreshInfo("siteStyleSetting",!0),void Fai.top.Fai.removeCtrlStyleCssList("stylefooter","footer",[{cls:".footerContent",key:"padding-bottom"}]);for(;n;)n-=1,(e=(t=a.eq(n)).position().top+t.height())>o&&(o=e);(c=o-r+s+d)<0&&(c=0),p.f.d=-c,Fai.top.Site.saveFooterStyleData(p),Fai.top.Fai.setCtrlStyleCssList("stylefooter","footer",[{cls:".footerContent",key:"padding-bottom",value:c+"px"}])}}n.sortAllZoneModule=function(){e(".elemZoneModule").each((function(t,o){l(e(o))}))},n.sortModuleZone=function(){l(e("#fk-webHeaderZone")),l(e("#fk-webBannerZone")),l(e("#fk-webFooterZone")),l(e(".fk-inBannerListZone"))},n.sortPackModule=function(){e(".J_packContent").each((function(t,o){l(e(o))}))},n.sortOneZoneModule=function(e){var t=e.hasClass("elemZoneModule")?e:e.find(".elemZoneModule");t.length>0&&l(t)},n.destroySortOneZoneModule=function(e){var t=e.hasClass("elemZoneModule")?e:e.find(".elemZoneModule");t.length>0&&t.sortable("destroy")},n.changeZoneEditPrompt=function(e,t){u(e,t)},n.initAllPackAddModuleBtn=function(){e(".J_packContent, .J_popupZoneContent, .J_fullmeasurePackContent, .J_bottomFloatLayerContent, .J_topAdvContent").each((function(){r(this)}))},n.initAddModuleBtn=function(e){e.length>0&&r(e)},n.refreshZoneEditBtn=function(e){d(e)},n.removeZoneEditBtn=function(e){e.find(".J_zoneEditBtn").remove()},n.refreshFooterHeight=function(){_()},n.refreshFooterHeightForManage=function(e){_(),Fai.top._footerStyleChanged++,Site.styleChanged(),Site.setRefreshInfo("siteStyleSetting",!0),Site.scrollToModuleDiv(e)}}(jQuery,Fai.top.Site&&Fai.top.Site.sortData||Site.sortData,Fai.top.Site&&Fai.top.Site.dragToAddModuleData||Site.dragToAddModuleData,Fai.top._elemZone||(Fai.top._elemZone={}))},216:function(e,t){var o;$,Fai,Site,(o=Fai.top._elemZone||(Fai.top._elemZone={})).init=function(){o.sortAllZoneModule(),o.resizeAllZoneModule(),o.dragAllZoneCell(),o.resizeAllZoneCell(),o.selectToolAllZone(),o.initAllPackAddModuleBtn(),o.copyAllZoneModule()},o.initOne=function(e){!function(e){o.sortOneZoneModule(e),o.resizeOneZoneModule(e),o.dragOneZoneCell(e),o.resizeOneZoneCell(e),o.selectToolOneZone(e),o.initAddModuleBtn(e),o.copyOneZoneModule(e)}(e)},o.destroyOne=function(e){!function(e){o.destroySortOneZoneModule(e),o.destroyResizeOneZoneModule(e),o.destroyDragOneZoneCell(e),o.destroyResizeOneZoneCell(e),o.destroySelectToolOneZone(e),o.removeZoneEditBtn(e),o.destroyOneZoneModule(e)}(e)}},217:function(e,t){!function(e,t,o){function a(){var t=Fai.top.$(document),o="#banner .J_bannerItem, #bannerGetHref";t.off("mousedown.selectable"),Fai.top._useBannerVersionTwo||(e("#banner").length&&e("#banner").find(".J_bannerItem").length<1&&(o+=", #bannerGetHref, #banner "),t.on("mousedown.selectable",o,(function(e){Fai.top.$("#fk-webBannerZone .fk-moduleZoneBg").trigger("mousedown.mouseSelectable",e)}))),t.on("mousedown.selectable","#footer",(function(t){e(t.target).is("a")||e(t.target).parent().is("a")||Fai.top.$("#fk-webFooterZone .fk-moduleZoneBg").trigger("mousedown.mouseSelectable",t)})).on("mousedown.selectable",".headerNav",(function(t){e(t.target).is("a")||e(t.target).parent().is("a")||e(t.target).hasClass("ui-resizable-handle")||Fai.top.$("#fk-webHeaderZone .fk-moduleZoneBg").trigger("mousedown.mouseSelectable",t)}))}function n(o){var n=Fai.top.$(o);if(!(n.length<1)){var d=Fai.top.$(document),c=n.attr("id").replace("elemZone","").replace("fk-packContent","");n.hasClass("J_fullmeasurePackContent")&&(c=n.attr("moduleid")),n.hasClass("J_tabPackContent")&&(c=n.attr("moduleid"));var u,h=n.attr("id").indexOf("Zone")>0?n:Fai.top.$("#module"+c),m=new g;n.data("info",m),m.realElem=h,n.off(".mouseSelectable").on("mousedown.mouseSelectable",".J_zoneContentBg",(function(e,t){Fai.top.Fai.isMozilla()&&Fai.top.$("a.J_bannerItem").attr("ondragstart","return false");var o=!1,a=null,l=t||e,r=l.clientX,f=l.clientY,u=n.hasClass("J_moduleZone")?Fai.top.$(document):n;m.mat=[],u.on("mousemove.mouseSelectable",(function(l){var d=l,p=d.clientX,u=d.clientY;!o&&(Math.abs(p-r)>3||Math.abs(u-f)>3)&&(e=t||e,C(),a=new v(e,n),m.init(n),m.zoneId=c,o=!0),o&&(a.change(l),m.refresh(a.getConfig()),function(e){var t;for(t in e)s(e[t].$elem)}(m.all),i(m.mat,m.all),l.stopPropagation(),l.preventDefault())})),d.one("mouseup.mouseSelectable",(function(e){if(Fai.top.Fai.isMozilla()&&Fai.top.$("a.J_bannerItem").attr("ondragstart",""),(n.hasClass("J_moduleZone")?Fai.top.$(document):n).off("mousemove.mouseSelectable"),o)return m.hasMat()?(Site.logDog(100045,65),p(m.mat,m.all,n),b(),_(n)):S(),a.remove(),a=null,Site.checkSimpleTextHideTool(),e.stopPropagation(),e.preventDefault(),!1})),n.off("click.mouseSelectable").on("click.mouseSelectable",(function(e){o&&(e.stopPropagation(),e.preventDefault())}))})).off(".ctrlClickSelectable").on("click.ctrlClickSelectable",".form, .elemZoneCell",(function(t){F(t)&&(e(this).find(".floatImg_noImg_J").length>0||(Site.logDog(100045,65),b(),_(n),C(),m.init(n),m.refresh(new v(t,n).remove().getConfig(),!0),i(m.mat),p(m.mat,m.all,n),r(m.getElemInfo(e(this)),m.all)))})).on("click.ctrlClickSelectable",".J_selectableMask",(function(e){F(e)?(m.refresh(new v(e,n).remove().getConfig(),!0),i(m.mat),p(m.mat,m.all,n)):0==e.button&&S()})).on("click.ctrlClickSelectable",".J_selectedArea",(function(t){if(F(t)){var o=function(t,o){var a=o.offset(),n=a.left,i=a.top,l=t.clientY-(i-e("html").scrollTop()),r=t.clientX-n;return{top:l,left:r}}(t,n),a=o.left,i=o.top;m.init(n);var l=[];e.each(m.all,(function(e,t){var o=t.left+t.marginLeft,n=t.right+t.marginLeft,r=t.top+t.marginTop,s=t.bottom+t.marginTop;a>o&&a<n&&i>r&&i<s&&l.push(t)}));var d=l.sort((function(e,t){return t.$elem.index()-e.$elem.index()}))[0];m.mat.indexOf(d)>-1?(m.delMat(d),p(m.mat,m.all,n),s(d.$elem),m.mat.length<1&&S()):(m.addMat(d),p(m.mat,m.all,n),r(d,m.all))}})),n.hasClass("J_moduleZone")&&a()}function b(){Site.addModuleMask({id:c,realElem:h,callback:function(){Fai.top.$(".moduleMask-center").remove();var e=parseInt(n.css("border-left-width")),t=parseInt(n.css("border-right-width")),o=parseInt(n.css("border-top-width")),a=parseInt(n.css("border-bottom-width")),i=Fai.top.$(".moduleMask-left"),l=i.width()+e;i.width(l);var r=Fai.top.$(".moduleMask-top"),s=r.width()-e-t;r.height(r.height()+o).width(s).css("left",l+"px");var d=Fai.top.$(".moduleMask-bottom");d.height(d.height()+a).css("top",parseInt(d.css("top"))-a+"px").width(s).css("left",l+"px");var c=Fai.top.$(".moduleMask-right");c.width(c.width()+t).css("left",l+s+"px")},extFn:[{name:"click",fn:S}]})}function C(){y(),d.off("mousewheel.selectwheel").on("mousewheel.selectwheel",(function(){setTimeout((function(){y()}),200)})).off("keydown.selectwheel").on("keydown.selectwheel",(function(e){32!=e.keyCode&&9!=e.keyCode||e.preventDefault()})).on("exitEditMode.selectable",S),u=u?u.show():Fai.top.$("<div class='fk-selectableMask J_selectableMask' style='width:"+n.width()+"px;height:"+n.height()+"px;'>").appendTo(n),n.off("contextmenu.selectable").on("contextmenu.selectable",(function(e){e.stopPropagation()})),d.find("body").addClass("fk-elemZone-unselect"),Fai.top._selectableMode=!0,Site.triggerGobalEvent("toggleSelectableMode",!0)}function S(){Site.enableEditLayer(),Fai.top.$("body").enableSelection(),d.off(".selectwheel").off("exitEditMode.selectable"),u&&(u.remove(),u=null),Site.removeModuleMask(),n.off("contextmenu.selectable"),d.find("body").removeClass("fk-elemZone-unselect"),f(n),l(m.all),m.reset(),t.resetAlignLine(),Fai.top._selectableMode=!1,Site.triggerGobalEvent("toggleSelectableMode",!1)}function y(){Site.disableEditLayer(),Fai.top.$("body").disableSelection()}function F(e){return e.ctrlKey&&0==e.button}}function i(e){for(var t=0,o=e.length;t<o;t++)r(e[t])}function l(e){for(var t=0,o=e.length;t<o;t++)d(e[t])}function r(e){var t=e.$elem,o=t.find(">.J_selectedLineWrap");o.length<1&&(o=c(e)),t.css({overflow:"visible"}),o.show()}function s(e){var t=e.find(">.J_selectedLineWrap");t.length<1||(e.removeCss("overflow"),t.hide())}function d(e){var t=e.$elem,o=t.find(">.J_selectedLineWrap");o.length<1||(t.removeCss("overflow"),o.remove())}function c(e){d(e);var t,o,a=e.$elem,n=parseInt(a.css("border-top-width"))||0,i=parseInt(a.css("border-left-width"))||0;return(t=[]).push("<div class='fk-selectedLineWrap J_selectedLineWrap' style='width:"+(o=e).outerWidth+"px;height:"+o.outerHeight+"px;left:"+(-1-i)+"px;top:"+(-1-n)+"px;'>"),t.push("</div>"),Fai.top.$(t.join("")).appendTo(a)}function p(a,n,r){if(f(r),!(a.length<1)){var s,d,c=r.data("info"),g=c.mat,b={},v=b.left=k("left",0)-1,_=b.top=k("top",0)-1,S=b.right=k("right",1)+1,y=b.bottom=k("bottom",1)+1,F=S-v,M=y-_;b.width=F,b.height=M;if(v=b.left=v-1,_=b.top=_-1,b.right=S-1+2,b.bottom=y-1+2,c.hasInit)d=parseInt(1e4*Math.random()),(s=[]).push("<div id='selectedAreaWrap"+d+"' class='fk-selectedAreaWrap J_selectedAreaWrap'>"),s.push("    <div class='f-selectedArea J_selectedArea' style='width:"+F+"px;height:"+M+"px;left:"+(v-1)+"px;top:"+(_-1)+"px;'></div>"),s.push("</div>"),Fai.top.$(s.join("")).appendTo(r).find(".J_selectedArea").show(),e.each(a,(function(e,t){t.$elem.addClass("J_onSelected")}));!function(a,n,r,s){var d,c=e(".J_selectedTool");c.length<1&&(d=u(f()),c=Fai.top.$(d).appendTo("#web"),function(a,n,r,s){var d=e(".J_selectedTool");if(d.length<1)return;var c=r.data("info");function f(t){var o=e.extend(!0,[],c.mat);t();var a=e.extend(!0,[],c.mat);Site.undoRun((function(){}),{type:"module.select",detail:"zoneSelectResizeStop",undoSame:!1,redoSame:!1,undoFn:Fai.top._undo.zoneSelectMoveUndo,redoFn:Fai.top._undo.zoneSelectMoveUndo,undoArgs:[o,c,r,p],redoArgs:[a,c,r,p]})}function u(e){for(var t=[],o=[],i=!0,l=0,s=0;i;){l=h(t=b(c.mat,e),g,e),h(t,m,e,l/(t.length-1)),i=!1;for(var d=0;d<t.length;d++)t[d]!==o[d]&&(i=!0);Math.round(s)!==Math.round(l)&&(i=!0),o=t,s=l}p(a,n,r)}function h(t,o){var a,n,i=[].slice.call(arguments,2);return e.each(t,(function(e,t){0!=e?(n=o.apply(t,[a,t,e,n].concat(i)),a=t):a=t})),n}function m(e,t,o,a,n,i){var l,r=["left","top"][n],s=["right","bottom"][n],d=["right","bottom"][n],c=["outerWidth","outerHeight"][n],p=["marginLeft","marginTop"][n],f={};t[r]=e[s]+e[p]+i-t[p],l=t[r],f[r]=l+"px",t[d]=l+t[c],t.$elem.css(f)}function g(e,t,o,a,n){var i=["marginLeft","marginTop"][n],l=["right","bottom"][n];return(a||0)+(t[["left","top"][n]]+t[i]-(e[l]+e[i]))}function b(e,t){for(var o,a,n=e.length,i=["left","top"][t],l=["marginLeft","marginTop"][t];n>0;){for(o=0;o<n-1;o++)e[o][i]+e[o][l]>e[o+1][i]+e[o+1][l]&&(a=e[o],e[o]=e[o+1],e[o+1]=a);n--}return e}d.find(".J_toolType").off("mouseenter.toggle, mouseleave.toggle").on("mouseenter.toggle, mouseleave.toggle",(function(){var t=e(this),o=t.find(".J_toolTypeIcon"),n=t.find(".J_toolTypeWrap"),i=a.length>1&&"none"==n.css("display"),l=Fai.top.$(window).scrollTop();if(i){if(o.hasClass("J_toolTypeIconSpread")&&a.length<3)return;n.show();var s=t.offset();if(0==e("#bannerV2").find(n).length&&n.css({left:s.left-e(window).scrollLeft()+"px",top:s.top+45-l+"px"}),"fk-webFooterZone"==r.attr("id")){var d,c=e(window).height(),p=t.outerHeight(),f=c-s.top+l-p,u=n.outerHeight();f<u?(d=n.position().top-l-u-p-6,n.css({top:d+"px"}),n.find(".f-wrap-cover").css({bottom:-3,top:"initial"})):n.find(".f-wrap-cover").css({bottom:"",top:""})}o.addClass("f-toolTypeIcon-show")}else n.hide(),o.removeClass("f-toolTypeIcon-show")})),d.find(".J_toolTypeWrap").off("click.toggle").on("click.toggle",(function(){d.find(".J_toolTypeWrap").hide(),d.find(".J_toolTypeIcon").removeClass("f-toolTypeIcon-show")})),d.find(".J_toolTypeIcon").off("click.tip").on("click.tip",(function(){var t=e(this);t.hasClass("J_toolTypeIconAlign")&&a.length<2&&Fai.ing("圈选两个以上模块，才可以使用对齐功能",!0),t.hasClass("J_toolTypeIconSpread")&&a.length<3&&Fai.ing("圈选三个以上模块，才可以使用等距离分布功能",!0)})),function(){var e=d.find(".J_toolTypeIconAlign");a.length<2?e.css({cursor:"not-allowed"}):e.removeCss("cursor");var t=d.find(".J_toolTypeIconSpread");a.length<3?t.css({cursor:"not-allowed"}):t.removeCss("cursor")}(),t.leftAlign=function(){f((function(){C(1),c.eachMat((function(e,t){t.left=s.left+2-t.marginLeft})),c.styleChanged(),p(a,n,r),c.resetCopy()}))},t.rightAlign=function(){f((function(){C(1),c.eachMat((function(e,t){t.left=s.right-2-t.outerWidth-t.marginLeft})),c.styleChanged(),p(a,n,r),c.resetCopy()}))},t.topAlign=function(){f((function(){C(1),c.eachMat((function(e,t){t.top=s.top+2-t.marginTop})),c.styleChanged(),p(a,n,r),c.resetCopy()}))},t.bottomAlign=function(){f((function(){C(1),c.eachMat((function(e,t){t.top=s.bottom-2-t.outerHeight-t.marginTop})),c.styleChanged(),p(a,n,r),c.resetCopy()}))},t.verticalAlign=function(){f((function(){C(1);var e=(s.right+s.left)/2;c.eachMat((function(t,o){var a=e-o.outerWidth/2-o.marginLeft;o.left=a})),c.styleChanged(),p(a,n,r),c.resetCopy()}))},t.levelAlign=function(){f((function(){C(1);var e=(s.bottom+s.top)/2;c.eachMat((function(t,o){var a=e-o.outerHeight/2-o.marginTop;o.top=a})),c.styleChanged(),p(a,n,r),c.resetCopy()}))},t.levelSpread=function(){f((function(){C(2),u(0),c.styleChanged(),c.resetCopy()}))},t.verticalSpread=function(){f((function(){C(2),u(1),c.styleChanged(),c.resetCopy()}))},t.deleteAll=function(){if(C(0),c.mat.length>20)return Fai.ing("已超过20个模块，不支持批量隐藏",!0),void Site.logDog(200334,22);Fai.ing("正在隐藏模块......"),setTimeout((function(){Fai.top._delCount=c.mat.length,c.mat.forEach((function(e){Fai.top._delCount--,Site.hideModule(e.id,!1,o,!0)})),c.styleChanged(),e(document).trigger("exitEditMode.selectable")}),0)},t.copyAll=function(){if(Site.logDog(200334,21),c.mat.length>20)return Fai.ing("已经超过20个模块，不支持批量复制",!0),void Site.logDog(200334,23);var t=e(".J_selectedArea"),a=t.width(),n=t.position().left,s=t.height(),d=t.position().top,f=r.width(),u=r.height(),h=10,m=0,g=0;switch(f-a-n>a+h?"right":u-s-d>s+h?"bottom":n>a?"left":d>u?"top":f>a+h&&u>s+h?"normal":"same"){case"right":m=a+h;break;case"bottom":g=s+h;break;case"left":m=-(a+h);break;case"top":g=-(s+h);break;case"normal":m=g=h;break;case"same":default:m=g=0}var b=[];c.mat.forEach((function(e){b.push(parseInt(e.id))})),c.mat.splice(0,c.mat.length),p(c.mat,c.all,r),l(c.all),Site.copyAllModule(b,o,o,{extFunc:function(t,o){var a=e("#module"+t),n=e("#module"+o),l=a.position().left,s=a.position().top;n.css({left:l+m+"px",top:s+g+"px"}),c.addNewElem(n),c.mat.length==b.length&&(c.mat.forEach((function(e){e.$elem.css("opacity",""),Site.moduleAnimation.publishOne(e.id)})),i(c.mat),p(c.mat,c.all,r))}})}}(a,n,r,s),h());return c;function f(){var e=[{toolType:"Align",toolList:[{toolFunc:"left",toolFuncName:"左对齐"},{toolFunc:"right",toolFuncName:"右对齐"},{toolFunc:"top",toolFuncName:"上对齐"},{toolFunc:"bottom",toolFuncName:"下对齐"},{toolFunc:"level",toolFuncName:"上下居中"},{toolFunc:"vertical",toolFuncName:"左右居中"}]},{toolType:"Spread",toolList:[{toolFunc:"vertical",toolFuncName:"垂直等距离"},{toolFunc:"level",toolFuncName:"水平等距离"}]}];return r.hasClass("fk-webBannerZone")||r.hasClass("fk-webFooterZone")&&!Fai.top._useFooterVersionTwo||(e.push({toolType:"Copy",toolFunc:"copyAll"}),e.push({toolType:"Delete",toolFunc:"deleteAll"})),e}function u(e){var t=[];t.push("<div class='fk-selectedTool J_selectedTool'>");for(var o,a=0;a<e.length;a++){if(o=e[a],t.push("<div class='f-toolType f-tool"+o.toolType+" J_toolType'>"),o.toolList&&o.toolList.length){t.push("<div class='f-icon f-toolType-icon J_toolTypeIcon J_toolTypeIcon"+o.toolType+"'></div>"),t.push("<div class='f-toolType-wrap J_toolTypeWrap'>"),t.push("<div class='f-wrap-cover'></div>");for(var n,i=0;i<o.toolList.length;i++)n=o.toolList[i],t.push("<div class='f-wrap-item' onclick='Fai.top._elemZone."+n.toolFunc+o.toolType+"();'>"),t.push("<div class='f-icon f-icon-"+n.toolFunc+"'></div>"),t.push("<div class='f-text'>"+n.toolFuncName+"</div>"),t.push("</div>");t.push("</div>")}else t.push("<div class='f-icon f-toolType-icon J_toolTypeIcon J_toolTypeIcon"+o.toolType+"' onclick='Fai.top._elemZone."+o.toolFunc+"();'></div>");t.push("</div>")}return t.push("</div>"),t.join("")}}(a,n,r,b),function(o,a,n,i,l){var r=Fai.top.$("#selectedAreaWrap"+o);if(r.length<1)return;var s,d,c,f,g,b,v=r.find(".J_selectedArea"),_=e(".J_selectedTool"),C=i.data("info"),S=i.attr("id").replace("elemZone","").replace("fk-packContent","");i.hasClass("J_fullmeasurePackContent")&&(S=i.attr("moduleid"));S&&(C.zoneId=S),v.draggable("destroy").draggable({tolerance:2,smartguides:".form:not(.J_onSelected), .elemZoneCell, #localer, #corpTitle, #nav2",scroll:!1,start:function(t,o){var a=o.position;c=a.left,f=a.top,_.hide(),s=e.extend(!0,[],C.mat),C.styleChanged()},drag:function(e,t){var o=t.position,a=o.left,n=o.top;u(a-c,n-f,C),c=a,f=n,Site.addModuleMask({id:C.zoneId,realElem:C.realElem,refresh:!0})},stop:function(t,o){l.left=o.position.left,l.top=o.position.top,l.right=l.left+l.width+2,l.bottom=l.top+l.height+2,m(i,l),h(),Site.logDog(200084,2),Fai.top._moduleMoved++,Site.changeParentModuleHeightToAuto(C.mat[0].id),i.find(".J_selectableMask").css({width:i.width()+"px",height:i.height()+"px"}),Fai.top.$(window).trigger("resize.addModuleMask");var a=e.extend(!0,[],C.mat),n=e.extend(!0,[],s);Site.undoRun((function(){}),{type:"module.select",detail:"zoneSelectableDrag",undoSame:!1,redoSame:!1,undoFn:Fai.top._undo.zoneSelectMoveUndo,redoFn:Fai.top._undo.zoneSelectMoveUndo,undoArgs:[n,C,i,p],redoArgs:[a,C,i,p]})}}).resizable("destroy").resizable({autoHide:!1,handles:"n, e, s, w, se, sw, ne, nw",aspectRatio:!1,create:function(){Site.resizeModule.customHandles(e(this))},start:function(t,o){g=o.size.width,b=o.size.height,c=o.position.left,f=o.position.top,_.hide(),C.eachMat((function(e,t){82!=t.style&&(t.origWidth=t.width,t.origHeight=t.height)}),(function(t,o){if(82!=o.style&&79==o.style){var a=o.$elem;a.find(".formMiddleContent").css("overflow","visible"),a.find(".formMiddleContent").css("overflow-y","visible");var n=a[0].id.slice(6);e("#hoverEftDialog"+n).length>0&&Site.removeHoverEftDialog&&Site.removeHoverEftDialog(n)}})),C.styleChanged(),C.resetCopy(),d=e.extend(!0,[],C.mat)},resize:function(t,o){l.width=o.size.width,l.height=o.size.height,l.top=o.position.top,l.left=o.position.left,l.bottom=l.top+l.height,l.right=l.left+l.width;var a=1,n=l.width-2*a,i=l.height-2*a,r=g-2*a,s=b-2*a,d=l.left+3,p=l.top+3;C.eachMat((function(e,t){82!=t.style&&(t.$elem.hasClass("elemZoneCell")&&!t.$elem.hasClass("elemZoneCellResize")||(t.width=t.outerWidth*(n/r)-t.borderLeft-t.borderRight,t.height=t.outerHeight*(i/s)-t.borderTop-t.borderBottom,t.left=(t.left+l.left-c-d+t.marginLeft)*(n/r)+d-t.marginLeft,t.top=(t.top+l.top-f-p+t.marginTop)*(i/s)+p-t.marginTop))}),(function(o,a){if(82!=a.style){var n=a.$elem;79==a.style?function(){var e=a.$elem,t=e.find(".formBanner"),o=t.is(":visible")?t.height():0;e.find(".J_defImage, .floatImgWrap"+(e.find(".J_fonticon").length>0?"":", .forMargin")).css({width:a.width,height:a.height-o});var n=a.width-1,i=a.height,l=n>i?i:n;-1!=e.find(".float_in_img").attr("class").indexOf("mr")&&n<260&&(l=n/2),e.find(".float_in_img").css({"font-size":l,"line-height":i+"px"}),e.find(".J_hoverImage").css({"font-size":l,"line-height":i+"px"})}():81==a.style?function(){var e=a.$elem,o=e.find(".floatBtn"),i=2*parseInt(o.css("borderLeftWidth"))||0,l=o.height(),r=["top","right","bottom","left"];Site.absAlignLine.resize.init(n,e,t,r);var s=Number(e.attr("id").replace("module","")),d=a.width-i,c=a.height-i;if(Site.isVueStyleGrayTest(s)){var p=Site.getModuleAttrPattern(s);p.w=d,p.h=c,p.vfb.s.t=2,p.vfb.s.w=d,p.vfb.s.h=c}else Site.setModuleStyleCssList(s,[{cls:".floatBtn",key:"width",value:d+"px"},{cls:".floatBtn",key:"height",value:c+"px"},{cls:".floatBtn",key:"line-height",value:l+"px"}])}():86==a.style?(Site.refreshSimpleEditor(n,n),Fai.top.$(".J_fkEditor_tool").css("display","none")):function(){if(n.find(".formMiddle").find(".formMiddleCenter").css("vertical-align","top"),(n.hasClass("formStyle35")||n.hasClass("formStyle29")||n.hasClass("formStyle110"))&&n.attr("_mousein",1),n.hasClass("formStyle97")){var t=n.attr("id").substring(6);e(".styleMall"+t).hide()}}()}})),g=o.size.width,b=o.size.height,c=o.position.left,f=o.position.top},stop:function(t,o){l.width=o.size.width,l.height=o.size.height,l.top=o.position.top,l.left=o.position.left,l.bottom=l.top+l.height,l.right=l.left+l.width,C.eachMat((function(t,o){if(82!=o.style&&(!o.$elem.hasClass("elemZoneCell")||o.$elem.hasClass("elemZoneCellResize"))){var a=o.style,n=o.$elem,i=o.$elem;79==a?function(){var e=o.$elem,t=e.attr("id").replace("module",""),a=Site.checkNestModule(i);Fai.top._moduleMoved++,Site.moduleSizeChange("module"+t),e.trigger("Fai_onModuleSizeChange"),e.find("map").length&&Site.refreshFloatImgHotArea(modules),a.inPack&&Site.setModuleAttrDataChange(a.parentId),Site.protectZoneElemView(e),setTimeout((function(){Site.triggerGobalEvent("changeParentModuleHeightToAuto",{id:t})}),0);var n=e[0].id.slice(6);(0,window.refreshHoverImgEft)(n,e.data("imgHoverEft")),3==Site.getModuleStatus(n)&&Site.refreshAbsFloatForm(e);var l=8,r=o.width,s=o.height,d=(parseInt(r)-l)/2-2,c=(parseInt(s)-l)/2-2;e.children(".ui-resizable-s").children(".imgResizeLine").css({width:d+"px"}),e.children(".ui-resizable-n").children(".imgResizeLine").css({width:d+"px"}),e.children(".ui-resizable-e").children(".imgResizeLine").css({height:c+"px"}),e.children(".ui-resizable-w").children(".imgResizeLine").css({height:c+"px"})}():81==a?function(){var t=i,o=t.find(".floatBtn"),a=Site.checkNestModule(i);e(".draggableBtn").css({opacity:"1"}),Site.enableEditLayer(),e("#dockTip").hide();var n,l=t.attr("id").replace("module",""),r=o.height();Site.setModuleStyleCssList(l,[{cls:".floatBtn",key:"line-height",value:r+"px"}]),Site.getModuleAttrPattern(l).changed=!0,(n=Site.isVueStyleGrayTest(l)?Site.getModuleAttrPattern(l).vfb:Site.getModuleAttrPattern(l).floatBtn).s=n.s||{},n.s.t=1,n.s.w=parseInt(o.width()),n.s.h=parseInt(o.height()),Fai.top._moduleMoved++,Site.setFlBtnModuleWidth(t),Site.styleChanged(),Site.moduleSizeChange("module"+l),t.trigger("Fai_onModuleSizeChange"),Fai.top.$("#absAlignTop, #absAlignRight, #absAlignBottom,#absAlignLeft").hide(),a.inPack&&Site.setModuleAttrDataChange(a.parentId),Site.protectZoneElemView(t),setTimeout((function(){Site.triggerGobalEvent("changeParentModuleHeightToAuto",{id:l})}),0)}():86==a?(n.find(".J_resizableTip").length>0?n.find(".J_resizableTip").show():n.append("<a href='javascript:;' class='J_resizableTip moduleAutoHeight ui-resizable-cancelTip fk-resizable-cancelTip' style='z-index:1000;' parentid='"+n.attr("id")+"' _faiscoTip='还原模块默认高度' onclick='Site.absModuleAutoHeightDo("+n.attr("id").replace("module","")+");return false;'></a>"),(n.find(".fk-editor-vertical-rl").length>0||n.find(".fk-editor-vertical-lr").length>0)&&n.find(".fk-editor").attr("_autowidth",0),Site.createSimpleTextAutoWidthBtn(n),l.apply(o.$elem[0])):l.apply(o.$elem[0]),o.$elem.attr("_autoheight",0),Site.refreshModuleHeight(o.id)}function l(){var t=e(this).attr("_moduleid"),a=Site.checkNestModule(e(this));if(Site.protectZoneElemView(e(this)),(e(this).hasClass("formStyle35")||e(this).hasClass("formStyle29")||e(this).hasClass("formStyle110"))&&e(this).attr("_mousein",1),!e(this).hasClass("elemZoneCell")){var n=e(this).attr("id").replace("module","");if(e(this).children(".ui-resizable-cancelTip").length<1){(e(this).hasClass("formStyle29")||e(this).hasClass("formStyle110")||e(this).hasClass("formStyle35")||e(this).hasClass("formStyle80"))&&" ui-resizable-cancelTip2 fk-resizable-cancelTip2"}Site.getModuleAttrPattern(n).changed=!0,Site.setModuleAttrDataChange(a.parentId),2!=e(this).attr("_side")&&Site.refreshAbsFloatForm(e(this)),Site.refreshSideBtn(e(this)),Site.moduleSizeChange("module"+n),(e(this).hasClass("formStyle5")||e(this).hasClass("formStyle77"))&&Site.refreshModulePhotoSwitch(n),Site.triggerGobalEvent("resizableModuleChange",n),Fai.top.$("#absAlignTop, #absAlignRight, #absAlignBottom,#absAlignLeft").hide(),e(this).hasClass("formStyle83")&&Site.initPhotoCard(n),e(this).hasClass("formStyle85")&&Site.initPhotoNewCard(n),e(this).hasClass("formStyle98")&&(e(this).width()<=400?(e(this).css("height",o.origHeight+"px"),e(this).css("width",o.origWidth+"px"),o.height=o.origHeight,o.width=o.origWidth):o.origWidth!=e(this).width()?Site.initPhotoMoreCard(n,o.origWidth):Site.initPhotoMoreCard(n)),e(this).hasClass("formStyle97")&&(t=e(this).attr("_moduleid"),e(this).find(".mallHead").click(),e(".styleMall"+t).stop(!0,!0).show()),Site.triggerGobalEvent("changeParentModuleHeightToAuto",{id:t})}function i(e){var t=e.module,o=t.width(),a=t.height(),n=t.position(),i=n.left,l=n.top,r=Fai.top.$("#module"+e.parentId),s=r.width(),d=r.height(),c=!1,p=!1;i>=s?(i=s-o,c=!0):i<=-o&&(i=0,c=!0),l>=d?(l=d-a,p=!0):l<=-a&&(l=0,p=!0),c&&t.css("left",i+"px"),p&&t.css("top",l+"px")}e(this).trigger("Fai_onModuleSizeChange"),i({module:e(this),parentId:a.parentId}),e(this).parent().hasClass("J_packContent")?(Site.logDog(100092,0),Site.logDog(100092,6),Site.logDog(100045,64)):e(this).parent().hasClass("J_moduleZone")&&(Site.logDog(100092,0),Site.logDog(100092,7)),Site.styleChanged()}}),(function(e,t){t.$elem.hasClass("elemZoneCell")&&Site.refreshResizableHandles(t.$elem)})),p(a,n,i),h(),e(this).find(".ui-resizable-handle").show();var r=e.extend(!0,[],C.mat),s=e.extend(!0,[],d);Site.undoRun((function(){}),{type:"module.select",detail:"zoneSelectResizeStop",undoSame:!1,redoSame:!1,undoFn:Fai.top._undo.zoneSelectResizeUndo,redoFn:Fai.top._undo.zoneSelectResizeUndo,undoArgs:[s,C,i,p],redoArgs:[r,C,i,p]})}}).off(".rh").on("hover.rh",(function(){e(this).find(".ui-resizable-handle").show()}));var y=!1;Fai.top.$(document).off("keydown.areaDrag").on("keydown.areaDrag",(function(o){var a={37:1,38:1,39:1,40:1};if(a[o.which]){var n=e.extend(!0,[],C.mat);o.preventDefault();var r=v.position(),s=r.left,d=r.top,c=0,f=0;switch(o.which){case 37:c=-1;break;case 38:f=-1;break;case 39:c=1;break;case 40:f=1}l.left=l.left+c,l.right=l.right+c,l.top=l.top+f,l.bottom=l.bottom+f,v.css({left:s+c,top:d+f}),u(c,f,C),a=e.map(C.mat,(function(e){return"#"+e.elemZoneId})).join(","),a=Fai.top.$(a);var g=e.map(C.mat,(function(e){return e.elemZoneId}));t.initAlignLine({elem:a,helper:a,notElem:g}),t.refreshAlignLine({elem:a,helper:a}),m(i,l),h(),C.styleChanged(),Site.logDog(200084,3),Fai.top._moduleMoved++,y||(y=!0,Fai.top.$(document).off("keyup.areakey").one("keyup.areakey",(function(){y=!1;var t=e.extend(!0,[],C.mat);Site.undoRun((function(){}),{type:"module.select",detail:"zoneSelectResizeStop",undoSame:!1,redoSame:!1,undoFn:Fai.top._undo.zoneSelectMoveUndo,redoFn:Fai.top._undo.zoneSelectMoveUndo,undoArgs:[n,C,i,p],redoArgs:[t,C,i,p]})})))}}))}(d,a,n,r,b),m(r,b)}function k(t,o){return[Math.min,Math.max][o].apply(null,e.map(g,(function(e){var o={left:e.marginLeft,right:e.marginLeft,top:e.marginTop,bottom:e.marginTop};return e[t]+o[t]})))}}function f(t){var o=t.find(".J_selectedAreaWrap");t.find(".J_onSelected").removeClass("J_onSelected"),o.off().remove(),function(){var t=e(".J_selectedTool");if(t.length<1)return;t.off().remove()}(),Fai.top.$(document).off("keydown.areaDrag")}function u(e,t,o){o.eachMat((function(o,a){a.left=a.left+e,a.top=a.top+t}))}function h(){var t=e(".J_selectedTool"),o=e(".J_selectedArea"),a=e(window);if(!(t.length<1||o.length<1)){var n=e(".floatLeftTop")[0].getBoundingClientRect().top,i=0,l=0,r=null;o.length>0&&(i=(r=o.offset()).top,l=r.left),a[0].scrollLeft>0&&(l+=a[0].scrollLeft),Fai.top.__noGmain&&(i-=n),t.css({left:l,top:i}).show()}}function m(e,t){var o=e.data("info"),a=e.width(),n=e.height(),i=Fai.top.$(".J_selectedArea");o.eachMat((function(e,n){var l=n.left<0&&n.right+2*n.marginLeft<10,r=a-n.left<10;if(l||r){var s=0;l?s=-t.left:r&&(s=a-t.right);return t.left=t.left+s,t.top=t.top+0,t.right=t.left+t.width,t.bottom=t.top+t.height,i.css(t),u(s,0,o),h(),!1}})),o.eachMat((function(e,a){var l=a.top<0&&a.bottom+2*a.marginTop<10,r=n-a.top<10;if(l||r){var s=0;return l?s=-t.top:r&&(s=n-t.bottom),t.left=t.left+0,t.top=t.top+s,t.right=t.left+t.width,t.bottom=t.top+t.height,i.css(t),u(0,s,o),h(),!1}}))}function g(){this.all=[],this.mat=[],this.hasInit=!1,this.copy=[]}function b(){var t=e(this),o=t.attr("id"),a=t.attr("_moduleid"),n=parseInt(t.css("left")),i=parseInt(t.css("top")),l=t.width(),r=t.height(),s=t.outerWidth(),d=t.outerHeight(),c=+t.css("border-left-width").replace("px",""),p=+t.css("border-right-width").replace("px",""),f=+t.css("border-top-width").replace("px",""),u=+t.css("border-bottom-width").replace("px",""),h=+t.css("margin-left").replace("px",""),m=+t.css("margin-right").replace("px",""),g=+t.css("margin-top").replace("px",""),b=+t.css("margin-bottom").replace("px",""),v=n+s,_=i+d,C=t.attr("_modulestyle");return{left:n,top:i,width:l,height:r,right:v,bottom:_,size:{width:l,height:r},outerWidth:s,outerHeight:d,outerSize:{width:s,height:d},borderLeft:c,borderRight:p,borderTop:f,borderBottom:u,marginLeft:h,marginRight:m,marginTop:g,marginBottom:b,position:{left:n,top:i},config:e.extend({},this.size,this.position,{right:this.right,bottom:this.bottom}),style:C,$elem:t,id:a||"elemCell",elemZoneId:o}}function v(e,t){var o=this;return o.width=0,o.height=0,o.$wrap=Fai.top.$(t),o.fClass="fk-mouseSelectableTool",o.jClass="J_mouseSelectableTool",o._getMousePosition(e),o._update(),o._create(),o}t.selectToolAllZone=function(){e(".elemZone").each((function(){n(this)}))},t.selectToolOneZone=function(e){var t=e.hasClass("elemZone")?e:e.find(".elemZone");t.length>0&&t.each((function(){n(this)}))},t.destroySelectToolOneZone=function(e){var t=e.hasClass("elemZone")?e:e.find(".elemZone");t.length>0&&(t.each((function(){t.off(".mouseSelectable").off(".ctrlClickSelectable")})),Fai.top.$(document).trigger("exitEditMode.selectable"))},t.selectToolModuleZone=function(){n(Fai.top.$("#fk-webBannerZone")),Fai.top._useBannerVersionTwo?n(Fai.top.$(".fk-inBannerListZone")):n(Fai.top.$("#fk-webHeaderZone")),n(Fai.top.$("#fk-webFooterZone")),a()},t.selectToolPackZone=function(){e(".J_packContent").each((function(){n(this)}))},t.disableSelectable=function(e){var t=Fai.top.$(e);t.length<1||t.off(".mouseSelectable").off(".ctrlClickSelectable")},g.prototype.reset=function(){var e=this;e.all.splice(0,e.all.length),e.mat.splice(0,e.mat.length),e.hasInit=!1,e.resetCopy()},g.prototype.refresh=function(e,t){var o,a,n=this,i=e.left,l=e.right,r=e.top,s=e.bottom,d=[];for(o=0,a=n.all.length;o<a;o++){var c=n.all[o],p=c.left,f=c.right,u=c.top,h=c.bottom;81==c.style&&(p+=c.marginLeft,f+=c.marginLeft,u+=c.marginTop,h+=c.marginTop),f<i||u>s||p>l||h<r?t||n.delMat(c):t?d.push(c):n.addMat(c)}if(t){var m=d.sort((function(e,t){return t.$elem.index()-e.$elem.index()}))[0];n.addMat(m)}},g.prototype.delMat=function(t){for(var o=this;e.inArray(t,o.mat)>-1;)o.mat.splice(e.inArray(t,o.mat),1)},g.prototype.addMat=function(t){e.inArray(t,this.mat)>-1||this.mat.push(t)},g.prototype.hasMat=function(){return this.mat.length>0},g.prototype.addNewElem=function(e){var t=b.call(e);this.all.push(t),this.mat.push(t)},g.prototype.init=function(e){var t=this;e&&(t.hasInit||(e.find(">.form:visible:not(.formLockEdit), >.elemZoneCell:visible").each((function(){var e=b.call(this);t.all.push(e)})),t.hasInit=!0))},g.prototype.getElemInfo=function(e){var t,o,a=this;for(t=0,o=a.all.length;t<o;t++)if(a.all[t].$elem.is(e))return a.all[t];return null},g.prototype.eachMat=function(t,o){var a,n,i;for(a=0,n=this.mat.length;a<n;a++)i=this.mat[a],t.apply(i.$elem[0],[a,i]),i.outerWidth=i.width+i.borderLeft+i.borderRight,i.outerHeight=i.height+i.borderTop+i.borderBottom,i.bottom=i.top+i.outerHeight,i.right=i.left+i.outerWidth,i.size.width=i.width,i.size.height=i.height,i.position.left=i.left,i.position.top=i.top,i.outerSize.width=i.outerWidth,i.outerSize.height=i.outerHeight,e.extend(i.config,i.size,i.position,{right:i.right,bottom:i.bottom}),i.$elem.css(i.size).css(i.position).find(".J_selectedLineWrap").css(i.outerSize),"function"==typeof o&&o.apply(i.$elem[0],[a,i])},g.prototype.styleChanged=function(){var t=this;if(Site.getModuleAttrPattern(t.zoneId).changed=!0,Site.getModuleAttrData(t.zoneId).changed=!0,/^tabPackContent/.test(t.zoneId)){var o=Fai.top.$("#".concat(t.zoneId));if(o.length>0){var a=Number(o.attr("moduleid"));Site.getModuleAttrPattern(a).changed=!0,Site.getModuleAttrData(a).changed=!0}}e.each(t.mat,(function(e,t){var o=t.id;Site.getModuleAttrPattern(o).changed=!0,Site.getModuleAttrData(o).changed=!0})),Site.styleChanged()},g.prototype.setCopy=function(){var e=this;e.resetCopy();for(var t=0;t<e.mat.length;t++)e.copy.push(e.mat[t])},g.prototype.resetCopy=function(){this.copy.splice(0,this.copy.length)},v.prototype._getMousePosition=function(e){var t=this,o=t.$wrap[0].getBoundingClientRect(),a=o.left,n=o.top,i=e.clientY-n,l=e.clientX-a;return t.left=l,t.top=i,t},v.prototype._update=function(){var t=this;return t.right=t.left+t.width,t.bottom=t.top+t.height,t.size={width:t.width,height:t.height},t.position={left:t.left,top:t.top},t.config=e.extend({},t.size,t.position,{right:t.right,bottom:t.bottom}),t},v.prototype._create=function(){var e=this;return e.oriLeft=e.left,e.oriTop=e.top,e.oriPosition={left:e.oriLeft,top:e.oriTop},Fai.top.$("."+e.jClass).remove(),e.$elem=Fai.top.$("<div class='"+e.fClass+" "+e.jClass+"'></div>").appendTo(e.$wrap).css(e.oriPosition),e},v.prototype.change=function(e){var t=this;return t._getMousePosition(e),t.width=Math.abs(t.left-t.oriLeft),t.height=Math.abs(t.top-t.oriTop),t.left>t.oriLeft&&(t.left=t.left-t.width),t.top>t.oriTop&&(t.top=t.top-t.height),t._update(),t.$elem.css(t.size).css(t.position),t},v.prototype.remove=function(){var e=this;return e.$elem.remove(),e.$elem=null,e.$wrap=null,e},v.prototype.getConfig=function(){return e.extend({},this.config)};function _(e){var t={"fk-webHeaderZone":6,"fk-webFooterZone":7,J_packContent:8,J_popupZoneContent:9,"fk-inBannerListZone":18,J_subNavPack:20,J_bottomFloatLayerContent:24,J_fullmeasurePackContent:25,J_tabPackContent:26,J_topAdvContent:27};for(var o in t)if(e.hasClass(o)){Site.logDog(200334,t[o]);break}}function C(e){Site.logDog(200334,[15,16,17][e])}}(jQuery,Fai.top._elemZone||(Fai.top._elemZone={}))}})}));