function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(o){return typeof o}:function a(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}!function(_){var i=null,l=function l(){};function c(o){return"function"==typeof o||"[object Function]"===Object.prototype.toString.call(o)}function w(){return!!window.WXApp||!(Fai.isIE6()||Fai.isIE7()||Fai.isIE8())}function p(a){var o=a.$$,e=window.event||o.event;e.stopPropagation?e.stopPropagation():window.event&&(window.event.cancelBubble=!0),o(".J_faiColorPickerAlp").remove(),o(".J_advanceColorPicker").remove();var t=s(function(){var o,e=[];for(o=1;o<10;o++)e.push(a["col"+o]);return e}(),a.advance,x(),a.target.css(a.targetattr)||"transparent",a.noAlpha);window.WXApp&&(a.appendToWeb=!1),o(a.appendToWeb?"#web":"body").append(t);var r={top:"",left:"",width:"225px","z-index":9999};_.extend(r,d(a));var n=0<x().length?"235":"190";n=a.noAlpha?n-35:n,n+="px",o(".J_faiColorPickerAlp").css(r).show().animate({height:n}),o(".J_faiColorPickerAlp").click(function(o){o.stopPropagation()}),o(".J_faiColorPickerAlp").find("#faiColorPicker-hidden").focus();var i="",l=navigator.userAgent.toLowerCase();i=/msie/.test(l)?"-ms-":/chrome/.test(l)||/safari/.test(l)||/yandex/.test(l)?"-webkit-":/mozilla/.test(l)?"-moz-":/opera/.test(l)?"-o-":/konqueror/.test(l)?"-khtml-":"",o(".J_faiColorPickerAlp").css(i+"user-select","none").addClass("unselectable").attr("unselectable","on").on("selectstart mousedown",!1),a.showStatus=1,u(a)}function s(t,r,a,e,o){var n=[],i=Math.floor(1e3*Math.random());return n.push('<div class="J_faiColorPickerAlp fk-colorPickerAlp" id="faiColorPicker'+i+'">'),function(){var o,e,a;for(n.push('<div class="fk-colorPicker-colorcol J_colorPicker_colorcol">'),o=0;o<t.length;o++){for(n.push('<div class="col">'),e=0,a=t[o];e<a.length;e++)"origin"==a[e]?n.push('<div class="J_original_clear f-original-clear" title="透明颜色"></div>'):r&&"advance"==a[e]?n.push('<div class="J_coloradvance_btn f-coloradvance-btn"></div>'):(n.push('<div class="col-color J_colorPicker_normal">'),n.push('<div style="background-color:'+a[e]+'"></div>'),n.push("</div>"));n.push("</div>")}n.push("</div>")}(),function(){var o,e=a.length;if(0!=e){for(n.push('<div class="fk-colorPicker-recent J_colorPicker_colorcol">'),o=0;o<e;o++)n.push('<div class="col-color J_colorPicker_normal">'),n.push('<div style="background-color:'+a[o]+'"></div>'),n.push("</div>");n.push("</div>")}}(),o||function(){var o=(o=$(e)?"linear-gradient(to right, rgba(0,0,0,0), rgba(0,0,0,0))":"linear-gradient(to right, "+q(e)+", rgba(0,0,0,0))")||"linear-gradient(to right, rgb(255, 255, 255), rgba(255, 255, 255, 0))";o=_.browser.msie&&"9.0"==_.browser.version?"filter: progid:DXImageTransform.Microsoft.gradient(GradientType='1', startColorstr='"+I(e)+"', endColorstr='#ffffff')":"background: "+o;alp=B(e),spAlphaHandleLeft=168*(1-alp),n.push('<div class="fk-colorPicker-clearcolor">'),n.push('<div class="f-original-color-bg">'),n.push('<div class="J_original_color f-original-color" style="background-color:'+e+';"></div>'),n.push("</div>"),n.push('<div class="J_sp_alpha fk-sp-alpha">'),n.push('<div class="J_sp_alpha_inner fk-sp-alpha-inner" style="'+o+';">'),n.push('<div class="J_sp_alpha_handle fk-sp-alpha-handle" style="left: '+spAlphaHandleLeft+'px;"></div>'),n.push("</div>"),n.push("</div>"),n.push("</div>")}(),n.push("</div>"),n.join("")}function d(o){var e,a,t=o.$$;if(o.showInTop){var r=t(".formDialog");if($$popupwindow=0<r.length?r:t(".fk-popupWindowVT"),$$popupwindow.offset()){var n=$$popupwindow.last().offset();a=o.left+n.left+o.base.offset().left+o.base.width()/2-12,e=o.top+n.top+o.base.offset().top+o.base.height()/2+27}else a=o.left+o.base.offset().left+o.base.width()/2-12,e=o.top+o.base.offset().top+o.base.height()/2+15;a=a<0?0:a,a=Fai.top.$(Fai.top.window).width()-245<a?a-2*(o.base.width()/2+12)-245:a;var i=30;e=(v=Fai.top.$(Fai.top.window).height()+Fai.top.$(Fai.top.window).scrollTop()-255-i)<e?v:e}else if(0!=o.moduleId){a=o.left+o.base.offset().left+o.base.width()/2-12,e=o.top+o.base.offset().top+o.base.height()/2-22,a=a-206-50;var l=o.appendToWeb||!o.isSystemModule?_("#module"+o.moduleId):_("#"+o.moduleId),c=l.width(),s=(l.height(),l.offset().top,_(o.base).parent().width()),d=_(o.base).parent().offset().top-(o.appendToWeb?t("#web").offset().top:0),p=_(o.base).parent().offset().left,u=_(window).width(),f=_(window).height(),h=_(o.base).parent().offset().top+_(Fai.top.window).scrollTop()+255-t("#web").height();if(p<250&&p+c+250<=u){e=o.appendToWeb?0<h?d-h:d:f<255+d?d-(f-255):d;var g=5;(_(o.base).hasClass("border-tool-icon")||_(o.base).hasClass("shadow-tool-icon"))&&(g=30),a=s<c?p+c+g:p+s+g}else 250<p?(e=o.appendToWeb?0<h?d-h:d:f<255+d?f-255:d,a=p-250,a+=o.__left,e+=o.__top):(e=o.appendToWeb?0<h?d-h:d:f<255+d?f-255:d,a=s<c?p+(c-250)/2:p+(s-250)/2)}else if(a=o.left+o.base.offset().left+o.base.width()/2-12,e=o.top+o.base.offset().top+o.base.height()/2-22,a=a-206-50,window===Fai.top&&!window.WXApp){e=e-Fai.top.$(".floatLeftTop").offset().top+Fai.top.$(Fai.top.window).scrollTop()+27+10+5,a=(a+=Fai.top.$(Fai.top.window).scrollLeft())<0?0:a,a=Fai.top.$(Fai.top.window).width()-245<a?a-2*(o.base.width()/2+12)-245:a;var v;i=30;e=(v=Fai.top.$(Fai.top.window).height()+Fai.top.$(Fai.top.window).scrollTop()-255-i)<e?v:e}return{top:e,left:a}}function u(o){var e=o.$$,a=e(".J_faiColorPickerAlp"),t=o.target.css(o.targetattr)||"transparent";if(o.originalColor=t,o.elm=o.target,a.off(".cpa").on("click.cpa",".J_colorPicker_normal",o,n).on("mouseenter.cpa",".J_colorPicker_normal",o,g).on("mouseleave.cpa",".J_colorPicker_normal, .J_original_clear",o,v).on("click.cpa",".J_original_clear",o,f).on("mouseenter.cpa",".J_original_clear",o,h).on("click.cpa",".J_coloradvance_btn",o,C).on("touchstart.cpa mousedown.cpa",".J_sp_alpha",o,y),o.hideAfterSet&&a.on("click.cpa",".J_colorPicker_normal, .J_original_clear",o,k),o.target.siblings(".tool").one("click",k),e("body").unbind("click",k).bind("click",{$$:e,elm:o.target,targetattr:o.targetattr,onchange:o.onchange,showStatus:o.showStatus,onShowStatus:o.onShowStatus,changeStop:o.changeStop,originalColor:o.originalColor,noAlpha:o.noAlpha},k),Fai.top.$("body").unbind("click",k).bind("click",{$$:e,elm:o.target,targetattr:o.targetattr,onchange:o.onchange,showStatus:o.showStatus,onShowStatus:o.onShowStatus,changeStop:o.changeStop,originalColor:o.originalColor,noAlpha:o.noAlpha},k),o.showInTop){_("body").unbind("click",k).bind("click",{$$:e,elm:o.target,targetattr:o.targetattr,onchange:o.onchange,changeStop:o.changeStop,originalColor:o.originalColor,noAlpha:o.noAlpha},k);var r=e(".faiColorPicker");r.mouseout(function(){r.attr("mouseIn",0)}).mouseover(function(){r.attr("mouseIn",1)}).focusout(function(){1!=r.attr("mouseIn")?r.remove():r.find("#faiColorPicker-hidden").focus()})}}function n(o){var e=o.data,a=e.$$,t=a(this).find("div").css("background-color");P(a,!1,t=e.noAlpha?I(t):1==B(t)?q(t):t),A(a,!1,t),a(".J_colorPicker_normal").removeClass("current-col-color J_current_col_color"),_(this).addClass("current-col-color J_current_col_color"),e.onchange.call(e.elm,t),S(t),a(".J_faiColorPickerAlp").removeData("originalAlp").removeData("hasReset"),e.noAlpha&&(e._onclick.call(e.elm),a(".J_faiColorPickerAlp").remove())}function f(o){var e=o.data,a=e.$$;o.stopPropagation(),P(a,!0),a(".J_colorPicker_normal").removeClass("current-col-color J_current_col_color"),a(".J_faiColorPickerAlp").data("hasReset",!0),e.onchange.apply(e.elm,["transparent","transparent"]),e.noAlpha&&a(".J_faiColorPickerAlp").remove()}function h(o){var e=o.data.$$;P(e,!0),A(e,!0),J(e,1)}function g(o){var e=o.data,a=e.$$,t=_(this).find("div").css("background-color");P(a,!1,t),A(a,!1,t);var r=B(t);J(a,r),t=e.noAlpha?I(t):1==r?q(t):t,e.onchange.call(e.elm,t)}function v(o){var e=o.data,a=e.$$,t=m(o),r=b(o);$(r)?(P(a,!0),A(a,!0),J(a,1)):(P(a,!1,r),A(a,!1,r),J(a,t)),r=e.noAlpha?I(r):1==t?q(r):r,o.data.onchange.call(e.elm,r)}function k(o){o.stopPropagation&&o.stopPropagation(),Fai.top.$("body").unbind("click",k);var e=o.data.$$;if(!(e(".J_faiColorPickerAlp").length<1)){var a=b(o);a=o.data.noAlpha?I(a):1==B(a)?q(a):a,o.data.originalColor!==a&&o.data.changeStop(a,o.data.originalColor),e(".J_faiColorPickerAlp").remove(),_typeof(o.data.showStatus)||(o.data.onShowStatus(o.data.showStatus),setTimeout(function(){o.data.showStatus=0},300))}}function b(o){var e=o.data,a=e.$$,t=a(".J_faiColorPickerAlp"),r=a(".J_current_col_color").find("div").css(e.targetattr)||e.originalColor,n=m(o);return t.data("hasReset")?"transparent":"transparent"==r?"transparent":F(r,n)}function m(o){var e=o.data,a=e.$$,t=a(".J_current_col_color").find("div").css(e.targetattr)||e.originalColor,r=a(".J_faiColorPickerAlp").data("originalAlp");return null==r?B(t):r}function C(r){r.stopPropagation();var e=r.data.$$,o=r.data.elm.css(r.data.targetattr);r.data.noAlpha||r.data.inputHexStatus("1",o);var a=e(".J_faiColorPickerAlp").offset().top,t=e(".J_faiColorPickerAlp").offset().left;r.data.appendToWeb&&(a=parseInt(e(".J_faiColorPickerAlp").css("top")),t=parseInt(e(".J_faiColorPickerAlp").css("left"))),e(".J_faiColorPickerAlp").remove(),e(".J_advanceColorPicker").remove(),e(r.data.appendToWeb?"#web":"body").append("<div class='J_advanceColorPicker'></div>"),o=$(o)?"FFFFFF":I(o),e(".J_advanceColorPicker").faiColorPickerAdven({flat:!0,color:o,onHide:function l(o){return Fai.top.$("body").unbind("click",k),e("body").unbind("click",k),_("body").unbind("click",k),e(".J_advanceColorPicker").hide(),setTimeout(function(){e(".J_advanceColorPicker").remove()},500),!1},onShow:function c(o){return!1},inputHexChange:function s(o,e){r.data.inputHexStatus(o,"#"+e)},onChange:function d(o,e,a,t){r.data.onchange("#"+e),t||S("#"+e),r.stopPropagation()}}),r.data.appendToWeb?e(".J_colorPickerAdven").css({top:a,left:t}):e(".J_colorPickerAdven").css({top:a+r.data._top,left:t+r.data._left}),e(".J_advanceColorPicker").data("open",!0);var n="",i=navigator.userAgent.toLowerCase();n=/msie/.test(i)?"-ms-":/chrome/.test(i)||/safari/.test(i)||/yandex/.test(i)?"-webkit-":/mozilla/.test(i)?"-moz-":/opera/.test(i)?"-o-":/konqueror/.test(i)?"-khtml-":"",e(".J_colorpicker_color,.J_colorpicker_brt,.J_colorpicker_hex label").css(n+"user-select","none").addClass("unselectable").attr("unselectable","on").on("selectstart mousedown",!1),e(".J_colorpicker_back").off("click.back").on("click.back",function(o){p(r.data),o.stopPropagation()})}function y(c,o,e,a){var s=c.data.elm.css(c.data.targetattr);if(!$(s)){c.stopPropagation();var t=c.data.$$,d=t(this),p=(c=c).data.onchange,u=c.data.elm,r=(c.data.targetattr,o=o||function(){},e=e||function(){},a=a||function(){},document),f=!1,h={},g=0,v=0,n={};n.selectstart=l,n.dragstart=l,n["touchmove mousemove"]=b,n["touchend mouseup"]=m;var i=c.which?3==c.which:2==c.button,k=t(".J_faiColorPickerAlp");i||f||!1!==e.apply(d,arguments)&&(f=!0,g=_(d).height(),v=_(d).width()-12,h=_(d).offset(),k.bind(n),_(r.body).addClass("sp-dragging"),b(c),l(c))}function l(o){o.stopPropagation&&o.stopPropagation(),o.preventDefault&&o.preventDefault(),o.returnValue=!1}function b(o){if(f){var e=o.originalEvent&&o.originalEvent.touches&&o.originalEvent.touches[0],a=e&&e.pageX||o.pageX,t=e&&e.pageY||o.pageY,r=Math.max(0,Math.min(a-h.left,v));Math.max(0,Math.min(t-h.top,g));d.find(".J_sp_alpha_handle").css({left:r+"px"});var n=(168-d.find(".J_sp_alpha_handle").position().left)/168;n=n<0?0:n;var i=k.find(".J_original_color").css("background-color");_.browser.mozilla&&(i=$(i)?s:i),i=F(i,n),k.find(".J_original_color").css("background-color",i);var l=c.data.noAlpha?I(q(i)):w()?i:q(i);p.apply(u,[l,i])}}function m(){f&&(_(r).unbind(n),_(r.body).removeClass("sp-dragging"),setTimeout(function(){a.apply(d,arguments)},0)),f=!1;var o=(168-d.find(".J_sp_alpha_handle").position().left)/168;o=o<0?0:o;var e=F(t(".J_original_color").css("background-color"),o);e=1==o?q(e):e,t(".J_faiColorPickerAlp ").data("originalAlp",o),1!=o&&w()&&S(e)}}function P(o,e,a){a=e?"transparent":a,o(".J_original_color").css("background-color",a)}function A(o,e,a){a=e?"transparent":q(a),_.browser.msie&&"9.0"==_.browser.version?o(".J_sp_alpha_inner").css("filter","progid:DXImageTransform.Microsoft.gradient(GradientType='1', startColorstr='"+I(a)+"', endColorstr='#ffffff')"):o(".J_sp_alpha_inner").css("background","linear-gradient(to right, "+a+", rgba(0,0,0,0))")}function J(o,e){o(".J_sp_alpha_handle").css("left",168*(1-e)+"px")}_(function(){var o=document.createElement("div");document.body.appendChild(o),i=new Vue({el:o,data:{options:{}},methods:{show:function t(o){if(this.options={},c(o.onChange)||(o.onChange=l),c(o.onChangeStop)||(o.onChangeStop=l),o.syncToBase){var e=o.base,a=o.onChange;e.style.background=e.style.background||e.style.backgroundColor||o.defaultColor,o.initialColor=e.style.background,o.onChange=function(o){a(o),e.style.background=o}}this.options=o,this.$refs.colorPicker.show(o)},hide:function e(){this.options={},this.$refs.colorPicker.hide()},handleChange:function a(o){this.options.onChange(o)},handleChangeStop:function r(o,e){this.options.onChangeStop(o,e)},handleHide:function n(){this.options.onHide&&this.options.onHide()}},template:'<color-picker-v2-component style="display: none;" ref="colorPicker" @on-change="handleChange" @on-change-stop="handleChangeStop" @hide="handleHide" />'})}),Site.colorPickerV2={width:249,height:346,nonHeaderHeight:346,withHeaderHeight:380,show:function H(o){this.height=!1===o.openGradientMode?346:380,i&&i.show(o)},hide:function N(){i&&i.hide()}},_.fn.faiColorPickerAlp=function(o){Site.logDog(201039,5);var e={base:this,target:this,baseattr:"background-color",targetattr:"background-color",col1:["#FCC02E","#FED835","#FFEB3C","#FFF176","#FFF59C","origin"],col2:["#F67C01","#FB8C00","#FFA727","#FFB74E","#FFCC80","#FFFFFF"],col3:["#E64A19","#F5511E","#FE5722","#FF8A66","#FFAB91","#DEDEDE"],col4:["#D81B43","#EB1D4E","#EB4165","#F1627E","#FB879E","#A9A9A9"],col5:["#8E24AA","#9C28B1","#AA47BC","#B968C7","#CF93D9","#4B4B4B"],col6:["#512DA7","#5D35B0","#673BB7","#7986CC","#9EA8DB","#353535"],col7:["#1F87E8","#2097F3","#42A5F6","#64B5F6","#90CAF8","#212121"],col8:["#008781","#029688","#26A59A","#80CBC4","#B2DFDC","#000000"],col9:["#05A045","#4CB050","#83C683","#A5D6A7","#C8E6CA","advance"],advance:!0,showInTop:!1,appendToWeb:!1,showStatus:0,onShowStatus:_.noop,onchange:_.noop,changeStop:_.noop,inputHexStatus:_.noop,top:0,left:0,moduleId:0,_top:0,_left:0,hideAfterSet:!1,__top:0,__left:0,noAlpha:!1,_onclick:_.noop};(o=_.extend({},e,o)).showInTop?o.$$=Fai.top.$:o.$$=_,o.base.bind("click",p(o))};var o=window.localStorage&&window.localStorage.setItem,e=window.localStorage&&window.localStorage.getItem,t=function t(){},r=function r(){};function x(){return null==t("faiColorPickerAlp")?"":JSON.parse(t("faiColorPickerAlp"))}function S(o){if(null==t("faiColorPickerAlp")){var e=new Array(o);r("faiColorPickerAlp",JSON.stringify(e))}else{e=JSON.parse(t("faiColorPickerAlp"));for(var a=0;a<e.length;a++)if(e[a]==o)return;9==e.length&&e.pop(),e.unshift(o),r("faiColorPickerAlp",JSON.stringify(e))}}function I(o){if(!o)return"";if(/#/g.test(o))return o;o=o.replace(/[rgba\(\)]/g,"").split(",");for(var e,a=["#"],t=0;t<3;t++)1===(e=parseInt(o[t]).toString(16)).length&&(e="0"+e),a.push(e);return a.join("")}function a(o,e){if(/rgba/gi.test(o))return o;e=e||0;return["rgba(",(o=parseInt(o.substring(1),16))>>16,",",(65280&o)>>8,",",255&o,",",e,")"].join("")}function F(o,e){e=e||0;return a(I(o),e)}function q(o){if(!o)return"";if($(o))return"transparent";if(/#/g.test(o))return o;var e=o.split("(")[1].split(")")[0].split(",");return"rgb("+e[0]+","+e[1]+","+e[2]+")"}function $(o){return!!(o&&"rgba(0,0,0,0)"==o.replace(/\s/g,"")||"transparent"==o)}function M(o){return!!/rgba/gi.test(o)}function B(o){return M(o)?o.split("(")[1].split(")")[0].split(",")[3]:1}e&&(t=function t(o){return window.localStorage.getItem(o)}),o&&(r=function r(o,e){return window.localStorage.setItem(o,e)})}(jQuery),function(l){var n,o,c,s,d,i,p,u,f,h,g,v,k,b,m,_,t,r,w,C,a,y,P,A,J,x,S,I,F,q,$,M,B,H,N,T,E,D,O,W,e,X,z,j,L=(o={eventName:"click",onShow:function Y(){},onBeforeShow:function V(){},onHide:function G(){},onChange:function R(){},onSubmit:function Q(){},inputHexFocus:function K(){},inputHexChange:function U(){},inputHexBlur:function Z(){},color:"ff0000",livePreview:!0,flat:!(n='<div class="J_colorPickerAdven fk-colorPickerAdven"><div class="J_colorpicker_color fk-colorpicker-color"><div><div></div></div></div><div class="J_colorpicker_back fk-colorpicker-back"></div><div class="J_colorpicker_brt fk-colorpicker-brt"><div></div></div><div style="display:none;" class="J_colorpicker_new_color fk-colorpicker-new-color"></div><div style="display:none;" class="J_colorpicker_current_color fk-colorpicker-current-color"></div><div class="J_colorpicker_hex fk-colorpicker-hex"><label>输入色值#</label><input type="text" maxlength="6" size="6"/></div><div style="display:none;" class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div style="display:none;" class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div style="display:none;" class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div style="display:none;" class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div style="display:none;" class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div style="display:none;" class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="J_colorpicker_submit"></div></div>')},c=function c(o,e){var a=W(o);l(e).data("colorpicker").fields.eq(1).val(a.r).end().eq(2).val(a.g).end().eq(3).val(a.b).end()},s=function s(o,e){l(e).data("colorpicker").fields.eq(4).val(o.h).end().eq(5).val(o.s).end().eq(6).val(o.b).end()},d=function d(o,e){l(e).data("colorpicker").fields.eq(0).val(X(o)).end()},i=function i(o,e){l(e).data("colorpicker").fields.eq(0).val(-1<o.indexOf("#")?o.substring(1):o).end()},p=function p(o,e){var a=z(o);l(e).data("colorpicker").selectorIndic.css({left:a.left,top:a.top})},u=function u(o,e){l(e).data("colorpicker").brt.parent().css("backgroundColor","#"+X({h:o.h,s:o.s,b:100})),l(e).data("colorpicker").brt.css("left",parseInt(173-164*o.b/100,10))},f=function f(o,e){l(e).data("colorpicker").currentColor.css("backgroundColor","#"+X(o))},h=function h(o,e){l(e).data("colorpicker").newColor.css("backgroundColor","#"+X(o))},g=function g(o){o.stopPropagation()},v=function v(o){o.stopPropagation();var e=o.charCode||o.keyCode||-1;if(17!=e){(e<48||57<e)&&(e<65||70<e)&&(e<96||105<e)&&8!=e&&l(this).val(this.value.replace(/[^0-9^a-f^A-F]/g,""));var a,t=l(this).parent().parent(),r="";if(!0===t.data("colorpicker").livePreview){var n=D(T(this.value)),i=E(T(this.value));t.data("colorpicker").fields.eq(1).val(i.r).end().eq(2).val(i.g).end().eq(3).val(i.b).end().eq(4).val(n.h).end().eq(5).val(n.s).end().eq(6).val(n.b),0<this.parentNode.className.indexOf("_hex")?(r=T(this.value),t.data("colorpicker").color=a=D(T(this.value))):0<this.parentNode.className.indexOf("_hsb")?t.data("colorpicker").color=a=H({h:parseInt(t.data("colorpicker").fields.eq(4).val(),10),s:parseInt(t.data("colorpicker").fields.eq(5).val(),10),b:parseInt(t.data("colorpicker").fields.eq(6).val(),10)}):t.data("colorpicker").color=a=O(N({r:parseInt(t.data("colorpicker").fields.eq(1).val(),10),g:parseInt(t.data("colorpicker").fields.eq(2).val(),10),b:parseInt(t.data("colorpicker").fields.eq(3).val(),10)})),o&&!r&&(c(a,t.get(0)),d(a,t.get(0)),s(a,t.get(0))),p(a,t.get(0)),u(a,t.get(0)),h(a,t.get(0)),r=r||X(a),t.data("colorpicker").inputHexChange.apply(t,["2",r])}}},k=function k(o,e){var a,t=l(this).parent().parent(),r="";0<this.parentNode.className.indexOf("_hex")?(r=T(this.value),t.data("colorpicker").color=a=D(T(this.value))):0<this.parentNode.className.indexOf("_hsb")?t.data("colorpicker").color=a=H({h:parseInt(t.data("colorpicker").fields.eq(4).val(),10),s:parseInt(t.data("colorpicker").fields.eq(5).val(),10),b:parseInt(t.data("colorpicker").fields.eq(6).val(),10)}):t.data("colorpicker").color=a=O(N({r:parseInt(t.data("colorpicker").fields.eq(1).val(),10),g:parseInt(t.data("colorpicker").fields.eq(2).val(),10),b:parseInt(t.data("colorpicker").fields.eq(3).val(),10)})),o&&!r&&(c(a,t.get(0)),d(a,t.get(0)),s(a,t.get(0))),p(a,t.get(0)),u(a,t.get(0)),h(a,t.get(0)),r=r||X(a),t.data("colorpicker").onChange.apply(t,[a,r,W(a),e])},b=function b(o){var e=l(this).parent().parent();e.data("colorpicker").fields.parent().removeClass("fk-colorpicker-focus");var a="";0<this.parentNode.className.indexOf("_hex")?(a=T(this.value),e.data("colorpicker").color=D(T(this.value))):0<this.parentNode.className.indexOf("_hsb")?e.data("colorpicker").color=H({h:parseInt(e.data("colorpicker").fields.eq(4).val(),10),s:parseInt(e.data("colorpicker").fields.eq(5).val(),10),b:parseInt(e.data("colorpicker").fields.eq(6).val(),10)}):e.data("colorpicker").color=O(N({r:parseInt(e.data("colorpicker").fields.eq(1).val(),10),g:parseInt(e.data("colorpicker").fields.eq(2).val(),10),b:parseInt(e.data("colorpicker").fields.eq(3).val(),10)})),e.data("colorpicker").inputHexBlur.apply(e,["3",a])},m=function m(){var o=l(this).parent().parent(),e="";0<this.parentNode.className.indexOf("_hex")?(e=T(this.value),o.data("colorpicker").color=D(T(this.value))):0<this.parentNode.className.indexOf("_hsb")?o.data("colorpicker").color=H({h:parseInt(o.data("colorpicker").fields.eq(4).val(),10),s:parseInt(o.data("colorpicker").fields.eq(5).val(),10),b:parseInt(o.data("colorpicker").fields.eq(6).val(),10)}):o.data("colorpicker").color=O(N({r:parseInt(o.data("colorpicker").fields.eq(1).val(),10),g:parseInt(o.data("colorpicker").fields.eq(2).val(),10),b:parseInt(o.data("colorpicker").fields.eq(3).val(),10)})),o.data("colorpicker").inputHexFocus.apply(o,["1",e]),0<this.parentNode.className.indexOf("_hex")?70:65,l(this).parent().parent().data("colorpicker").fields.parent().removeClass("fk-colorpicker-focus"),l(this).parent().addClass("fk-colorpicker-focus")},_=function _(o){var e=l(this).parent().find("input").focus(),a={el:l(this).parent().addClass("colorpicker_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:o.pageY,field:e,val:parseInt(e.val(),10),preview:l(this).parent().parent().data("colorpicker").livePreview};l(document).bind("mouseup",a,r),l(document).bind("mousemove",a,t)},t=function t(o){return o.data.field.val(Math.max(0,Math.min(o.data.max,parseInt(o.data.val+o.pageY-o.data.y,10)))),o.data.preview&&k.apply(o.data.field.get(0),[!0]),!1},r=function r(o){return k.apply(o.data.field.get(0),[!0]),o.data.el.removeClass("colorpicker_slider").find("input").focus(),l(document).unbind("mouseup",r),l(document).unbind("mousemove",t),!1},w=function w(o){var e={cal:l(this).parent(),x:l(this).offset().left};e.preview=e.cal.data("colorpicker").livePreview,o.data={cal:e.cal,x:e.x,preview:e.preview},k.apply(o.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(173-Math.max(9,Math.min(173,o.pageX-o.data.x)))/164,0)).get(0),[o.data.preview]),e.cal.unbind("mouseup.upBrt").bind("mouseup.upBrt",e,a).unbind("mousemove.moveBrt").bind("mousemove.moveBrt",e,C)},C=function C(o){var e,a=o.data.cal,t="",r=o.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(173-Math.max(9,Math.min(173,o.pageX-o.data.x)))/164,0)).get(0);return 0<r.parentNode.className.indexOf("_hex")?(t=T(r.value),a.data("colorpicker").color=e=D(T(r.value))):0<r.parentNode.className.indexOf("_hsb")?a.data("colorpicker").color=e=H({h:parseInt(a.data("colorpicker").fields.eq(4).val(),10),s:parseInt(a.data("colorpicker").fields.eq(5).val(),10),b:parseInt(a.data("colorpicker").fields.eq(6).val(),10)}):a.data("colorpicker").color=e=O(N({r:parseInt(a.data("colorpicker").fields.eq(1).val(),10),g:parseInt(a.data("colorpicker").fields.eq(2).val(),10),b:parseInt(a.data("colorpicker").fields.eq(3).val(),10)})),o&&!t&&(c(e,a.get(0)),d(e,a.get(0)),s(e,a.get(0))),p(e,a.get(0)),u(e,a.get(0)),h(e,a.get(0)),k.apply(a.data("colorpicker").fields.eq(6).val(parseInt(100*(173-Math.max(9,Math.min(173,o.pageX-o.data.x)))/164,0)).get(0),[o.data.preview,!0]),!1},a=function a(o){var e=o.data.cal;return c(e.data("colorpicker").color,e.get(0)),d(e.data("colorpicker").color,e.get(0)),e.unbind("mouseup.upBrt",a).unbind("mousemove.moveBrt",C),k.apply(e.data("colorpicker").fields.eq(6).val(parseInt(100*(173-Math.max(9,Math.min(173,o.pageX-o.data.x)))/164,0)).get(0),[o.data.preview]),!1},y=function y(o){var e=o.pageX-o.data.pos.left-91,a=o.pageY-o.data.pos.top-91;return Math.sqrt(e*e+a*a)},P=function P(o){var e=o.pageX-o.data.pos.left-91,a=o.pageY-o.data.pos.top-91,t=Math.round(180*Math.atan2(a,e)/Math.PI);return a<0&&(t+=360),t},A=function A(o){var e={cal:l(this).parent(),pos:l(this).offset()};e.preview=e.cal.data("colorpicker").livePreview,o.data={cal:e.cal,pos:e.pos,preview:e.preview},k.apply(o.data.cal.data("colorpicker").fields.eq(4).val(parseInt(P(o),0)).end().eq(5).val(parseInt(100*y(o)/91,0)).get(0),[o.data.preview]),e.cal.unbind("mouseup.upSelector").bind("mouseup.upSelector",e,x).unbind("mousemove.moveSelector").bind("mousemove.moveSelector",e,J)},J=function J(o){return k.apply(o.data.cal.data("colorpicker").fields.eq(4).val(parseInt(P(o),0)).end().eq(5).val(parseInt(100*y(o)/91,0)).get(0),[o.data.preview,!0]),!1},x=function x(o){var e=o.data.cal;return c(e.data("colorpicker").color,e.get(0)),d(e.data("colorpicker").color,e.get(0)),e.unbind("mouseup.upSelector",x).unbind("mousemove.moveSelector",J),k.apply(o.data.cal.data("colorpicker").fields.eq(4).val(parseInt(P(o),0)).end().eq(5).val(parseInt(100*y(o)/91,0)).get(0),[o.data.preview]),!1},S=function S(o){l(this).addClass("fk-colorpicker-focus")},I=function I(o){l(this).removeClass("fk-colorpicker-focus")},F=function F(o){var e=l(this).parent(),a=e.data("colorpicker").color;e.data("colorpicker").origColor=a,f(a,e.get(0)),e.data("colorpicker").onSubmit(a,X(a),W(a),e.data("colorpicker").el)},q=function q(o){var e=l("#"+l(this).data("colorpickerId"));e.data("colorpicker").onBeforeShow.apply(this,[e.get(0)]);var a=l(this).offset(),t=B(),r=a.top+this.offsetHeight,n=a.left;return r+176>t.t+t.h&&(r-=this.offsetHeight+176),n+356>t.l+t.w&&(n-=356),e.css({left:n+"px",top:r+"px"}),0!=e.data("colorpicker").onShow.apply(this,[e.get(0)])&&e.show(),l(document).unbind("mousedown.calHide").bind("mousedown.calHide",{cal:e},$),!1},$=function $(o){M(o.data.cal.get(0),o.target,o.data.cal.get(0))||(o.data.cal.data("colorpicker")&&0!=o.data.cal.data("colorpicker").onHide.apply(this,[o.data.cal.get(0)])&&o.data.cal.hide(),l(document).unbind("mousedown.calHide"))},M=function M(o,e,a){if(o==e)return!0;if(o.contains)return o.contains(e);if(o.compareDocumentPosition)return!!(16&o.compareDocumentPosition(e));for(var t=e.parentNode;t&&t!=a;){if(t==o)return!0;t=t.parentNode}return!1},B=function B(){var o="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(o?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(o?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(o?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(o?document.documentElement.clientHeight:document.body.clientHeight)}},H=function H(o){return{h:Math.min(360,Math.max(0,o.h)),s:Math.min(100,Math.max(0,o.s)),b:Math.min(100,Math.max(0,o.b))}},N=function N(o){return{r:Math.min(255,Math.max(0,o.r)),g:Math.min(255,Math.max(0,o.g)),b:Math.min(255,Math.max(0,o.b))}},T=function T(o){var e=6-o.length;if(0<e){for(var a=[],t=0;t<e;t++)a.push("0");a.push(o),o=a.join("")}return o},E=function E(o){return{r:(o=parseInt(-1<o.indexOf("#")?o.substring(1):o,16))>>16,g:(65280&o)>>8,b:255&o}},D=function D(o){return O(E(o))},O=function O(o){var e={h:0,s:0,b:0},a=Math.min(o.r,o.g,o.b),t=Math.max(o.r,o.g,o.b),r=t-a;return e.b=t,e.s=0!=t?255*r/t:0,0!=e.s?o.r==t?e.h=(o.g-o.b)/r:o.g==t?e.h=2+(o.b-o.r)/r:e.h=4+(o.r-o.g)/r:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},W=function W(o){var e={},a=Math.round(o.h),t=Math.round(255*o.s/100),r=Math.round(255*o.b/100);if(0==t)e.r=e.g=e.b=r;else{var n=r,i=(255-t)*r/255,l=a%60*(n-i)/60;360==a&&(a=0),a<60?(e.r=n,e.b=i,e.g=i+l):a<120?(e.g=n,e.b=i,e.r=n-l):a<180?(e.g=n,e.r=i,e.b=i+l):a<240?(e.b=n,e.r=i,e.g=n-l):a<300?(e.b=n,e.g=i,e.r=i+l):a<360?(e.r=n,e.g=i,e.b=n-l):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},e=function e(o){var a=[o.r.toString(16),o.g.toString(16),o.b.toString(16)];return l.each(a,function(o,e){1==e.length&&(a[o]="0"+e)}),a.join("")},X=function X(o){return e(W(o))},z=function z(o){var e={},a=2*Math.PI/360*o.h,t=o.s;83<t&&(t=83);var r=Math.sin(a)*t+91,n=Math.cos(a)*t+91;return e.left=n,e.top=r,e},j=function j(){var o=l(this).parent(),e=o.data("colorpicker").origColor;o.data("colorpicker").color=e,c(e,o.get(0)),d(e,o.get(0)),s(e,o.get(0)),p(e,o.get(0)),u(e,o.get(0)),h(e,o.get(0))},{init:function oo(t){var r="";if("string"==typeof(t=l.extend({},o,t||{})).color)r=t.color,t.color=D(t.color);else if(t.color.r!=undefined&&t.color.g!=undefined&&t.color.b!=undefined)t.color=O(t.color);else{if(t.color.h==undefined||t.color.s==undefined||t.color.b==undefined)return this;t.color=H(t.color)}return this.each(function(){if(!l(this).data("colorpickerId")){var o=l.extend({},t);o.origColor=t.color;var e="collorpicker_"+parseInt(1e3*Math.random());l(this).data("colorpickerId",e);var a=l(n).attr("id",e);o.flat?(a.appendTo(this).show(),l(document).unbind("mousedown.calHide").bind("mousedown.calHide",{cal:a},$),window.WXApp||l.each(Site.getAllPopupWindow(),function(o,e){l(e).length&&l(e).unbind("mousedown.calHide").bind("mousedown.calHide",{cal:a},$)})):a.appendTo(document.body),o.fields=a.find("input").bind("keyup",v).bind("change",k).bind("blur",b).bind("focus",m).bind("keydown",g),a.find("span").bind("mousedown",_).end().find(">div.J_colorpicker_current_color").bind("click",j),o.selector=a.find("div.J_colorpicker_color").unbind("mousedown.downSelector",A).bind("mousedown.downSelector",A),a.find("div.J_colorpicker_color").on("click",function(o){o.stopPropagation()}),a.on("mousedown click mouseup mouseout mouseover mouseenter mouseleave",function(o){o.stopPropagation()}),o.selectorIndic=o.selector.find("div div"),o.el=this,o.brt=a.find("div.J_colorpicker_brt div"),a.find("div.J_colorpicker_brt").unbind("mousedown.downBrt").bind("mousedown.downBrt",w),o.newColor=a.find("div.J_colorpicker_new_color"),o.currentColor=a.find("div.J_colorpicker_current_color"),a.data("colorpicker",o),a.find("div.J_colorpicker_submit").bind("mouseenter",S).bind("mouseleave",I).bind("click",F),c(o.color,a.get(0)),s(o.color,a.get(0)),r?i(r,a.get(0)):d(o.color,a.get(0)),u(o.color,a.get(0)),p(o.color,a.get(0)),f(o.color,a.get(0)),h(o.color,a.get(0)),o.flat?a.css({display:"block"}):l(this).bind(o.eventName,q)}})},showPicker:function eo(){return this.each(function(){l(this).data("colorpickerId")&&q.apply(this)})},hidePicker:function ao(){return this.each(function(){l(this).data("colorpickerId")&&l("#"+l(this).data("colorpickerId")).hide()})},setColor:function to(e){var a="";if("string"==typeof e)e=D(a=e);else if(e.r!=undefined&&e.g!=undefined&&e.b!=undefined)e=O(e);else{if(e.h==undefined||e.s==undefined||e.b==undefined)return this;e=H(e)}return this.each(function(){if(l(this).data("colorpickerId")){var o=l("#"+l(this).data("colorpickerId"));o.data("colorpicker").color=e,o.data("colorpicker").origColor=e,c(e,o.get(0)),s(e,o.get(0)),a?i(a,o.get(0)):d(options.color,o.get(0)),u(e,o.get(0)),p(e,o.get(0)),f(e,o.get(0)),h(e,o.get(0))}})}});l.fn.extend({faiColorPickerAdven:L.init,faiColorPickerAdvenHide:L.hidePicker,faiColorPickerAdvenShow:L.showPicker,faiColorPickerAdvenSetColor:L.setColor})}(jQuery);