function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function i(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(n){var f=window,t=(setTimeout,function t(){return"function"==typeof document.createElement("canvas").getContext});function a(){var t={};for(type in{Top:"",Left:""}){var i="Top"==type?"Y":"X";"undefined"!=typeof window["page"+i+"Offset"]?t[type.toLowerCase()]=window["page"+i+"Offset"]:(i=document.documentElement.clientHeight?document.documentElement:document.body,t[type.toLowerCase()]=i["scroll"+type])}return t}window.Snow=function(t,i){!function(){for(var t=["webkit","moz"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,i){var e=14;return window.setTimeout(function(){t(e)},e)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),this.settings=i,this.flakes=[],this.flakeCount=i.count,this.mx=-100,this.my=-100,this.init(t)},Snow.prototype.init=function(t){this.canvas=t.get(0),this.ctx=this.canvas.getContext("2d"),this.canvas.width=f.innerWidth,this.canvas.height=n(t.get(0)).attr("height"),this.flakes=[];for(var i=0;i<this.flakeCount;i++){var e=Math.floor(Math.random()*this.canvas.width),s=Math.floor(Math.random()*this.canvas.height),r=Math.floor(100*Math.random())%this.settings.size+2,a=Math.floor(100*Math.random())%this.settings.speed+Math.random()*r/10+.5,o=.5*Math.random()+this.settings.opacity;this.flakes.push({speed:a,velY:a,velX:0,x:e,y:s,size:r,stepSize:Math.random()/30,step:0,angle:180,opacity:o})}1==this.settings.interaction&&this.canvas.addEventListener("mousemove",function(t){this.mx=t.clientX,this.my=t.client});"string"==typeof this.settings.image&&(this.image=n("<img src='"+this.settings.image+"' style='display: none'>")),this.snow()},Snow.prototype.snow=function(){var u=this,p=function p(){u.ctx.clearRect(0,0,u.canvas.width,u.canvas.height);for(var t=0;t<u.flakeCount;t++){var i=u.flakes[t],e=u.mx,s=u.my,r=100,a=i.x,o=i.y,n=Math.sqrt((a-e)*(a-e)+(o-s)*(o-s));if(n<r){var h=(e-a)/n,c=(s-o)/n,l=r/(n*n)/2;i.velX-=l*h,i.velY-=l*c}else switch(i.velX*=.98,i.velY<=i.speed&&(i.velY=i.speed),u.settings.windPower){case!1:case 0:i.velX+=Math.cos(i.step+=.05)*i.stepSize;break;default:i.velX+=.01+u.settings.windPower/100}if(i.y+=i.velY,i.x+=i.velX,(i.y>=u.canvas.height||i.y<=0)&&u.resetFlake(i),(i.x>=u.canvas.width||i.x<=0)&&u.resetFlake(i),0==u.settings.image){var d=u.ctx.createRadialGradient(i.x,i.y,0,i.x,i.y,i.size-1);d.addColorStop(0,u.settings.startColor),d.addColorStop(1,u.settings.endColor),u.ctx.fillStyle=d,u.ctx.beginPath(),u.ctx.arc(i.x,i.y,i.size,0,2*Math.PI),u.ctx.fill()}else u.ctx.drawImage(u.image.get(0),i.x,i.y,2*i.size,2*i.size)}f.cancelAnimationFrame(p),f.requestAnimationFrame(p)};p()},Snow.prototype.resetFlake=function(t){if(0==this.settings.windPower||0==this.settings.windPower)t.x=Math.floor(Math.random()*this.canvas.width),t.y=0;else if(0<this.settings.windPower){var i=Array(Math.floor(Math.random()*this.canvas.width),0),e=Array(0,Math.floor(Math.random()*this.canvas.height)),s=(r=Array(i,e))[Math.floor(Math.random()*r.length)];t.x=s[0],t.y=s[1]}else{var r;i=Array(Math.floor(Math.random()*this.canvas.width),0),e=Array(this.canvas.width,Math.floor(Math.random()*this.canvas.height)),s=(r=Array(i,e))[Math.floor(Math.random()*r.length)];t.x=s[0],t.y=s[1]}t.size=Math.floor(100*Math.random())%this.settings.size+2,t.speed=Math.floor(100*Math.random())%this.settings.speed+Math.random()*t.size/10+.5,t.velY=t.speed,t.velX=0,t.opacity=.5*Math.random()+this.settings.opacity},n.fn.faiSnow=function(){t()&&n(this).each(function(t,i){var e={};n.each(i.attributes,function(t,i){e[n.camelCase(i.name)]=Number(Number(i.value))?Number(i.value):i.value}),"string"==typeof e.image&&"false"===e.image&&(e.image=!1),new Snow(n(i),{speed:1,interaction:e.interaction||!0,size:e.size||2,count:e.count||200,opacity:e.opacity||1,startColor:e.startColor||"rgba(255,255,255,1)",endColor:e.endColor||"rgba(255,255,255,0)",windPower:e.windPower||0,image:e.image||!1})})};(function i(s,r){clearInterval(p),[],setInterval(function(){o&&r>q.length&&Math.random()<.0025*r&&q.push(new h(s)),o||q.length||clearInterval(p);for(var t=a().top,i=m(),e=q.length-1;0<=e;0)q[e]&&(q[e].top<t||q[e].top+q[e].size+1>t+i?(q[e].remove(),q[e]=null,q.splice(e,1)):(q[e].move(),q[e].draw()))},40),j(window,"scroll",function(){for(var t=q.length-1;0<=t;0)q[t].draw()})}),function e(){for(clearInterval(p);q.pop().remove(),q.length;);};function h(t){this.parent=document.body,this.createEl(this.parent,t),this.size=5*Math.random()+5,this.el.style.width=Math.round(this.size)+"px",this.el.style.height=Math.round(this.size)+"px",this.maxLeft=document.body.offsetWidth-this.size,this.maxTop=document.body.offsetHeight-this.size,this.left=Math.random()*this.maxLeft,this.top=a().top+1,this.angle=1.4+.2*Math.random(),this.minAngle=1.4,this.maxAngle=1.6,this.angleDelta=.01*Math.random(),this.speed=2+Math.random()}h.prototype={createEl:function s(t,i){this.el=document.createElement("img"),this.el.classname="nicesnowclass",this.el.setAttribute("src",i||"./imgs/snow.png"),this.el.style.position="absolute",this.el.style.display="block",this.el.style.zIndex="99999",this.parent.appendChild(this.el)},move:function r(){(this.angle<this.minAngle||this.angle>this.maxAngle)&&(this.angleDelta=-this.angleDelta),this.angle+=this.angleDelta,this.left+=this.speed*Math.cos(this.angle*Math.PI),this.top-=this.speed*Math.sin(this.angle*Math.PI),this.left<0?this.left=this.maxLeft:this.left>this.maxLeft&&(this.left=0)},draw:function c(){this.el.style.top=Math.round(this.top)+"px",this.el.style.left=Math.round(this.left)+"px"},remove:function l(){this.parent.removeChild(this.el),this.parent=this.el=null}}}(jQuery),function(d){var u,x=d(window);function y(t){return"%"==t[t.length-1]}function t(){var t=document.createElement("canvas"),i=t.getContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"));return i&&i.getExtension("OES_texture_float")&&i.getExtension("OES_texture_float_linear")}var i=t();function e(t,i,e){function s(t,i){var e=u.createShader(t);if(u.shaderSource(e,i),u.compileShader(e),!u.getShaderParameter(e,u.COMPILE_STATUS))throw new Error("compile error: "+u.getShaderInfoLog(e));return e}var r={};if(r.id=u.createProgram(),u.attachShader(r.id,s(u.VERTEX_SHADER,t)),u.attachShader(r.id,s(u.FRAGMENT_SHADER,i)),u.linkProgram(r.id),!u.getProgramParameter(r.id,u.LINK_STATUS))throw new Error("link error: "+u.getProgramInfoLog(r.id));r.uniforms={},r.locations={},u.useProgram(r.id),u.enableVertexAttribArray(0);for(var a,o=/uniform (\w+) (\w+)/g,n=t+i;null!=(match=o.exec(n));)a=match[2],r.locations[a]=u.getUniformLocation(r.id,a);return r}function c(t,i){u.activeTexture(u.TEXTURE0+(i||0)),u.bindTexture(u.TEXTURE_2D,t)}var p=function p(t,i){var s=this;this.$el=d(t),this.$el.addClass("jquery-ripples");var e=/url\(["']?([^"']*)["']?\)/.exec(this.$el.css("background-image"));if(null!=e){e=e[1],this.interactive=i.interactive,this.resolution=i.resolution||256,this.textureDelta=new Float32Array([1/this.resolution,1/this.resolution]),this.perturbance=i.perturbance,this.dropRadius=i.dropRadius;var r=document.createElement("canvas");r.width=this.$el.innerWidth(),r.height=this.$el.innerHeight(),this.canvas=r,this.canvasWidth=r.width,this.canvasHeight=r.width,this.$canvas=d(r),this.$canvas.css({position:"absolute",left:0,top:0,right:0,bottom:0,pointerEvents:"none"}),this.$el.append(r),this.context=u=r.getContext("webgl")||r.getContext("experimental-webgl"),u.getExtension("OES_texture_float"),u.getExtension("OES_texture_float_linear"),this.$el.on("mousemove.ripples",function(t){s.visible&&s.running&&s.interactive&&s.dropAtMouse(t,s.dropRadius,.01)}).on("mousedown.ripples",function(t){s.visible&&s.running&&s.interactive&&s.dropAtMouse(t,1.5*s.dropRadius,.14)}),this.textures=[],this.framebuffers=[];for(var a=0;a<2;a++){var o=u.createTexture(),n=u.createFramebuffer();if(u.bindFramebuffer(u.FRAMEBUFFER,n),n.width=this.resolution,n.height=this.resolution,u.bindTexture(u.TEXTURE_2D,o),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,this.resolution,this.resolution,0,u.RGBA,u.FLOAT,null),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,o,0),u.checkFramebufferStatus(u.FRAMEBUFFER)!=u.FRAMEBUFFER_COMPLETE)throw new Error("Rendering to this texture is not supported (incomplete framebuffer)");u.bindTexture(u.TEXTURE_2D,null),u.bindFramebuffer(u.FRAMEBUFFER,null),this.textures.push(o),this.framebuffers.push(n)}this.running=!0,this.quad=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,this.quad),u.bufferData(u.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,1,1,-1,1]),u.STATIC_DRAW),this.initShaders();var h=new Image;h.crossOrigin="",h.onload=function(){function t(t){return 0==(t&t-1)}u=s.context;var i=t(h.width)&&t(h.height)?u.REPEAT:u.CLAMP_TO_EDGE;s.backgroundWidth=h.width,s.backgroundHeight=h.height;var e=u.createTexture();u.bindTexture(u.TEXTURE_2D,e),u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,1),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,i),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,i),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,h),s.backgroundTexture=e};var c=this.canvas.toDataURL(e);h.src=c,this.visible=!0,l()}function l(){s.step(),cancelAnimationFrame(l),requestAnimationFrame(l)}};p.DEFAULTS={resolution:256,dropRadius:20,perturbance:.03,interactive:!0},p.prototype={step:function r(){u=this.context,this.visible&&this.backgroundTexture&&(this.computeTextureBoundaries(),this.running&&this.update(),this.render())},drawQuad:function a(){u.bindBuffer(u.ARRAY_BUFFER,this.quad),u.vertexAttribPointer(0,2,u.FLOAT,!1,0,0),u.drawArrays(u.TRIANGLE_FAN,0,4)},render:function o(){u.viewport(0,0,this.canvasWidth,this.canvasHeight),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.useProgram(this.renderProgram.id),c(this.backgroundTexture,0),c(this.textures[0],1);var t=this.renderProgram.locations.topLeft,i=this.renderProgram.locations.bottomRight,e=this.renderProgram.locations.containerRatio,s=this.renderProgram.locations.samplerBackground,r=this.renderProgram.locations.samplerRipples;u.uniform2fv(t,this.renderProgram.uniforms.topLeft),u.uniform2fv(i,this.renderProgram.uniforms.bottomRight),u.uniform2fv(e,this.renderProgram.uniforms.containerRatio),u.uniform1i(s,0),u.uniform1i(r,1),this.drawQuad()},update:function n(){u.viewport(0,0,this.resolution,this.resolution);for(var t=0;t<2;t++)u.bindFramebuffer(u.FRAMEBUFFER,this.framebuffers[t]),c(this.textures[1-t]),u.useProgram(this.updateProgram[t].id),this.drawQuad();u.bindFramebuffer(u.FRAMEBUFFER,null)},computeTextureBoundaries:function w(){this.$el.offset();var t=this.$el.offset().left,i=this.$el.offset().Top,e=this.$el.css("background-size"),s=this.$el.css("background-attachment"),r=this.$el.css("background-position").split(" "),a="fixed"==s?x:this.$el,o=a.offset()||{left:pageXOffset,top:pageYOffset},n=o.left,h=o.top,c=a.innerWidth(),l=a.innerHeight(),d=Math.max(this.canvasWidth,this.canvasHeight),u=this.backgroundWidth;if("cover"==e)var p=u*(g=Math.max(c/u,l/this.backgroundHeight)),f=this.backgroundHeight*g;else if("contain"==e){var g;p=u*(g=Math.min(c/u,l/this.backgroundHeight)),f=this.backgroundHeight*g}else{p=(e=e.split(" "))[0]||"",f=e[1]||p;y(p)?p=c*parseFloat(p)/100:"auto"!=p&&(p=parseFloat(p)),y(f)?f=l*parseFloat(f)/100:"auto"!=f&&(f=parseFloat(f)),"auto"==p&&"auto"==f?(p=u,f=this.backgroundHeight):("auto"==p&&(p=u*(f/this.backgroundHeight)),"auto"==f&&(f=this.backgroundHeight*(p/u)))}var m=r[0]||"",v=r[1]||m;m="left"==m?n:"center"==m?n+c/2-p/2:"right"==m?n+c-p:y(m)?n+(c-p)*parseFloat(m)/100:parseFloat(m),v="top"==v?h:"center"==v?h+l/2-f/2:"bottom"==v?h+l-f:y(v)?h+(l-f)*parseFloat(v)/100:parseFloat(v),this.renderProgram.uniforms.topLeft=new Float32Array([(t-m)/p,(i-v)/f]),this.renderProgram.uniforms.bottomRight=new Float32Array([((t-m)/p+this.canvasWidth)/p,((i-v)/f+this.canvasHeight)/f]),this.renderProgram.uniforms.containerRatio=new Float32Array([this.canvasWidth/d,this.canvasHeight/d])},initShaders:function h(){var t=["attribute vec2 vertex;","varying vec2 coord;","void main() {","coord = vertex * 0.5 + 0.5;","gl_Position = vec4(vertex, 0.0, 1.0);","}"].join("\n");this.dropProgram=e(t,["precision highp float;","const float PI = 3.141592653589793;","uniform sampler2D texture;","uniform vec2 center;","uniform float radius;","uniform float strength;","varying vec2 coord;","void main() {","vec4 info = texture2D(texture, coord);","float drop = max(0.0, 1.0 - length(center * 0.5 + 0.5 - coord) / radius);","drop = 0.5 - cos(drop * PI) * 0.5;","info.r += drop * strength;","gl_FragColor = info;","}"].join("\n")),this.updateProgram=[0,0],this.updateProgram[0]=e(t,["precision highp float;","uniform sampler2D texture;","uniform vec2 delta;","varying vec2 coord;","void main() {","vec4 info = texture2D(texture, coord);","vec2 dx = vec2(delta.x, 0.0);","vec2 dy = vec2(0.0, delta.y);","float average = (","texture2D(texture, coord - dx).r +","texture2D(texture, coord - dy).r +","texture2D(texture, coord + dx).r +","texture2D(texture, coord + dy).r",") * 0.25;","info.g += (average - info.r) * 2.0;","info.g *= 0.995;","info.r += info.g;","gl_FragColor = info;","}"].join("\n")),u.uniform2fv(this.updateProgram[0].locations.delta,this.textureDelta),this.updateProgram[1]=e(t,["precision highp float;","uniform sampler2D texture;","uniform vec2 delta;","varying vec2 coord;","void main() {","vec4 info = texture2D(texture, coord);","vec3 dx = vec3(delta.x, texture2D(texture, vec2(coord.x + delta.x, coord.y)).r - info.r, 0.0);","vec3 dy = vec3(0.0, texture2D(texture, vec2(coord.x, coord.y + delta.y)).r - info.r, delta.y);","info.ba = normalize(cross(dy, dx)).xz;","gl_FragColor = info;","}"].join("\n")),u.uniform2fv(this.updateProgram[1].locations.delta,this.textureDelta),this.renderProgram=e(["precision highp float;","attribute vec2 vertex;","uniform vec2 topLeft;","uniform vec2 bottomRight;","uniform vec2 containerRatio;","varying vec2 ripplesCoord;","varying vec2 backgroundCoord;","void main() {","backgroundCoord = mix(topLeft, bottomRight, vertex * 0.5 + 0.5);","backgroundCoord.y = 1.0 - backgroundCoord.y;","ripplesCoord = vec2(vertex.x, -vertex.y) * containerRatio * 0.5 + 0.5;","gl_Position = vec4(vertex.x, -vertex.y, 0.0, 1.0);","}"].join("\n"),["precision highp float;","uniform sampler2D samplerBackground;","uniform sampler2D samplerRipples;","uniform float perturbance;","varying vec2 ripplesCoord;","varying vec2 backgroundCoord;","void main() {","vec2 offset = -texture2D(samplerRipples, ripplesCoord).ba;","float specular = pow(max(0.0, dot(offset, normalize(vec2(-0.6, 1.0)))), 4.0);","gl_FragColor = texture2D(samplerBackground, backgroundCoord + offset * perturbance) + specular;","}"].join("\n")),u.uniform1f(this.renderProgram.locations.perturbance,this.perturbance)},dropAtMouse:function l(t,i,e){this.drop(t.pageX-this.$el.offset().left,t.pageY-this.$el.offset().top,i,e)},drop:function f(t,i,e,s){u=this.context;var r=this.$el.outerWidth(),a=this.$el.outerHeight(),o=Math.max(r,a);e/=o;var n=new Float32Array([(2*t-r)/o,(a-2*i)/o]);u.viewport(0,0,this.resolution,this.resolution),u.bindFramebuffer(u.FRAMEBUFFER,this.framebuffers[0]),c(this.textures[1]),u.useProgram(this.dropProgram.id),u.uniform2fv(this.dropProgram.locations.center,n),u.uniform1f(this.dropProgram.locations.radius,e),u.uniform1f(this.dropProgram.locations.strength,s),this.drawQuad();var h=this.framebuffers[0];this.framebuffers[0]=this.framebuffers[1],this.framebuffers[1]=h,h=this.textures[0],this.textures[0]=this.textures[1],this.textures[1]=h,u.bindFramebuffer(u.FRAMEBUFFER,null)},destroy:function g(){this.context.getExtension("WEBGL_lose_context").loseContext(),this.canvas.remove(),this.$el.off(".ripples"),this.$el.removeClass("jquery-ripples").removeData("ripples")},show:function m(){this.$canvas.show(),this.$el.css("backgroundImage","none"),this.visible=!0},hide:function v(){this.$canvas.hide(),this.$el.css("backgroundImage",""),this.visible=!1},pause:function R(){this.running=!1},play:function E(){this.running=!0},set:function b(t,i){switch(t){case"interactive":this.interactive=i}}};var s=d.fn.faiRipples;d.fn.faiRipples=function(s){if(i){var r=1<arguments.length?Array.prototype.slice.call(arguments,1):undefined;return this.each(function(){var t=d(this),i=t.data("ripples"),e=d.extend({},p.DEFAULTS,t.data(),"object"==_typeof(s)&&s);!i&&"string"==typeof s||(i?"string"==typeof s&&p.prototype[s].apply(i,r):t.data("ripples",i=new p(this,e)))})}window.console&&console.log("Your browser does not support at least one of the following: WebGL, OES_texture_float extension, OES_texture_float_linear extension.")},d.fn.faiRipples.Constructor=p,d.fn.faiRipples.noConflict=function(){return d.fn.faiRipples=s,this}}(jQuery),function(i){var e=function e(){return"function"==typeof document.createElement("canvas").getContext};function r(t,i){if(this===window)return new r(t,i);this.img=i;var e={opacity:1,blur:10,crop:[0,0,this.img.naturalWidth,this.img.naturalHeight],enableSizeChange:!0,parentElement:null,fps:30,fillStyle:"#8ED6FF",enableCollisions:!0,gravityThreshold:3,gravityAngle:Math.PI/2,gravityAngleVariance:0,reflectionScaledownFactor:5,reflectionDropMappingWidth:200,reflectionDropMappingHeight:200,width:this.img.clientWidth,height:this.img.clientHeight,position:"absolute",top:0,left:0,rainyEffect:0};for(var s in e)"undefined"==typeof t[s]&&(t[s]=e[s]);this.options=t,this.drops=[],this.canvas=this.prepareCanvas(),this.prepareBackground(),this.prepareGlass(),this.reflection=this.REFLECTION_MINIATURE,this.trail=this.TRAIL_DROPS,this.gravity=this.GRAVITY_NON_LINEAR,this.collision=this.COLLISION_SIMPLE,this.setRequestAnimFrame(),this.beginTime=(new Date).getTime()}function c(t,i,e,s,r){this.x=Math.floor(i),this.y=Math.floor(e),this.r=Math.random()*r+s,this.rainyday=t,this.context=t.context,this.reflection=t.reflected}function Y(){this.r=0,this.g=0,this.b=0,this.next=null}function l(t,i,e){this.resolution=e,this.xc=t,this.yc=i,this.matrix=new Array(t);for(var s=0;s<=t+5;s++){this.matrix[s]=new Array(i);for(var r=0;r<=i+5;++r)this.matrix[s][r]=new a(null)}}function a(t){this.drop=t,this.next=null}r.prototype.prepareCanvas=function(){var t=document.createElement("canvas");return t.style.position=this.options.position,t.style.top=this.options.top,t.style.left=this.options.left,t.className="rainyday-canvas",t.width=this.img.width,t.height=this.img.height,null==this.options.parentElement?this.img.parentElement.appendChild(t):this.options.parentElement.appendChild(t),this.options.enableSizeChange,t},r.prototype.setResizeHandler=function(){null!==window.onresize?window.setInterval(this.checkSize.bind(this),100):(window.onresize=this.checkSize.bind(this),window.onorientationchange=this.checkSize.bind(this))},r.prototype.checkSize=function(){var t=this.img.clientWidth,i=this.img.clientHeight,e=this.img.offsetLeft,s=this.img.offsetTop,r=this.canvas.width,a=this.canvas.height,o=this.canvas.offsetLeft,n=this.canvas.offsetTop;r===t&&a===i||(this.canvas.width=t,this.canvas.height=i,this.prepareBackground(),this.glass.width=this.canvas.width,this.glass.height=this.canvas.height,this.prepareReflections()),o===e&&n===s||(this.canvas.offsetLeft=e,this.canvas.offsetTop=s)},r.prototype.animateDrops=function(){this.addDropCallback&&this.addDropCallback();for(var t=0;t<Math.floor(this.drops.length*Math.random()*.4);++t){this.drops[t].animate()}this.drops.length&&window.requestAnimationFrame(this.animateDrops.bind(this))},r.prototype.setRequestAnimFrame=function(){var i=this.options.fps;window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/i)}},r.prototype.prepareReflections=function(){this.reflected=document.createElement("canvas"),this.reflected.width=this.canvas.width/this.options.reflectionScaledownFactor,this.reflected.height=this.canvas.height/this.options.reflectionScaledownFactor,this.reflected.getContext("2d").drawImage(this.img,this.options.crop[0],this.options.crop[1],this.options.crop[2],this.options.crop[3],0,0,this.reflected.width,this.reflected.height)},r.prototype.prepareGlass=function(){this.glass=document.createElement("canvas"),this.glass.width=this.canvas.width,this.glass.height=this.canvas.height,this.context=this.glass.getContext("2d")},r.prototype.rain=function(a,o){var n=this;if(this.reflection!==this.REFLECTION_NONE&&this.prepareReflections(),this.presets=a,this.PRIVATE_GRAVITY_FORCE_FACTOR_Y=.001*this.options.fps/25,this.PRIVATE_GRAVITY_FORCE_FACTOR_X=(Math.PI/2-this.options.gravityAngle)*(.001*this.options.fps)/50,this.options.enableCollisions){for(var t=0,i=0;i<a.length;i++)a[i][0]+a[i][1]>t&&(t=Math.floor(a[i][0]+a[i][1]));if(0<t){var e=Math.ceil(this.canvas.width/t),s=Math.ceil(this.canvas.height/t);this.matrix=new l(e,s,t)}else this.options.enableCollisions=!1}for(i=0;i<a.length;i++)a[i][3]||(a[i][3]=-1);var h=0;this.addDropCallback=function(){var t=(new Date).getTime();if(!(t-h<o)){h=t;var i,e=this.canvas.getContext("2d");e.clearRect(0,0,this.canvas.width,this.canvas.height),e.drawImage(this.background,0,0,this.canvas.width,this.canvas.height);for(var s=0;s<a.length;s++)if(1<a[s][2]||-1===a[s][3]){if(0!==a[s][3]){a[s][3]--;for(var r=0;r<a[s][2];++r)this.putDrop(new c(this,Math.random()*this.canvas.width,Math.random()*this.canvas.height,a[s][0],a[s][1]))}}else if(Math.random()<a[s][2]){i=a[s];break}i&&this.putDrop(new c(this,Math.random()*this.canvas.width,Math.random()*this.canvas.height,i[0],i[1])),e.save(),e.globalAlpha=this.options.opacity,2e4<t-n.beginTime?(e.clearRect(this.glass,0,0,this.canvas.width,this.canvas.height),n.drops=[],n.beginTime=(new Date).getTime(),n.glass=null,n.prepareGlass(),1===n.options.rainyEffect?n.rain([[0,2,10],[3,3,.1]],33):0===n.options.rainyEffect&&n.rain([[3,2,2]],50)):e.drawImage(this.glass,0,0,this.canvas.width,this.canvas.height),e.restore()}}.bind(this),this.animateDrops()},r.prototype.putDrop=function(t){t.draw(),this.gravity&&t.r>this.options.gravityThreshold&&(this.options.enableCollisions&&this.matrix.update(t),this.drops.push(t))},r.prototype.clearDrop=function(t,i){var e=t.clear(i);if(e){var s=this.drops.indexOf(t);0<=s&&this.drops.splice(s,1)}return e},c.prototype.draw=function(){this.context.save(),this.context.beginPath();var t=this.r;if(this.r=.95*this.r,this.r<3)this.context.arc(this.x,this.y,this.r,0,2*Math.PI,!0),this.context.closePath();else if(this.colliding||2<this.yspeed){if(this.colliding){var i=this.colliding;this.r=1.001*(this.r>i.r?this.r:i.r),this.x+=i.x-this.x,this.colliding=null}var e=1+.1*this.yspeed;this.context.moveTo(this.x-this.r/e,this.y),this.context.bezierCurveTo(this.x-this.r,this.y-2*this.r,this.x+this.r,this.y-2*this.r,this.x+this.r/e,this.y),this.context.bezierCurveTo(this.x+this.r,this.y+e*this.r,this.x-this.r,this.y+e*this.r,this.x-this.r/e,this.y)}else this.context.arc(this.x,this.y,.9*this.r,0,2*Math.PI,!0),this.context.closePath();this.context.clip(),this.r=t,this.rainyday.reflection&&this.rainyday.reflection(this),this.context.restore()},c.prototype.clear=function(t){return this.context.clearRect(this.x-this.r-1,this.y-this.r-2,2*this.r+2,2*this.r+2),t?this.terminate=!0:this.y-this.r>this.rainyday.canvas.height||this.x-this.r>this.rainyday.canvas.width||this.x+this.r<0},c.prototype.animate=function(){if(this.terminate)return!1;var t=this.rainyday.gravity(this);if(!t&&this.rainyday.trail&&this.rainyday.trail(this),this.rainyday.options.enableCollisions){var i=this.rainyday.matrix.update(this,t);i&&this.rainyday.collision(this,i)}return!t||this.terminate},r.prototype.TRAIL_NONE=function(){},r.prototype.TRAIL_DROPS=function(t){(!t.trailY||t.y-t.trailY>=100*Math.random()*t.r)&&(t.trailY=t.y,this.putDrop(new c(this,t.x+(2*Math.random()-1)*Math.random(),t.y-t.r-5,Math.ceil(t.r/5),0)))},r.prototype.TRAIL_SMUDGE=function(t){var i=t.y-t.r-3,e=t.x-t.r/2+2*Math.random();i<0||e<0||this.context.drawImage(this.clearbackground,e,i,t.r,2,e,i,t.r,2)},r.prototype.GRAVITY_NONE=function(){return!0},r.prototype.GRAVITY_LINEAR=function(t){return!!this.clearDrop(t)||(t.yspeed?(t.yspeed+=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y*Math.floor(t.r),t.xspeed+=this.PRIVATE_GRAVITY_FORCE_FACTOR_X*Math.floor(t.r)):(t.yspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y,t.xspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_X),t.y+=t.yspeed,t.draw(),!1)},r.prototype.GRAVITY_NON_LINEAR=function(t){return!!this.clearDrop(t)||(t.collided?(t.collided=!1,t.seed=Math.floor(t.r*Math.random()*this.options.fps),t.skipping=!1,t.slowing=!1):(!t.seed||t.seed<0)&&(t.seed=Math.floor(t.r*Math.random()*this.options.fps),t.skipping=!1===t.skipping,t.slowing=!0),t.seed--,t.yspeed?t.slowing?(t.yspeed/=1.1,t.xspeed/=1.1,t.yspeed<this.PRIVATE_GRAVITY_FORCE_FACTOR_Y&&(t.slowing=!1)):t.skipping?(t.yspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y,t.xspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_X):(t.yspeed+=1*this.PRIVATE_GRAVITY_FORCE_FACTOR_Y*Math.floor(t.r),t.xspeed+=1*this.PRIVATE_GRAVITY_FORCE_FACTOR_X*Math.floor(t.r)):(t.yspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y,t.xspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_X),0!==this.options.gravityAngleVariance&&(t.xspeed+=(2*Math.random()-1)*t.yspeed*this.options.gravityAngleVariance),t.y+=t.yspeed,t.x+=t.xspeed,t.draw(),!1)},r.prototype.positiveMin=function(t,i){var e=0;return(e=t<i?t<=0?i:t:i<=0?t:i)<=0?1:e},r.prototype.REFLECTION_NONE=function(){this.context.fillStyle=this.options.fillStyle,this.context.fill()},r.prototype.REFLECTION_MINIATURE=function(t){var i=Math.max((t.x-this.options.reflectionDropMappingWidth)/this.options.reflectionScaledownFactor,0),e=Math.max((t.y-this.options.reflectionDropMappingHeight)/this.options.reflectionScaledownFactor,0),s=this.positiveMin(2*this.options.reflectionDropMappingWidth/this.options.reflectionScaledownFactor,this.reflected.width-i),r=this.positiveMin(2*this.options.reflectionDropMappingHeight/this.options.reflectionScaledownFactor,this.reflected.height-e),a=Math.max(t.x-1.1*t.r,0),o=Math.max(t.y-1.1*t.r,0);this.context.drawImage(this.reflected,i,e,s,r,a,o,2*t.r,2*t.r)},r.prototype.COLLISION_SIMPLE=function(t,i){for(var e,s,r,a=i;null!=a;){var o=a.drop;if(Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2))<t.r+o.r){e=o;break}a=a.next}e&&(r=t.y>e.y?(s=t,e):(s=e,t),this.clearDrop(r),this.clearDrop(s,!0),this.matrix.remove(s),r.draw(),r.colliding=s,r.collided=!0)},r.prototype.prepareBackground=function(){this.background=document.createElement("canvas"),this.background.width=this.canvas.width,this.background.height=this.canvas.height,this.clearbackground=document.createElement("canvas"),this.clearbackground.width=this.canvas.width,this.clearbackground.height=this.canvas.height;var t=this.background.getContext("2d");t.clearRect(0,0,this.canvas.width,this.canvas.height),t.drawImage(this.img,this.options.crop[0],this.options.crop[1],this.options.crop[2],this.options.crop[3],0,0,this.canvas.width,this.canvas.height),(t=this.clearbackground.getContext("2d")).clearRect(0,0,this.canvas.width,this.canvas.height),t.drawImage(this.img,this.options.crop[0],this.options.crop[1],this.options.crop[2],this.options.crop[3],0,0,this.canvas.width,this.canvas.height),!isNaN(this.options.blur)&&1<=this.options.blur&&this.stackBlurCanvasRGB(this.canvas.width,this.canvas.height,this.options.blur)},r.prototype.stackBlurCanvasRGB=function(t,i,e){var s=[[0,9],[1,11],[2,12],[3,13],[5,14],[7,15],[11,16],[15,17],[22,18],[31,19],[45,20],[63,21],[90,22],[127,23],[181,24]],r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];e|=0;var a=this.background.getContext("2d");if(0!==t&&0!==i){var o,n,h,c,l,d,u,p,f,g,m,v,x,y,w,R,E,b,T,M,A=a.getImageData(0,0,t,i),_=A.data,F=e+1,C=F*(F+1)/2,P=new Y,k=new Y,I=P;for(h=1;h<2*e+1;h++)I=I.next=new Y,h===F&&(k=I);I.next=P;var L=null,S=null;u=d=0;for(var D,O=r[e],X=0;X<s.length;++X)if(e<=s[X][0]){D=s[X-1][1];break}for(n=0;n<i;n++){for(y=w=R=p=f=g=0,m=F*(E=_[d]),v=F*(b=_[d+1]),x=F*(T=_[d+2]),p+=C*E,f+=C*b,g+=C*T,I=P,h=0;h<F;h++)I.r=E,I.g=b,I.b=T,I=I.next;for(h=1;h<F;h++)c=d+((t-1<h?t-1:h)<<2),p+=(I.r=E=_[c])*(M=F-h),f+=(I.g=b=_[c+1])*M,g+=(I.b=T=_[c+2])*M,y+=E,w+=b,R+=T,I=I.next;for(L=P,S=k,o=0;o<t;o++)_[d]=p*O>>D,_[d+1]=f*O>>D,_[d+2]=g*O>>D,p-=m,f-=v,g-=x,m-=L.r,v-=L.g,x-=L.b,c=u+((c=o+e+1)<t-1?c:t-1)<<2,p+=y+=L.r=_[c],f+=w+=L.g=_[c+1],g+=R+=L.b=_[c+2],L=L.next,m+=E=S.r,v+=b=S.g,x+=T=S.b,y-=E,w-=b,R-=T,S=S.next,d+=4;u+=t}for(o=0;o<t;o++){for(w=R=y=f=g=p=0,m=F*(E=_[d=o<<2]),v=F*(b=_[d+1]),x=F*(T=_[d+2]),p+=C*E,f+=C*b,g+=C*T,I=P,h=0;h<F;h++)I.r=E,I.g=b,I.b=T,I=I.next;for(l=t,h=1;h<F;h++)d=l+o<<2,p+=(I.r=E=_[d])*(M=F-h),f+=(I.g=b=_[d+1])*M,g+=(I.b=T=_[d+2])*M,y+=E,w+=b,R+=T,I=I.next,h<i-1&&(l+=t);for(d=o,L=P,S=k,n=0;n<i;n++)_[c=d<<2]=p*O>>D,_[c+1]=f*O>>D,_[c+2]=g*O>>D,p-=m,f-=v,g-=x,m-=L.r,v-=L.g,x-=L.b,c=o+((c=n+F)<i-1?c:i-1)*t<<2,p+=y+=L.r=_[c],f+=w+=L.g=_[c+1],g+=R+=L.b=_[c+2],L=L.next,m+=E=S.r,v+=b=S.g,x+=T=S.b,y-=E,w-=b,R-=T,S=S.next,d+=t}a.putImageData(A,0,0)}},l.prototype.update=function(t,i){if(t.gid){if(!this.matrix[t.gmx]||!this.matrix[t.gmx][t.gmy])return null;if(this.matrix[t.gmx][t.gmy].remove(t),i)return null;if(t.gmx=Math.floor(t.x/this.resolution),t.gmy=Math.floor(t.y/this.resolution),!this.matrix[t.gmx]||!this.matrix[t.gmx][t.gmy])return null;this.matrix[t.gmx][t.gmy].add(t);var e=this.collisions(t);if(e&&null!=e.next)return e.next}else{if(t.gid=Math.random().toString(36).substr(2,9),t.gmx=Math.floor(t.x/this.resolution),t.gmy=Math.floor(t.y/this.resolution),!this.matrix[t.gmx]||!this.matrix[t.gmx][t.gmy])return null;this.matrix[t.gmx][t.gmy].add(t)}return null},l.prototype.collisions=function(t){var i=new a(null),e=i;return i=this.addAll(i,t.gmx-1,t.gmy+1),i=this.addAll(i,t.gmx,t.gmy+1),i=this.addAll(i,t.gmx+1,t.gmy+1),e},l.prototype.addAll=function(t,i,e){if(0<i&&0<e&&i<this.xc&&e<this.yc)for(var s=this.matrix[i][e];null!=s.next;)s=s.next,t.next=new a(s.drop),t=t.next;return t},l.prototype.remove=function(t){this.matrix[t.gmx][t.gmy].remove(t)},a.prototype.add=function(t){for(var i=this;null!=i.next;)i=i.next;i.next=new a(t)},a.prototype.remove=function(t){for(var i=this,e=null;null!=i.next;)(i=(e=i).next).drop.gid===t.gid&&(e.next=i.next)},i.fn.extend({faiRainyDay:function o(s){var t=e();s=s||{};t&&i(this).each(function(t,i){var e=new r(s,i);0===s.rainyEffect?e.rain([[3,2,2]],50):1===s.rainyEffect&&e.rain([[0,2,10],[3,3,.1]],33)})}})}(jQuery),function(a){var r,o,n,e,i,h=[],c=800,l=[],d=3,s=[],u=200,p=function p(){return"function"==typeof document.createElement("canvas").getContext};function f(t,i){var e=a(t),s=document.createElement("canvas");e.append(s),s.width=i.width||window.innerWidth,s.height=i.height||window.innerHeight,s.className="meteor-canvas",o=s.height,n=s.width,(r=s.getContext("2d")).fillStyle="black",n/d<100&&(u=100)}var g=function g(){this.x=n*Math.random(),this.y=5e3*Math.random(),this.text=".",this.color="white"};function m(){for(var t=0;t<c;t++)h[t].getColor(),h[t].draw();clearTimeout(i),i=setTimeout(m,200)}g.prototype={constructor:g,getColor:function y(){var t=Math.random();this.color=t<.5?"gray":"white"},init:function f(){this.getColor()},draw:function w(){r.beginPath(),r.arc(this.x,this.y,.05,0,2*Math.PI),r.strokeStyle=this.color,r.stroke(),r.closePath()}};var v=function v(){this.x=-1,this.y=-1,this.length=-1,this.angle=30,this.width=-1,this.height=-1,this.speed=1,this.offset_x=-1,this.offset_y=-1,this.alpha=1,this.color1="",this.color2=""};function x(){for(var t=0;t<d;t++){var i=l[t];i.move(),i.y>o+100&&(r.clearRect(i.x,i.y-i.height,i.width,i.height),s[t]=0,l[t]=new v(t),l[t].init(t))}clearTimeout(e),e=setTimeout(x,10)}v.prototype={constructor:v,init:function f(t){this.getPos(t),this.alpha=1;var i=80*Math.random()+180;this.length=Math.ceil(i),this.angle=30,i=Math.random()+.5,this.speed=Math.ceil(i);var e=Math.cos(3.14*this.angle/180),s=Math.sin(3.14*this.angle/180);this.width=this.length*e,this.height=this.length*s,this.offset_x=this.speed*e*3.5,this.offset_y=this.speed*s*3.5},countPos:function t(){this.x=this.x-this.offset_x,this.y=this.y+this.offset_y},getPos:function R(i){function e(){if(_this.x=Math.random()*n,s.length)for(var t=0;t<s.length;t++)if(Math.abs(_this.x-s[t])<u)return e();s[i]=_this.x}_this=this,e(),this.y=.2*o},draw:function w(){r.save(),r.beginPath(),r.lineWidth=2.5,r.globalAlpha=this.alpha;var t=r.createLinearGradient(this.x,this.y,this.x+this.width,this.y-this.height);t.addColorStop(0,"rgba(255, 255, 255, 1)"),t.addColorStop(1,"rgba(255, 255,255 , 0)"),this.alpha<0&&(this.alpha=-this.alpha),r.strokeStyle=t,r.moveTo(this.x,this.y),r.lineTo(this.x+this.width,this.y-this.height),r.closePath(),r.stroke(),r.restore()},move:function E(){this.x,this.width,this.offset_x;var t=this.y-this.height;this.alpha-=.002,this.countPos(),this.alpha<=0?this.alpha=0:1<this.alpha&&(this.alpha=1),r.clearRect(this.x-this.offset_x,t,this.width+this.offset_x,this.height),this.draw()}},a.fn.extend({faiMeteor:function b(r){var t=p();r=r||{};h=[],l=[],t&&a(this).each(function(t,i){f(i,r);for(t=0;t<c;t++){var e=new g;e.init(),e.draw(),h.push(e)}for(t=0;t<d;t++){var s=new v(t);s.init(t),s.draw(),l.push(s)}m(),x()})}})}(jQuery),function(s){var i=function i(){return"function"==typeof document.createElement("canvas").getContext},a=function a(t,i){return~~(Math.random()*(i-t+1)+t)},h=function h(t,i,e,s,r,a,o,n){return!(t+e<r||r+o<t||i+s<a||a+n<i)},e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},r=function r(t,i){this.canvas=document.createElement("canvas"),this.canvas.width=i.width||s(window).innerWidth(),this.canvas.height=i.height||s(window).innerHeight(),this.particles=[],this.partCount=150,this.fireworks=[],this.mx=this.canvas.width/2,this.my=this.canvas.height/2,this.currentHue=30,this.partSpeed=5,this.partSpeedVariance=10,this.partWind=50,this.partFriction=5,this.partGravity=1,this.hueMin=0,this.hueMax=360,this.fworkSpeed=4,this.fworkAccel=10,this.hueVariance=30,this.flickerDensity=25,this.showShockwave=!0,this.showTarget=!1,this.clearAlpha=25,s(t).append(this.canvas),this.canvas.className="fireworks-canvas",this.ctx=this.canvas.getContext("2d"),this.ctx.lineCap="round",this.ctx.lineJoin="round",this.lineWidth=1,this.bindEvents(),this.canvasLoop()};r.prototype={constructor:r,createParticles:function o(t,i,e){for(var s=this.partCount;s--;){var r={x:t,y:i,coordLast:[{x:t,y:i},{x:t,y:i},{x:t,y:i}],angle:a(0,360),speed:a(this.partSpeed-this.partSpeedVariance<=0?1:this.partSpeed-this.partSpeedVariance,this.partSpeed+this.partSpeedVariance),friction:1-this.partFriction/100,gravity:this.partGravity/2,hue:a(e-this.hueVariance,e+this.hueVariance),brightness:a(50,80),alpha:a(40,100)/100,decay:a(10,50)/1e3,wind:(a(0,this.partWind)-this.partWind/2)/25,lineWidth:this.lineWidth};this.particles.push(r)}},updateParticles:function n(){for(var t=this.particles.length;t--;){var i=this.particles[t],e=i.angle*Math.PI/180,s=Math.cos(e)*i.speed,r=Math.sin(e)*i.speed;i.speed*=i.friction,i.coordLast[2].x=i.coordLast[1].x,i.coordLast[2].y=i.coordLast[1].y,i.coordLast[1].x=i.coordLast[0].x,i.coordLast[1].y=i.coordLast[0].y,i.coordLast[0].x=i.x,i.coordLast[0].y=i.y,i.x+=s,i.y+=r,i.y+=i.gravity,i.angle+=i.wind,i.alpha-=i.decay,(!h(0,0,this.canvas.width,this.canvas.height,i.x-i.radius,i.y-i.radius,2*i.radius,2*i.radius)||i.alpha<.05)&&this.particles.splice(t,1)}},drawParticles:function c(){for(var t=this.particles.length;t--;){var i=this.particles[t],e=a(1,3)-1;if(this.ctx.beginPath(),this.ctx.moveTo(Math.round(i.coordLast[e].x),Math.round(i.coordLast[e].y)),this.ctx.lineTo(Math.round(i.x),Math.round(i.y)),this.ctx.closePath(),this.ctx.strokeStyle="hsla("+i.hue+", 100%, "+i.brightness+"%, "+i.alpha+")",this.ctx.stroke(),0<this.flickerDensity){var s=50-this.flickerDensity;if(a(0,s)===s){this.ctx.beginPath(),this.ctx.arc(Math.round(i.x),Math.round(i.y),a(i.lineWidth,i.lineWidth+3)/2,0,2*Math.PI,!1),this.ctx.closePath();var r=a(50,100)/100;this.ctx.fillStyle="hsla("+i.hue+", 100%, "+i.brightness+"%, "+r+")",this.ctx.fill()}}}},createFireworks:function l(t,i,e,s){var r={x:t,y:i,startX:t,startY:i,hitX:!1,hitY:!1,coordLast:[{x:t,y:i},{x:t,y:i},{x:t,y:i}],targetX:e,targetY:s,speed:this.fworkSpeed,angle:Math.atan2(s-i,e-t),shockwaveAngle:Math.atan2(s-i,e-t)+Math.PI/180*90,acceleration:this.fworkAccel/100,hue:this.currentHue,brightness:a(50,80),alpha:a(50,100)/100,lineWidth:this.lineWidth};this.fireworks.push(r)},updateFireworks:function d(){for(var t=this.fireworks.length;t--;){var i=this.fireworks[t];this.ctx.lineWidth=i.lineWidth,vx=Math.cos(i.angle)*i.speed,vy=Math.sin(i.angle)*i.speed,i.speed*=1+i.acceleration,i.coordLast[2].x=i.coordLast[1].x,i.coordLast[2].y=i.coordLast[1].y,i.coordLast[1].x=i.coordLast[0].x,i.coordLast[1].y=i.coordLast[0].y,i.coordLast[0].x=i.x,i.coordLast[0].y=i.y,i.startX>=i.targetX?i.x+vx<=i.targetX?(i.x=i.targetX,i.hitX=!0):i.x+=vx:i.x+vx>=i.targetX?(i.x=i.targetX,i.hitX=!0):i.x+=vx,i.startY>=i.targetY?i.y+vy<=i.targetY?(i.y=i.targetY,i.hitY=!0):i.y+=vy:i.y+vy>=i.targetY?(i.y=i.targetY,i.hitY=!0):i.y+=vy,i.hitX&&i.hitY&&(this.createParticles(i.targetX,i.targetY,i.hue),this.fireworks.splice(t,1))}},drawFireworks:function u(){var t=this.fireworks.length;for(this.ctx.globalCompositeOperation="lighter";t--;){var i=this.fireworks[t];this.ctx.lineWidth=i.lineWidth;var e=a(1,3)-1;this.ctx.beginPath(),this.ctx.moveTo(Math.round(i.coordLast[e].x),Math.round(i.coordLast[e].y)),this.ctx.lineTo(Math.round(i.x),Math.round(i.y)),this.ctx.closePath(),this.ctx.strokeStyle="hsla("+i.hue+", 100%, "+i.brightness+"%, "+i.alpha+")",this.ctx.stroke(),this.showTarget&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(Math.round(i.targetX),Math.round(i.targetY),a(1,8),0,2*Math.PI,!1),this.ctx.closePath(),this.ctx.lineWidth=1,this.ctx.stroke(),this.ctx.restore()),this.showShockwave&&(this.ctx.save(),this.ctx.translate(Math.round(i.x),Math.round(i.y)),this.ctx.rotate(i.shockwaveAngle),this.ctx.beginPath(),this.ctx.arc(0,0,i.speed/5*1,0,Math.PI,!0),this.ctx.strokeStyle="hsla("+i.hue+", 100%, "+i.brightness+"%, "+a(25,60)/100+")",this.ctx.lineWidth=i.lineWidth,this.ctx.stroke(),this.ctx.restore())}},bindEvents:function p(){var t=this;function i(){t.mx=t.canvas.width*Math.random()-t.canvas.offsetLeft,t.my=t.canvas.height*Math.random()-t.canvas.offsetTop,t.currentHue=a(t.hueMin,t.hueMax),t.createFireworks(t.canvas.width/2,t.canvas.height,t.mx,t.my),setTimeout(function(){e(i.bind(t))},500)}t.clear(),e(i.bind(t))},clear:function t(){this.particles=[],this.fireworks=[],this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},canvasLoop:function f(){var t=this;e(this.canvasLoop.bind(t),this.canvas),this.ctx.globalCompositeOperation="destination-out",this.ctx.fillStyle="rgba(0, 0, 0, "+this.clearAlpha/100+")",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.updateFireworks(),this.updateParticles(),this.drawFireworks(),this.drawParticles()}},s.fn.extend({faiFireworks:function g(e){var t=i();e=e||{};t&&s(this).each(function(t,i){new r(i,e)})}})}(jQuery);