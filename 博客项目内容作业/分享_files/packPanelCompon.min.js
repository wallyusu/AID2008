!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("__webpack_no_use_variable",[],e):"object"==typeof exports?exports.__webpack_no_use_variable=e():t.__webpack_no_use_variable=e()}(this,(function(){return function(t){var e={};function a(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e){!function(t,e,a){a.commData=a.commData||{},a.commFun=a.commFun||{};var i=a.commData,n=a.commFun;i.subNavPackModule={historyModules:[]};var o=window.historyModuleList;a.packPanelDef={module:[{tab:{tabText:"设置模块",compon:"packModuleAddCompon",isActive:!0}},{tab:{tabText:"历史模块",compon:"historyModuleCompon",isActive:!1}}]},n.bindContentScrollBar=function(t,a){setTimeout((function(){e.top.$(t).mCustomScrollbar({mouseWheel:!0,theme:"fk-gray",scrollbarPosition:"outside",advanced:{updateOnContentResize:!0},axis:"y"}),"function"==typeof a&&a()}),400)},n.bgColorPickerClick=function(e){if(!(e.base.length<1)){e.advance=!0,e.showInTop=!1,e.appendToWeb=!0;var a=e.onchange;e.inputHexStatus=function(t,e){a.call(null,e||t)},e.onchange=function(t,e){a.call(null,e||t)},t(this.$el).faiColorPickerAlp(e)}};var l=a.packPanelDef;Vue.component("fk-packpanel",{props:["curpanel","panelleft"],data:function(){return{packPanelDef:l,switchOn:!1,animateSart:!1,packOuterPanelStyle:{},isBUser:!Site.isOldUiUser()}},computed:{curPanel:function(){return this.packPanelDef.module},curTab:function(){for(var t=this.curPanel,e=0,a=t.length;e<a;e++)if(t[e].tab.isActive)return t[e].tab;return t[0].tab},curTabIndex:function(){for(var t=this.curPanel,e=this.curTab,a=0,i=t.length;a<i;a++)if(t[a].tab.compon==e.compon)return a;return 0},triangleActiveStyle:function(){return{left:83*this.curTabIndex+41.5-7+"px"}}},watch:{curTabIndex:function(t,e){this.animateSart=e<t}},mounted:function(){Site.inSubNavPackEdit.colIdActivedArr=Site.inSubNavPackEdit.colIdActivedArr||[],t.inArray(Site.inSubNavPackEdit.colId,Site.inSubNavPackEdit.colIdActivedArr)<0&&Site.inSubNavPackEdit.colIdActivedArr.push(Site.inSubNavPackEdit.colId),t(".packOuterPanel").draggable("destroy").draggable({containment:"body",distance:3,cursor:"move",axis:"x,y",scroll:!1,start:function(){e.top.$("#funPanelOverLay").show(),e.top.$("#colorpanel").remove(),e.top.$(".faiColorPicker").remove()},stop:function(){e.top.$("#funPanelOverLay").hide();var a=t(this).offset().top,i=e.top.$(".floatLeftTop").offset().top;a<i&&(a=i,t(this).offset({top:i}))}}).delegate("input,textarea,.colModuleNameText","click.input",(function(t){t.stopPropagation()})).off("click.funPanel").on("click.funPanel",(function(){var e=t(this).find(":focus");e.length<1||e.hasClass("colModuleName")||t(this).find(":focus").blur()})),t(".funOuterPanel").resizable("destroy").resizable({handles:"e,w",minWidth:350,maxWidth:640,create:function(){t(this).find(".ui-resizable-handle").addClass("funPanelResizeHandle")}})},methods:{tabClick:function(t){this.curTab.isActive=!1,t.isActive=!0,this.curTab=t},packPanelClick:function(){this.switchOn=!1},closeFunPanel:function(){Site.logDog(200256,16),a["packPanel"+Site.inSubNavPackEdit.colId].panelOpen=!1,Site.inSubNavPackEdit.exitSubNavPackEdit(),Site.faiSettingPanel.hide()}},template:"<div class='packOuterPanel' @click='packPanelClick' :style='{left:panelleft + \"px\"}'><div class='packMainNav'><div class='curMainSetingNav'><div class='mainSettingTab' v-for='(item, index) in curPanel' @click='tabClick(item.tab, index)'>{{item.tab.tabText}}</div><div class='triangleActive' :style='triangleActiveStyle'></div></div><div class='closeFunPanel' title='退出编辑' @click='closeFunPanel'><i class='closeFunPanelIcon' v-if='!isBUser'></i> <svg class='closeFunPanelSvg' aria-hidden=\"true\" v-else>\n                        <use :xlink:href=\"'#icon_close'\"></use>\n                    </svg></div></div><div class='packSettingContent' :class='{outPanelAnimateStart:animateSart}'><transition name='translate-fade' mode='out-in'><keep-alive><component :is='curTab.compon' packpaneldef='packPanelDef'></component></keep-alive></transition></div></div>"}),a.commData.addModuleList=[];var d=!1;function s(t){var a,i=e.top.Site.inSubNavPackEdit.colId;a=e.top.Site.buildNavV2BgStyle(t),e.top.$("#fk-subNavPack"+i).css({background:a}),Site.showRepeatTip(t.pp),Site.styleChanged()}n.refreshAddModuleList=function(){d&&(i.addModuleList=c())},Vue.component("packModuleAddCompon",{data:function(){d=!0,i.addModuleList=c();var t,a=Site.inSubNavPackEdit.subNavPackObj["col"+Site.inSubNavPackEdit.colId],n=a.bgData;return a.bgc&&"undefined"==typeof n.t&&(n.t=2,n.c=a.bgc),n.t=n.t||0,t={imgPath:n.ph,imgId:n.pi,picScale:n.ps,repeat:n.pp,color:n.c?n.c:"#fff",bgRepeatLists:[{value:0,label:"平铺",type:"Tiling",hidden:!1},{value:1,label:"不平铺",type:"not-tile",hidden:!1},{value:2,label:"拉伸",type:"stretch",hidden:!1}],uploadData:{title:"添加图片",maxSize:e.top._internal?3:1,type:["jpg","jpeg","gif","png","bmp"],from:"bg",entry:"webBg"},showEffect:!1},{commData:i,setStyleData:a,bgData:n,bgOpts:t,isUserIcon:Site.isOldUiUser(),widthType:0,widthValue:0,heightValue:0}},computed:{totalModules:function(){return this.commData.addModuleList}},activated:function(){i.addModuleList=c()},mounted:function(){!function(){var a=e.top.$("#fk-packPanel .panelInnerContent_addModule").find(".moduleAloneArea"),i=".J_moduleZone:visible, .column:visible, .fullmeasureContent:visible, .J_packContent:visible, .formTabButtonList:visible, .formTabButtonYList:visible",n=Site.isOldUiUser();e.top._subNavPackEdit&&(i=".J_subNavPack:visible");function o(t){return n?"<div class='moduleAloneIcon'></div>":"<svg class='moduleAloneIconSvg' aria-hidden=\"true\">\n\t\t\t\t\t<use xlink:href=".concat(t.children().children()[0].href.baseVal,"></use>\n\t\t\t\t</svg>")}a.draggable("destroy").draggable({helper:function(){return"<div id='panelInnerContentDrag' class='panelInnerContent panelInnerContentDrag'>\n\t\t\t\t\t\t\t\t<div class='".concat(t(this).attr("class")," moduleAloneAreaDrag'>\n\t\t\t\t\t\t\t\t\t").concat(o(t(this)),"\n\t\t\t\t\t\t\t\t\t<div class='moduleAloneText'>").concat(t(this).find(".moduleAloneText").text(),"</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>")},appendTo:"body",cursor:"move",zIndex:9999,opacity:.6,connectToSortable:i,start:function(){e.top.dragToAddModule=!0},stop:function(a,i){("svg"===t(this).children().eq(0)[0].nodeName?t(this).children().eq(1):t(this).children().eq(0)).trigger("click"),Site.sortableHelper.replaceAddModuleBtn(i),e.top._subNavPackEdit&&e.top.$(".J_subNavPack").find("div.moduleAloneArea").remove(),e.top.dragToAddModule=!1}})}(),this.$nextTick((function(){a.commFun.bindContentScrollBar(".panelInnerContent_addModule")}))},methods:{fullMeasureChange:function(a){this.setStyleData.ifm=!!a;var i,n,o,l,d,s,c,r,u=Site.inSubNavPackEdit,p=u.colId,f=t("#fk-subNavPack"+p),m=t("#fk-subNavPack"+p).find(".container"),h=t("#fk-subNavPack"+p).find(".editSubNavPack"),v=e.top.$("#nav"+p),b=e.top.$("#webContainer"),g=e.top.$("#web").width();b.length<1||(o=b.width(),l=b.offset().left,a?(u.subNavPackBindResizable(f,"s"),u.subNavPackObj["col"+p].ifm=!0,s="100%",document.documentElement.scrollHeight>document.documentElement.clientHeight&&(s=t("#web").width()+"px"),f.css({width:""+s,left:""}),m.css("margin-left",l+"px"),m.width(o),h.css("left",l+10+"px")):(i=o,n=f.data("packSizeData"),d=o+l,u.subNavPackBindResizable(f,"s,w,e"),u.subNavPackObj["col"+p].ifm=!1,1==n.lt?(r=(r=n.nl+v.offset().left)<0?0:r,f.css("left",Math.floor(r)+"px"),l>r?m.css("margin-left",l-r+"px"):m.css("margin-left",0),r+n.w>g?f.width(g-r):f.width(n.w),c=n.w+r,i=Math.min(c,d)-Math.max(l,r),m.width(i)):(f.css("left",l+"px"),m.css("margin-left",0),i=o,f.width(i),m.width(i),n.lt=0,f.data("packSizeData",n)),h.css("left","")),Site.logDog(200256,12),Site.styleChanged())},addModuleClick:function(a){!function(a){e.top._subNavPackEdit&&(e.top._appendArea="fk-subNavPack"+Site.inSubNavPackEdit.colId+" .container");var i=e.top._colId,n=e.top._extId,o=[];if("floatImg"==a)Site.logDog(200256,9),e.ing("正在保存……",!1),t.ajax({type:"post",url:Site.addRequestPrefix({newPath:"/ajax",oldPath:"ajax"})+"/module_h.jsp?cmd=addWafCk_add&subNavPackModule=true&style=79&colId="+i+"&extId="+n,data:"name="+e.encodeUrl("图片"),error:function(){e.ing("服务繁忙，请稍候重试",!1)},success:function(a){var i=t.parseJSON(a);e.successHandle(a,"","系统错误","",3,1)&&(Site.addNewModule(i.id,i.div,null,null,{returnModuledata:i.moduleData}),o.push(i.id),Site.inSubNavPackEdit.addModuleSave(o,Site.inSubNavPackEdit.colId))}});else if("simpleText"==a)Site.logDog(200256,8),e.ing("正在保存……",!1),t.ajax({type:"post",url:Site.addRequestPrefix({newPath:"/ajax",oldPath:"ajax"})+"/module_h.jsp?cmd=addWafCk_add&subNavPackModule=true&style=86&colId="+i+"&extId="+n,data:"name="+e.encodeUrl("文本"),error:function(){e.ing("服务繁忙，请稍候重试",!1)},success:function(a){var i=t.parseJSON(a);e.successHandle(a,"","系统错误","",3,1)&&(Site.addNewModule(i.id,i.div,null,null,{returnModuledata:i.moduleData}),t("#module"+i.id).length>0&&(t("#module"+i.id).data("breakWord",!0).find(".fk-editor").addClass("fk-editor-break-word"),t("#module"+i.id).data("fixTextTrim",!0)),o.push(i.id),Site.inSubNavPackEdit.addModuleSave(o,Site.inSubNavPackEdit.colId))}});else if("floatBtn"==a){var l=function(t,e){return"rgba("+parseInt("0x"+t.slice(1,3))+","+parseInt("0x"+t.slice(3,5))+","+parseInt("0x"+t.slice(5,7))+","+e+")"},d=function(t,e){-1!==t.indexOf("#")&&(t=l(t,1));var a=t.split(","),i=[];i.push(a[0].substr(5)),i.push(a[1].substr(0)),i.push(a[2].substr(0)),i.push(a[3].substr(0,a[3].length-1));for(var n=0;n<3;n++)i[n]=Math.floor((255-parseInt(i[n]))*e+parseInt(i[n]));return"rgba("+i[0]+","+i[1]+","+i[2]+","+i[3]+")"};Site.logDog(200256,10);var s,c=Site.addRequestPrefix({newPath:"/ajax",oldPath:"ajax"})+"/module_h.jsp?cmd=addWafCk_add&subNavPackModule=true&style=81&colId="+i+"&extId="+n+"&flag1=true",r=[],u={},p={bns:101,bs:{v:"按钮",hn:"",h:"",hi:""}};if(r.push("&prop1="+e.encodeUrl(t.toJSON(p))),e.top._isTemplateVersion2){var f=e.top._majorColorData,m=l(f,1);s={imc:0,cc:f,utc:1,gcc:m=d(m,.5)}}else{r.push("&prop2=0");var h="#b7031c",v=l(h,1);s={imc:0,cc:h,utc:0,gcc:v=d(v,.5)}}r.push("&prop3="+e.encodeUrl(t.toJSON(s))),r.push("&prop4=7"),u.w=163,u.h=52,u.cb={},u.cb.y=1,u.e=1,u.d={},u.d.y=1,u.i={},u.i.t=0,u.i.b=0,u.i.l=0,u.i.r=0,u.i.y=0,u.cl={},u.cl.y=1,u.cl.ls=12,u.cl.f="微软雅黑",u.vfb={},r.push("&pattern="+e.encodeUrl(t.toJSON(u))),r.push("&name="+e.encodeUrl("按钮")),e.ing("正在保存……",!1),t.ajax({type:"post",url:c,data:r.join(""),error:function(){e.ing("服务繁忙，请稍候重试",!1)},success:function(a){var i=t.parseJSON(a);e.successHandle(a,"","系统错误","",3,1)&&(0==top.$("link[href='"+i.styleLink+"']").length&&top.$('<link type="text/css" href="'+i.styleLink+'" rel="stylesheet">').appendTo(top.$("head")),Site.addNewModule(i.id,i.div,null,null,{returnModuledata:i.moduleData}),t("#module"+i.id).css({width:"162px",height:"52px"}),o.push(i.id),Site.inSubNavPackEdit.addModuleSave(o,Site.inSubNavPackEdit.colId))}})}else if("rich"==a){Site.logDog(200256,23);var b={colId:i,extId:n,ram:Math.random(),subNavPackModule:!0},g=e.addUrlParamsV2("manage_v2/richEdit.jsp",b);Site.popupWindow({title:"添加模块（图文展示）",saveBeforePopup:!1,version:2,frameSrcUrl:g,width:838,height:680,closeFunc:function(t){t&&(o.push(t),Site.inSubNavPackEdit.addModuleSave(o,Site.inSubNavPackEdit.colId))}})}Site.setRefreshInfo("moduleEdit",!0)}(a)},bgScaleChange:function(t){this.bgData.ps=t,0==t?this.bgData.pp=3:1==t&&(this.bgData.pp=0),this.bgOpts.picPos=this.bgData.pp,s(this.bgData)},bgTilingChange:function(t){this.bgData.pp=t,s(this.bgData)},bgEffectChange:function(){},bgTypeChange:function(t){this.bgData.t=t,s(this.bgData),2==t&&Site.logDog(200256,22)},bgColorChange:function(t){var a,i,n,o,l=this;a=t,i=l.bgData,n=e.top.Site.inSubNavPackEdit.colId,o=e.top.$("#fk-subNavPack"+n),i.c=a,l.bgOpts.color=a,"transparent"==a||/rgba\((\d{1,3},\s*){1,3}0\)/.test(a)?o.addClass("fk-subNavPack-no-shadow"):o.removeClass("fk-subNavPack-no-shadow"),s(i)},bgImgChange:function(e){var a=this;if(e){var i=t.parseJSON(e).data[0]||{};a.bgData.ph=i.filePath,a.bgData.pi=i.fileId,a.bgOpts.imgPath=i.filePath,a.bgOpts.imgId=i.fileId,-1!=a.bgData.pp&&"undefined"!=typeof a.bgData.pp||(a.bgData.ps=0,a.bgData.pp=3,a.bgOpts.picScale=0,a.bgOpts.picPos=3),s(a.bgData)}},svgName:function(t){switch(t){case"file":return"panelFile";case"productGroup":case"catalog":return"productNav";case"tabHorizonal":return"tabPackHorizonal";case"tabVertical":return"tabPackVertical";case"fullmeasure":return"fullmeasurePack";case"photoCard":return"photoMoreCard";case"photo":return"photoGroup";case"uicheck":return"code";default:return t}}},template:"<div class='panelInnerContent panelInnerContent_addModule'>\n\t\t\t\t<div class='moduleFieldset' v-for='fieldset in totalModules' >\n\t\t\t\t\t<div class='legend'>\n\t\t\t\t\t\t<span class='legendText'>{{fieldset.groupName}}</span>\n\t\t\t\t\t\t<div class=\"moduleLegendLine\" v-show=\"!isUserIcon\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<transition name='component-addmodule' mode='out-in'>\n\t\t\t\t\t\t<div class='moduleViewList'>\n\t\t\t\t\t\t\t<div class='moduleAloneArea' :class='\"moduleArea_\" + module.keyword' @click='addModuleClick(module.keyword)' v-for='module in fieldset.list'>\n\t\t\t\t\t\t\t\t<div class='moduleAloneIcon' v-if=\"isUserIcon\"></div>\n\t\t\t\t\t\t\t\t<svg class='moduleAloneIconSvg' aria-hidden=\"true\" v-else>\n\t\t\t\t\t\t\t\t\t<use :xlink:href=\"'#icon_' + svgName(module.keyword)\"></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t<div class='moduleAloneText'>{{module.name}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</transition>\n\t\t\t\t</div>\n\t\t\t\t<div class='setStyle'>\n\t\t\t\t\t<div class='legend'>\n\t\t\t\t\t\t<span class='legendText'>设置样式</span>\n\t\t\t\t\t\t<div class=\"moduleLegendLine\" v-show=\"!isUserIcon\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='item'>\n\t\t\t\t\t\t<div class='itemTit'>通栏：</div>\n\t\t\t\t\t\t<switch-component ref='fullMeasureType' style='margin-left:16px' v-model='setStyleData.ifm' v-undo.switchBtn @on-change='fullMeasureChange'></switch-component>\n\t\t\t\t\t\t\x3c!--<div id='fullMeasureOn' class='fullMeasureOn'></div>--\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='f-item-bg item'>\n\t\t\t\t\t\t\x3c!--<div class='itemTit'>背景：</div>\n\t\t\t\t\t\t<div class='bgColor' :style='{\"background-color\" : setStyleData.bgc}' :class='{showBorder : (setStyleData.bgc == \"rgb(255, 255, 255)\" || setStyleData.bgc == \"#ffffff\")}'></div>--\x3e\n\t\t\t\t\t\t<span class='itemTit' slot='title'>背景：</span>\n\t\t\t\t\t\t<span slot='radioswitch'>\n\t\t\t\t\t\t\t<radio-group-component ref='bgDataType' class='fk-bg-radio-wrap' v-model='bgData.t' v-undo:t.radio='bgData' @on-change='bgTypeChange'>\n\t\t\t\t\t\t\t\t<radio-component :label='0' >默认</radio-component>\n\t\t\t\t\t\t\t\t<radio-component :label='2' >自定义</radio-component>\n\t\t\t\t\t\t\t</radio-group-component>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<background-component slot='itemsetting' ref='panelBg' :data='bgOpts'  v-show='bgData.t==2' v-undo.bg\n\t\t\t\t\t\t\t@img-change='bgImgChange'\n\t\t\t\t\t\t\t@bg-scale-change='bgScaleChange'\n\t\t\t\t\t\t\t@bg-repeat-change='bgTilingChange'\n\t\t\t\t\t\t\t@bg-effect-change='bgEffectChange'\n\t\t\t\t\t\t\t@bg-color-change='bgColorChange'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</background-component>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n        \t</div>"});var c=function(){var t=[],e=[];return t.push({name:"文本",keyword:"simpleText",show:!0}),t.push({name:"图片",keyword:"floatImg",show:!0}),t.push({name:"按钮",keyword:"floatBtn",show:!0}),t.push({name:"图文展示",keyword:"rich",show:!0}),e.push({groupName:"添加模块",list:t}),e};Site.goToPackPanel=function(t,e){if(a&&a.packPanelDef&&a.packPanelDef.module){for(var i=0;i<a.packPanelDef.module.length;i++)a.packPanelDef.module[i].tab.isActive=!1;a.packPanelDef.module[t].tab.isActive=!0,"function"==typeof e&&Vue.nextTick((function(){e()}))}},Site.bindGobalEvent("site_subNavPack_hideModule",(function(a,i){i.show&&Site.goToPackPanel(1,(function(){setTimeout((function(){!function(a){if(a.show&&(e.top.$("#fk-packPanelArea"+e.top.Site.inSubNavPackEdit.colId).find(".moduleId"+a.id).find(".historyModuleViewSwitch").click(),e.top.$(".packOuterPanel").attr("panelopen"))){var i=t("<div></div>");e.top.$("body").append(i),i.css({border:"2px solid #ff4400",position:"absolute",zIndex:"9999",top:a.top,left:a.left,height:a.height+"px",width:a.width+"px"});var n=t("#fk-packPanelArea"+e.top.Site.inSubNavPackEdit.colId),o=n.find(".historyModuleContainer"),l=0;o.mCustomScrollbar("scrollTo",".moduleId"+a.id,{scrollInertia:300}),o.find(".mCSB_scrollTools_vertical").is(":visible")&&(l=400),setTimeout((function(){Vue.nextTick((function(){var t=n.find(".moduleId"+a.id);t.length<1&&(t=n.find(".historyModuleListWrap").first()),i.animate({top:t.offset().top+"px",left:t.offset().left+"px",width:t.outerWidth()+"px",height:t.outerHeight()+"px"},850,(function(){i.remove()}))}))}),l)}}(i)}),300)}))}));var r=i.subNavPackModule;function u(a){t.ajax({type:"post",url:Site.addRequestPrefix({newPath:"/ajax/col_h.jsp",oldPath:Site.genAjaxUrl("col_h.jsp")}),data:"cmd=getColSubNavPackModule&id="+top.Site.inSubNavPackEdit.colId,async:!1,error:function(){e.ing("系统繁忙，请稍候重试",!1)},success:function(i){var n=t.parseJSON(i);!function(t){for(var a,i=e.top.$("#fk-subNavPack"+top.Site.inSubNavPackEdit.colId),n=0;n<t.length;n++)t[n].orName=t[n].name,a=i.find("#module"+t[n].id),t[n].s=!!a.is(":visible")}(n),function(t){t.map((function(t){var a,i=t.id,n=e.top.$("#module"+i);return"文本"==t.name?n.length>0&&n.find(".fkEditor-wrap .editTip").length<1&&(t.name=n.text().trim()):"图片"==t.name?(a=n.find("#float_img_"+i)).length>0&&(t.name=a.attr("alt")||"图片"):"按钮"==t.name&&(a=n.find("#module"+i+"FlBtn")).length>0&&(t.name=a.text().trim()),t}))}(n=p(n)),a.historyModules=n}})}function p(t){for(var e=[],a=[],i=0;i<t.length;i++)t[i].s?e.push(t[i]):a.push(t[i]);return t=e.concat(a)}n.refreshHisModuleListData=function(){u(r)},n.setHisModuleListData=function(){o=[]},Vue.component("historyModuleCompon",{data:function(){return{subNavPackModule:r}},beforeCreate:function(){u(r)},template:"<div class='historyModuleContainer'><div class='historyModuleListWrap'><ul class='historyModuleStaUl topModuleList'><li is='moduleLiCompon' class='topModuleLi' v-for='model in subNavPackModule.historyModules' :model='model' :modellist='subNavPackModule.historyModules'></li></ul></div></div>"}),Vue.component("moduleLiCompon",{props:["model","modellist"],data:function(){return{editName:!1}},mounted:function(){t("#fk-packPanelArea .historyModuleLineLeft, .historyModuleStatcList").focusin((function(t){t.stopPropagation()})),a.commFun.bindContentScrollBar(".historyModuleContainer")},methods:{toggleEdit:function(){this.editName=!this.editName,this.editName&&Vue.nextTick((function(){t(".historyModuleName").focus()}))},editNameBlur:function(){var a,i,n,o;this.editName=!1,a=this.model,i=a.id,n=a.name,o=a.orName,""!=t.trim(n)&&n!=o?n!=o&&t.ajax({type:"post",url:Site.addRequestPrefix({newPath:"/ajax/module_h.jsp",oldPath:Site.genAjaxUrl("module_h.jsp")}),data:"cmd=setWafCk_setBack&id="+i+"&name="+e.encodeUrl(n)+"&colId="+e.top._colId,error:function(){e.ing("系统繁忙，请稍候重试",!1)},success:function(e){var a=t.parseJSON(e);a.success&&Site.refreshModule(a.id,a.div,n)}}):a.title=o},moduleViewSwitchSwitch:function(){Site.styleChanged(),this.model.s=!this.model.s,o=p(this.modellist);for(var t=0;t<o.length;t++)this.modellist.splice(t,1,o[t]);this.model.s?e.top.$("#module"+this.model.id).show():e.top.$("#module"+this.model.id).hide()},delModelClick:function(){if(Site.styleChanged(),function(a){var i=!1;return t.ajax({type:"post",url:Site.addRequestPrefix({newPath:"/ajax/module_h.jsp",oldPath:Site.genAjaxUrl("module_h.jsp")}),data:"cmd=delWafCk_del&id="+a,async:!1,error:function(){e.ing("系统繁忙，请稍候重试",!1)},success:function(n){t.parseJSON(n).success&&(e.top.$("#module"+a).remove(),i=!0)}}),i}(this.model.id))for(var a=0;a<this.modellist.length;a++)if(this.modellist[a].id==this.model.id)return void this.modellist.splice(a,1)},showThisModule:function(t){t&&Site.triggerGobalEvent("showFindModuleDiv",t.id)}},template:"<div class='historyModuleStatcLine' :class='[\"moduleId\" + model.id, \"moduleStyle\" + model.style]' title='双击修改模块名称' @dblclick.stop='toggleEdit($event)'><span class='historyModuleLineLeft' @click='showThisModule(model)'><span class='historyModuleNameText' :class='{showModuleNameText:model.s}' v-if='!editName'>{{model.name? model.name: '&nbsp;'}}</span><input maxlength='50' class='historyModuleName' v-if='editName' v-model='model.name' @blur='editNameBlur'/></span><span class='historyModuleLineRight'><div class='historyModuleViewSwitch' :class='{historyModuleViewBlock:model.s}' :title='model.iconTitle' @click='moduleViewSwitchSwitch'></div><div class='historyModuleDel' title='删除模块' @click='delModelClick'></div></span></div>"})}($,Fai,Fai.top.v_packPanel||(Fai.top.v_packPanel={}))}])}));